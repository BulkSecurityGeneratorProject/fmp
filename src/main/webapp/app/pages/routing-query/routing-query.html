<div class="content-title">
	<h2>Routing Query</h2>
	<jhi-alert></jhi-alert>
</div>
<div class="panel">
	<div class="panel-body">
		<div class="filter-hero">
			<div class="filter-label semibold show">Hide Filter</div>
			<div class="filter-area">
				<div class="clearfix">
					<form name="queryForm" role="form" novalidate>
						<div class="col-md-12 no-pad">
							<div class="pull-left col-md-4 no-lpad">
								<div class="form-group">	
									<div class="custom-label semibold">Tar No</div>
									<div class="input-group">
										<input id="tarno" type="text" name="tarno"
											class="form-control no-comma" ng-model="vm.paramTarNo"
											uppercase> <span ng-click="vm.showTariffModal()"
											class="input-group-addon"><i class="fa fa-folder"></i>
										</span>
									</div>
								</div>
								<div class="form-group">	
									<div class="custom-label semibold">Carrier</div>
									<div class="input-group">
										<input id="carrier" type="text" name="carrier"
											class="form-control" ng-model="vm.paramCarrier"
											uppercase> <span ng-click="vm.showCarrierModal()"
											class="input-group-addon"><i class="fa fa-folder"></i>
										</span>
									</div>
								</div>
							</div>
							<div class="pull-left col-md-4 no-lpad">
								<div class="form-group">
									<div class="custom-label semibold">Routing No</div>
									<input type="text" class="form-control no-comma" name="routingno" id="routingno" ng-model="vm.queryParams.routingNo" uppercase />
								</div>
								<div class="form-group absolute-datepicker">
									<div class="custom-label semibold">Active Date</div>
									<div class="row no-mar">
										<div class="col-md-6 no-lpad">
											<input type="text" class="form-control" ng-click="vm.openCalendar($event, 'effectiveDateFrom')" 
												is-open="vm.datePickerOpenStatus['effectiveDateFrom']" datetime-picker="{{vm.dateFormat}}" 
												enable-time="false" name="effectiveDateFrom" id="datepicker" 
												ng-model="vm.queryParams.effectiveDateFrom" placeholder="From"/>
										</div>
										<div class="col-md-6 no-pad">
											<input type="text" class="form-control" ng-click="vm.openCalendar($event, 'effectiveDateTo')" 
												is-open="vm.datePickerOpenStatus['effectiveDateTo']" datetime-picker="{{vm.dateFormat}}" 
												enable-time="false" name="effectiveDateTo" id="datepicker" 
												ng-model="vm.queryParams.effectiveDateTo" placeholder="To"/>
										</div>
									</div>
								</div>
							</div>
							<div class="pull-left col-md-4 no-pad">
								<div class="form-group">	
									<div class="custom-label semibold">Entry Point</div>
									<input type="text" class="form-control no-comma" name="entrypoint" id="entrypoint" ng-model="vm.queryParams.entryPoint" uppercase />
								</div>
								<div class="form-group">	
									<div class="custom-label semibold">Exit Point</div>
									<input type="text" class="form-control no-comma" name="exitpoint" id="exitpoint" ng-model="vm.queryParams.exitPoint" uppercase />
								</div>
							</div>
						</div>
						<div class="clearfix">
							<div class="pull-right pv1">
								<button type="button"
										class="btn btn-default small"
										ng-click="vm.loadAll();">Query</button>
								<button type="button"
										class="btn btn-default small"
										ng-click="vm.clearFilter();">Clear</button>
								<button type="reset"
										ng-click="vm.resetFilter();"
										class="btn btn-default small">Reset</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
		<div class="table-wrapper">
			<div class="datatable-wrapper form-inline">
				<div class="clearfix">
					<div class="pull-left w50">
						<div class="datatable-length">
							<label>
								<select class="form-control" ng-model="vm.itemsPerPage" ng-change="vm.changeItemsPerPage()">
									<option value="10">10</option>
									<option value="15">15</option>
									<option value="20">20</option>
								</select>
								 records per page
							</label>
						</div>
					</div>
				</div>
				<div class="table-responsive main-table">
					<table class="table table-striped table-bordered datatable">
						<thead>
							<tr>
								<th>No.</th>
								<th>CXR</th>
								<th>TAR NO</th>
								<th>ROUTING NO</th>
								<th>EFFECTIVE DATE</th>
								<th>DISCONTINUED DATE</th>
								<th>DRV INDICATOR</th>
								<th>CPI</th>
								<th>DI</th>
								<th>INT PT</th>
								<th>UNT PT</th>
								<th>ACTION</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="routingQuery in vm.routingqueries" ng-class="{'selected': vm.selectedRow == routingQuery}" ng-click="vm.selectedRow = routingQuery; vm.getDetails(routingQuery);">
								<td>{{(vm.queryParams.page * vm.queryParams.size) + $index + 1}}</td>
			                    <td>{{routingQuery.cxr}}</td>
			                    <td>{{routingQuery.tarNo}}</td>
			                    <td>{{routingQuery.routingNo}}</td>
			                    <td>{{routingQuery.effectiveDate | date:'medium'}}</td>
			                    <td>{{routingQuery.discontinuedDate | date:'medium'}}</td>
			                    <td>{{routingQuery.drv}}</td>
			                    <td>{{routingQuery.cpi}}</td>
			                    <td>{{routingQuery.di}}</td>
			                    <td>{{routingQuery.intPt}}</td>
			                    <td>{{routingQuery.untPt}}</td>
			                    <td class="text-right">
			                        <div class="btn-group flex-btn-group-container">
			                            <button type="submit"
			                                    ng-click="vm.showRoutingDetailModal(routingQuery);"
			                                    class="btn btn-info btn-sm">
			                                <span class="glyphicon glyphicon-eye-open"></span>
			                                <span class="hidden-sm-down"></span>
			                            </button>
			                        </div>
			                    </td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="text-center">
					<jhi-item-count page="vm.page" total="vm.queryCount"
						items-per-page="vm.itemsPerPage"></jhi-item-count>
					<uib-pagination class="pagination-sm"
						total-items="vm.totalItems" items-per-page="vm.itemsPerPage"
						ng-model="vm.page" ng-change="vm.loadAll()"></uib-pagination>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="panel">
	<div class="panel-body">
		<div>
			<h5>Maps</h5>
			<div class="table-wrapper">
				<div class="datatable-wrapper form-inline">
					<div class="table-responsive">
						<table class="table table-striped table-bordered datatable">
							<thead>
					  		</thead>
					  		<tbody>
					  			<tr ng-repeat="details in vm.routingDetails">
					  				<td>{{$index + 1}}</td>
					  				<td ng-repeat="detail in details track by $index" style="white-space:normal">
					  					<div style="word-break:break-all; width: 10vw">{{detail}}</div>
					  				</td>
					  			</tr>
					  		</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
