<div class="panel" id="ruleQueryTabContent">
	<div class="panel-body">
		<div class="filter-hero">
			<div class="filter-label semibold show">Hide Filter</div>
			<div class="filter-area">
				<div class="clearfix">
					<form name="queryForm" role="form" novalidate>
						<div class="pull-left col-md-4 no-lpad">
							<div class="form-group">
								<div class="custom-label semibold">Carrier</div>
								<div class="input-group">
									<input type="text" class="form-control" name="carrier"
										id="carrier" ng-minlength="2" ng-model="vm.paramCarrier"
										uppercase required /> <span ng-click="vm.showCarrierModal()"
										class="input-group-addon"><i class="fa fa-folder"></i>
									</span>
								</div>
								<div ng-show="queryForm.carrier.$invalid">
									<p class="help-block"
										ng-show="queryForm.carrier.$error.required">This field is
										required.</p>
									<p class="help-block"
										ng-show="queryForm.carrier.$error.minlength">Minimum 2
										letters</p>
								</div>
							</div>
							<div class="form-group">
								<div class="custom-label semibold">Rule Number</div>
								<input type="text" class="form-control" name="ruleNo"
									id="ruleNo" ng-model="vm.queryParams.ruleNo" uppercase />
							</div>
							<div class="form-group">
								<div class="custom-label semibold">Rule Type</div>
								<select class="form-control" name="ruleType" id="ruleType"
									ng-model="vm.queryParams.type">
									<option value="">All</option>
									<option value="1">Fare By Rule</option>
									<option value="2">General Rule</option>
									<option value="3">Rule</option>
								</select>
							</div>
						</div>

						<div class="pull-left col-md-4 no-lpad">
							<div class="form-group">
								<div class="custom-label semibold">Tariff Number</div>
								<div class="input-group">
									<input id="ruleTarNo" type="text" name="ruleTarNo"
										class="form-control" ng-model="vm.paramTarNo" uppercase>
									<span ng-click="vm.showTariffModal()" class="input-group-addon"><i
										class="fa fa-folder"></i> </span>
								</div>
							</div>
							<div class="form-group">
								<div class="custom-label semibold">Category</div>
								<select class="form-control" name="catNo" id="catNo"
									ng-model="vm.queryParams.catNo">
									<option value="">All</option>
									<option value="001">01 - Eligibility</option>
									<option value="002">02 - Day/Time</option>
									<option value="003">03 - Season App</option>
									<option value="004">04 - Flight App</option>
									<option value="005">05 - Adv Bkg</option>
									<option value="006">06 - Min Stay</option>
									<option value="007">07 - Max Stay</option>
									<option value="008">08 - Stopovers</option>
									<option value="009">09 - Transfers</option>
									<option value="010">10 - Comb'ty</option>
									<option value="011">11 - Blackouts</option>
									<option value="012">12 - Surcharges</option>
									<option value="013">13 - Accmp Tvl</option>
									<option value="014">14 - Tvl Rest</option>
									<option value="015">15 - Sale Rest</option>
									<option value="016">16 - Penalties</option>
									<option value="017">17 - Hi Int Pt</option>
									<option value="018">18 - Tkt Endorse</option>
									<option value="019">19 - Child Disc</option>
									<option value="020">20 - Tour Disc</option>
									<option value="021">21 - Agents Disc</option>
									<option value="022">22 - Other Disc</option>
									<option value="023">23 - Misc Tags</option>
									<option value="026">26 - Groups</option>
									<option value="027">27 - Tours</option>
									<option value="028">28 - Visit Cntry</option>
									<option value="029">29 - Deposits</option>
									<option value="031">31 - Vol Chgs</option>
									<option value="033">33 - Vol Refunds</option>
									<option value="035">35 - Neg Fares</option>
									<option value="050">50 - Rule App</option>
								</select>
							</div>

						</div>

						<div class="pull-right col-md-4 no-rpad">
							<div class="form-group">
								<div class="custom-label semibold">Additional Options</div>
								<div class="checkbox-wrapper">
									<label> <input type="checkbox" name="includeDisc"
										ng-model="vm.queryParams.includeDisc"> Include
										Discontinued Sequences
									</label>
								</div>
								<br />
								<button type="button" class="btn btn-default small pull-left"
									ng-click="" disabled="disabled">Generate Derived Fares</button>
								<br /> <br />
								<div class="form-group mt1">
									<button type="button" class="btn btn-default small pull-left"
										ng-disabled="queryForm.$invalid"
										ng-click="vm.loadAll(); vm.hideDetail()">Query</button>
									<button type="button" class="btn btn-default small pull-left"
										ng-click="vm.hideDetail(); vm.clearFilter();">Clear</button>
									<button type="reset"
										ng-click="vm.resetFilter(); vm.hideDetail()"
										class="btn btn-default small pull-left">Reset</button>
								</div>

							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

		<div class="table-wrapper">
			<div class="datatable-wrapper form-inline">
				<div class="table-responsive">
					<table class="table table-striped table-bordered datatable">
						<thead>
							<tr>
								<th>No</th>
								<th>CXR</th>
								<th>TAR NO</th>
								<th>RULE NO</th>
								<th>TYPE</th>
								<th>SRC</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="ruleQuery in vm.ruleQueries"
								ng-click="vm.selectedRow = ruleQuery; vm.showDetail(); vm.getRules(ruleQuery); vm.getRules2(ruleQuery);"
								ng-class="{'selected': vm.selectedRow == ruleQuery}">
								<td>{{(vm.queryParams.page * vm.queryParams.size) + $index
									+ 1}}</td>
								<td>{{ruleQuery.cxr}}</td>
								<td>{{ruleQuery.tarNo}}</td>
								<td>{{ruleQuery.ruleNo}}</td>
								<td>{{ruleQuery.tarCd}}</td>
								<td>{{ruleQuery.src}}</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="text-center">
					<jhi-item-count page="vm.page" total="vm.queryCount"
						items-per-page="vm.itemsPerPage"></jhi-item-count>
					<uib-pagination class="pagination-sm" total-items="vm.totalItems"
						items-per-page="vm.itemsPerPage" ng-model="vm.page"
						ng-change="vm.loadAll()"></uib-pagination>
				</div>
			</div>
		</div>

		<div class="table-wrapper">
			<div class="datatable-wrapper form-inline">
				<div class="table-responsive">
					<table class="table table-striped table-bordered datatable"
						id="tblDetail" hidden="hidden">
						<thead>
							<tr>
								<th>NO</th>
								<th>CAT NO</th>
								<th>SEQ NO</th>
								<th>LOC 1 TYPE</th>
								<th>LOC 1</th>
								<th>LOC 2 TYPE</th>
								<th>LOC 2</th>
								<th>FARE BASIS</th>
								<th>FARE TYPE</th>
								<th>SSN</th>
								<th>DOW</th>
								<th>OWRT</th>
								<th>RTG NO</th>
								<th>FTNT</th>
								<th>EFFECTIVE DATE</th>
								<th>DISCONTINUE DATE</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="rq in vm.ruleQueryCategories">
								<td>{{$index + 1}}</td>
								<td>{{rq.catNo}}</td>
								<td>{{rq.sequenceNo}}</td>
								<td>{{rq.geoType1}}</td>
								<td>{{rq.geoLoc1}}</td>
								<td>{{rq.geoType2}}</td>
								<td>{{rq.geoLoc2}}</td>
								<td>{{rq.fareClass}}</td>
								<td>{{rq.fareType}}</td>
								<td>{{rq.seasonType}}</td>
								<td>{{rq.dayOfWeekType}}</td>
								<td>{{rq.owrt}}</td>
								<td>{{rq.routingNo}}</td>
								<td>{{rq.footnote}}</td>
								<td><span ng-if="rq.effectiveDateObject=='indef'"></span><span
									ng-if="rq.effectiveDateObject!='indef'">{{rq.effectiveDateObject
										| date:'medium'}}</span></td>
								<td><span ng-if="rq.discontinueDateObject=='indef'"></span><span
									ng-if="rq.discontinueDateObject!='indef'">{{rq.discontinueDateObject
										| date:'medium'}}</span></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
				<div class="col-md-12 text-center" ng-if="vm.isLoadingRule">
					<div class="spinner yellow">
						<div class="double-bounce1"></div>
						<div class="double-bounce2"></div>
					</div>
				</div>
				<div class="additional-info-wrapper" ng-if="vm.ruleQueryCategories2">
					<div class="clearfix">
						<div class="pull-left ph5px additional-container"
							ng-repeat="cat in vm.ruleQueryCategories2 track by cat.catNo">
							<div class="additional-info"
								ng-click="vm.showCategoryDetail(cat)"
								ng-class="{'lightyellow': cat.type.includes('F'), 'yellow': cat.type.includes('R'), 'blue': cat.type == 'G'}">
								{{cat.catNo}} {{cat.catName}} <span
									ng-if="cat.type != undefined && cat.type != ''">({{cat.type}})</span>
							</div>
						</div>
						<div class="pull-left ph5px additional-container">
							<div class="additional-info action dropdown custom"
								ng-click="vm.actionClicked = !vm.actionClicked">
								Action <i class="fa fa-caret-down pull-right"></i>
								<div class="action-wrapper" ng-if="vm.actionClicked">
									<a ng-click="vm.showLegend()">Show Legend</a> <a
										ng-click="vm.viewFullText()">View Full Text</a>
								</div>
							</div>
						</div>
					</div>
				</div>
	</div>
</div>
