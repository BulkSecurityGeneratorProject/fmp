<style>
.ui-select-dropdown{
	min-width:300px;
}
</style>

<form name="editForm" role="form" novalidate>	
	<div class="panel panel-detail">
		<div class="panel-body">
			<button class="btn btn-default small btn-back back js-back" data-id="0" ui-sref="work-package"><i class="fa fa-arrow-left"></i> Back</button>

			<!-- details -->
			<div class="clearfix">
				<div class="pull-left w50 two-column">
					<div class="box-detail">
						<div class="box-header">
							Details
						</div>
						<div class="box-body">
							<div class="clearfix">
								<div class="pull-left w50 two-column">
									<div class="form-group">
										<label for="field_wpid">WO ID</label>
										<input type="text" name="wpid" id="field_wpid" class="form-control" disabled ng-model="vm.workPackage.wpid"/>
									</div>
									<div class="form-group">
										<label for="field_businessArea">Business Area</label>
										<input 
										ng-class="{'must-fill': editForm.businessArea.$error.required}" 
										    name="businessArea"
											ng-required="vm.isRequired('businessArea')" 
                   								autocomplete="off" type="text" name="businessArea" ng-model="vm.workPackage.businessArea" class="form-control" value="JKT"
            									uib-typeahead="o as o.name for o in vm.businessAreas | filter:{name:$viewValue} | limitTo:5">
									</div>
									<div class="form-group">
										<label for="field_priority">Priority</label>
										<input class="form-control" type="text" ng-model="vm.workPackage.priority" disabled/>
									</div>
									<div class="form-group">
										<label for="field_status">Status</label>
										
										<input 
										ng-class="{'must-fill': editForm.status.$error.required}" 
										    name="status"
											ng-required="vm.isRequired('status')" 
                   								autocomplete="off" type="text" name="businessArea" ng-model="vm.workPackage.status" class="form-control" disabled>
										<!-- <select class="form-control" name="status" ng-model="vm.workPackage.status" id="field_status"  ng-disabled="true">
											 <option value="">Select Status</option>
							                <option value="COMPLETED">Completed</option>
							                <option value="NEW">New</option>
							                <option value="REVIEWING" >Reviewing</option>
							                <option value="READY_TO_RELEASE">ReadyToRelease</option>
							                <option value="PENDING">Pending</option>
							                <option value="DISTRIBUTED">Distributed</option>
										</select> -->
									</div>
									<div class="form-group">
										<label for="field_reviewLevel">Review Level</label>
										<input autocomplete="off" ng-required="vm.isRequired('reviewLevel')"  type="text" name="review_level" ng-model="vm.workPackage.reviewLevel" class="form-control" disabled>
									</div>
									<div class="form-group">
										<label for="field_distributionType">Distribution Type</label>
										<input type="text" ng-required="vm.isRequired('reviewLevel')" name="distributionType" class="form-control" disabled ng-model="vm.workPackage.targetDistribution">
									</div>
								</div>
								<div class="pull-left w50 two-column">
									<div class="form-group">
										<label for="field_name">WO Name</label>
										<input type="text" name="name" class="form-control"name="name" id="field_name" 
											ng-class="{'must-fill': editForm.name.$error.required}" 
                    						ng-model="vm.workPackage.name" 
                   							ng-required="vm.isRequired('workpackageName')" 
                    						ng-disabled="!vm.isEditable('workpackageName')"/>
									</div>
									<div class="form-group">
										<label for="field_createdBy">Created By</label>
										<input type="text" class="form-control" name="createdBy" id="field_createdBy" ng-disabled="true"
                    						ng-model="vm.workPackage.createdBy"/>
									</div>
									<div class="form-group">
										<label for="field_createdDate">Created Date</label>
										<div class="input-group">
											<input id="field_createdDate" type="text" ng-disabled="true" name="createdDate" class="form-control" datetime-picker="{{dateformat}}" ng-model="vm.workPackage.createdDate" is-open="vm.datePickerOpenStatus.createdDate">
											<span class="input-group-addon disabled">
												<i ng-disabled="true" ng-click="vm.openCalendar('createdDate')" class="fa fa-calendar"></i>
											</span>
										</div>
									</div>
									<div class="form-group">
										<label for="field_fillingDate">Filing Date</label>
										<div class="input-group">
											<input type="text" id="field_fillingDate" name="filingDate" class="form-control"
											ng-class="{'must-fill': editForm.filingDate.$error.required}" 
											ng-required="vm.isRequired('filingDate')" 
											datetime-picker="{{dateformat}}" ng-model="vm.workPackage.filingDate" is-open="vm.datePickerOpenStatus.filingDate"  ng-disabled="!vm.isEditable('filingDate')"/>
											<span class="input-group-addon">
												<i class="fa fa-calendar" ng-click="vm.openCalendar('filingDate')" ng-disabled="vm.isFieldDisable('filingDate')"></i>
											</span>
										</div>
									</div>
									<div class="form-group">
										<label for="field_expPax">Exp Pax</label>
										<input type="text" name="expPax" class="form-control"name="name" id="field_expPax"
                    						ng-model="vm.workPackage.expPax" />
									</div>
									<div class="form-group">
										<label for="field_expRev">Exp Rev</label>
										<input type="text" name="expPax" class="form-control"name="name" id="field_expRev"
                    						ng-model="vm.workPackage.expRev" />
									</div>
									<div class="form-group">
										<label for="field_saleDate">Sale Start Date</label>
										<div class="input-group">
											<input id="field_saleDate" type="text" 
												ng-class="{'must-fill': editForm.saleDate.$error.required}" 
                   								ng-required="vm.isRequired('saleDate')" 
                   								name="saleDate" 
                   								ng-disabled="!vm.isEditable('saleDate')" 
                   								datetime-picker="{{dateformat}}" 
                   								ng-model="vm.workPackage.saleDate" 
                   								is-open="vm.datePickerOpenStatus.saleDate" class="form-control">
                   								
											<span class="input-group-addon">
												<i class="fa fa-calendar" ng-click="vm.openCalendar('saleDate')" ng-disabled="vm.isFieldDisable('saleDate')"></i>
											</span>
										</div>
									</div>
									
									<!-- <div class="form-group">
										<label for="field_distributionDate">Distribution Date</label>
										<div class="input-group">
											<input type="text" id="field_distributionDate" name="distributionDate" class="form-control" ng-disabled="vm.isFieldDisable('distributionDate')" datetime-picker="{{dateformat}}" ng-model="vm.workPackage.distributionDate" is-open="vm.datePickerOpenStatus.distributionDate">
											<span class="input-group-addon disabled">
												<i class="fa fa-calendar" ng-click="vm.openCalendar('distributionDate')" ng-disabled="vm.isFieldDisable('distributionDate')"></i>
											</span>
										</div>
									</div>
									<div class="form-group">
										<label for="field_discExpiryDate">Disc/Expiry Date</label>
										<div class="input-group">
											<input type="text" id="field_discExpiryDate" name="discExpiryDate" class="form-control" datetime-picker="{{dateformat}}" ng-model="vm.workPackage.discExpiryDate" is-open="vm.datePickerOpenStatus.discExpiryDate"/>
											<span class="input-group-addon disabled">
												<i class="fa fa-calendar" ng-click="vm.openCalendar('discExpiryDate')" ng-disabled="true"></i>
											</span>
										</div>
									</div> -->
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="pull-left w50 two-column">
					<div class="box-detail box-comment">
						<div class="clearfix tab-body">
							<ul class="clearfix nav-responsive nav nav-tabs">
							    <li ng-class="{active:vm.currentTabComment}"><a ng-click="vm.selectCommentTab('comment')">Comment</a></li>
							    <li ng-class="{active:vm.currentTabInterofficeComment}"><a ng-click="vm.selectCommentTab('interofficeComment')">Inter Office</a></li>
							    <li ng-class="{active:vm.currentTabRatesheetComment}"><a ng-click="vm.selectCommentTab('ratesheetComment')">Rate Sheet Comment</a></li>
							</ul>
							<div class="tab-content">
								<div ng-class="{active:vm.currentTabComment}" class="tab-pane" id="comment">
									<div class="box-header"></div>
									<div class="box-body bbgrey">
										<div class="form-group">
											<label>Comment</label>
											<div text-angular="text-angular" name="comment" ng-model="vm.commentString" ta-paste="vm.stripFormat($html)" ta-toolbar="[['h1','h2','h3'],['bold','italics','underline'],['redo','undo'],['ul','ol'],['justifyLeft','justifyCenter','justifyRight','justifyFull']]"/>
											<!-- <textarea ng-model="vm.commentString" class="form-control" rows="3" placeholder="Enter ..." id="comment-area"></textarea> -->
										</div>
										<div class="clearfix">
											<div class="pull-right">
												<button class="btn btn-default small btn-secondary" ng-click="vm.addComment(vm.commentString)"></i>Send</button>
											</div>
										</div>										
									</div>
						        	 <div class="box-body">
						        		<div class="comment-wrapper">
							    			<div class="comment-list" ng-repeat="comment in vm.workPackage.comment.slice().reverse() track by $index">
										    	<div class="clearfix">
										    		<div class="pull-left comment-detail">{{comment.username}}</div>
										    		<div class="pull-right comment-detail">{{comment.createdTime | date: 'short'}}</div>
										    	</div>
										    	<div class="comment-message" ng-bind-html="comment.comment"/>
										    </div>
							    		</div>
						        	</div>
								</div>
								<div ng-class="{active:vm.currentTabInterofficeComment}" class="tab-pane" id="inter-office">
									<div class="box-header"></div>
									<div class="box-body bbgrey">
										<div class="form-group">
											<label>Inter Office</label>
											<div text-angular="text-angular" name="interOffice" ng-model="vm.ioString" ta-disabled="vm.isFieldDisable('ioComment')" ta-paste="vm.stripFormat($html)" ta-toolbar="[['h1','h2','h3'],['bold','italics','underline'],['redo','undo'],['ul','ol'],['justifyLeft','justifyCenter','justifyRight','justifyFull']]" />
										</div>
										<div class="clearfix">
											<div class="pull-right">
												<button class="btn btn-default small btn-secondary" id="btn-inter-office" ng-click="vm.addInterOffice(vm.ioString)" ng-disabled="!vm.isEditable('ioComment')"></i>Send</button>
											</div>
										</div>										
									</div>
									<div class="box-body">
						        		<div class="comment-wrapper">
							    			<div class="comment-list" ng-repeat="comment in vm.workPackage.interofficeComment.slice().reverse() track by $index">
										    	<div class="clearfix">
										    		<div class="pull-left comment-detail">{{comment.username}}</div>
										    		<div class="pull-right comment-detail">{{comment.createdTime | date: 'short'}}</div>
										    	</div>
										    	<div class="comment-message" ng-bind-html="comment.comment"/>
										    </div>
							    		</div>
						        	</div>
								</div>
								<div ng-class="{active:vm.currentTabRatesheetComment}" class="tab-pane" id="rate-sheet-comment">
									<div class="box-header"></div>
									<div class="box-body bbgrey">
										<div class="form-group">
											<label>Rate Sheet Comment</label>
											<textarea class="form-control" rows="3" id="ratesheetComment" ng-model="vm.workPackage.ratesheetComment" name="ratesheetComment"
						                    ng-disabled="vm.isFieldDisable('ratesheetComment')" 
						                    ng-style="editForm.ratesheetComment{{$index}}.$error.required && vm.errorStyle"
						                    ng-required="vm.checkRequiredField('ratesheetComment')"></textarea>
										</div>								
									</div>	 
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>						
			<!-- end of details -->
		</div>
	</div>

	<div class="panel panel-tabs">
		<div class="panel-body">
			<div class="clearfix mb1">
				<div class="pull-right">
					<div class="button-group dropdown">
						<button class="btn btn-default small">Workflow <i class="fa fa-caret-down"></i></button>
						<ul class="dropdown-menu" role="menu">
						    <li><a ng-click="vm.passUp()" 
					        ng-class="{disabled : editForm.$invalid }" 
					        ng-show="vm.workPackage.reviewLevel != 'HO' && vm.workPackage.reviewLevel != 'DISTRIBUTION' && vm.workPackage.reviewLevel != 'ROUTE_MANAGEMENT'">Pass Up</a></li>
					        <li><a ng-click="vm.passDown()" 
					        ng-show="vm.workPackage.reviewLevel != 'LSO'  && vm.workPackage.reviewLevel != 'ROUTE_MANAGEMENT' && vm.workPackage.reviewLevel != 'DISTRIBUTION'">Pass Down</a></li>
					        <li><a ng-click="vm.passSideway()" 
					        ng-class="{disabled : editForm.$invalid }" 
					        ng-show="vm.workPackage.reviewLevel == 'HO' || vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT'">Pass Sideways</a></li>
					        <li class="divider"></li>
					        <li><a ng-click="vm.approve()" 
					        ng-class="{disabled : editForm.$invalid }" 
					        ng-show="vm.workPackage.reviewLevel == 'HO'">Approve</a></li>
					        <li><a ng-click="vm.referback()" 
					        ng-show="vm.workPackage.reviewLevel == 'DISTRIBUTION'"
					        >Refer Back</a></li>
						</ul>
					</div>
					<div class="button-group dropdown">
						<button class="btn btn-default small">Action <i class="fa fa-caret-down"></i></button>
						<ul class="dropdown-menu" role="menu">
						    <li>
						    	<a href="#">Save and Validate</a>
						    </li>
						</ul>
					</div>	
					<div class="button-group dropdown">
						<button class="btn btn-default small">Sheet <i class="fa fa-caret-down"></i></button>
						<ul class="dropdown-menu" role="menu">
						    <li>
						    	<a ng-click="vm.addSheet()" data-toggle="modal" data-target="#addNewsheet">Add</a>
						    </li>
						    <li>
						    	<a ng-click="vm.removeSheet()">Remove</a>
						    </li>
						    <!-- <li>
						    	<a href="#">Rename</a>
						    </li> -->
						    <li>
						    	<a ng-click="vm.copySheet()">Copy</a>
						    </li>
						</ul>
					</div>												
					<button class="btn btn-default small" ng-click="vm.save()">Save</button>
					<button class="btn btn-default small" ui-sref="work-package">Close</button>
				</div>
			</div>
			
		
			<ng-form name="editFormATPCO" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'ATPCO' && vm.workPackage.type == 'REGULAR'">
				<div class="tab-wrapper" id="distribution-ATPCO">
					<div class="clearfix tab-body">
						<ul class="clearfix nav-responsive nav nav-tabs">
						    <li ng-if="vm.workPackage.specifiedFares" ng-class="{active:vm.currentTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.fareSheet track by $index"><a ng-click="vm.selectTab($index);">GA Fares : {{vm.workPackage.fareSheet[$index].specifiedFaresName}}</a></li>
						    <li ng-if="vm.workPackage.addon" ng-class="{active:vm.currentAddonTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.addonFareSheet track by $index"><a ng-click="vm.selectAddonTab($index);">Addon Fares : {{vm.workPackage.addonFareSheet[$index].addonFaresName}}</a></li>
						    <li ng-if="vm.workPackage.discount" ng-class="{active:vm.currentDiscountTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.discountFareSheet track by $index"><a ng-click="vm.selectDiscountTab($index);">Discount Fares : {{vm.workPackage.discountFareSheet[$index].discountFaresName}}</a></li>
						   
						    <li ng-if="vm.workPackage.filingInstruction" ng-class="{active:vm.currentTabFilingInstruction}"><a ng-click="vm.selectOtherTab('filingInstruction')">Filing Instruction</a></li>
						    <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
						    <li ng-if="vm.workPackage.filingDetails" ng-class="{active:vm.currentTabFilingDetail}"><a ng-click="vm.selectOtherTab('filingDetail')">Filling Details</a></li>
						</ul>
						
						<div class="tab-content">
							<div class="tab-pane" ng-class="{active:vm.currentTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.fareSheet track by $index">
								<div class="pb1 mb1 bbgrey">
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Description</label>
												<input type="text" name="description{{$index}}" class="form-control"
												ng-class="{'must-fill': editForm.editFormATPCO.description{{$index}}.$error.required && fare.action != 'Canceled'}"
								         		ng-model="workPackageSheet.specifiedFaresName" 
								         		ng-required="vm.isRequired('description')"  
								         		ng-disabled="!vm.isEditable('description')">
											</div>
										</div>
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Approval Reference</label>
												<input type="text" name="approvalReference{{$index}}" class="form-control" 
												ng-class="{'must-fill': editForm.editFormATPCO.approvalReference{{$index}}.$error.required}"
									            ng-model="workPackageSheet.approvalReference"
												ng-disabled="!vm.isEditable('approvalReference')"
												ng-required="vm.isRequired('approvalReference')">
												<button ng-click="vm.generateTourCode()" ng-disabled="!vm.isEditable('approvalReference')">Generate Tour Code</button>
											</div>
										</div>
									</div>
									
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Fare Type</label>
												
												<select 
							      				class="form-control" 
							      				name="fareType{{$index}}"
							      				ng-model="workPackageSheet.fareType" 
							      				ng-class="{'must-fill': !editForm.editFormATPCO.fareType{{$index}}.$valid && fare.action != 'Canceled'}"
							      				ng-options="key as value for (key , value) in vm.fareType"
							      				ng-required="vm.checkRequiredField('fareType')"
							      				ng-disabled="vm.isFieldDisable('fareType')"></select>										      				
											</div>
										</div>
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Version</label>
												<select class="form-control">
													<option>Select Version</option>
													<option>Current</option>
												</select>
											</div>
										</div>
									</div>
								</div>
								
								<!-- table details-->
								<div class="table-wrapper">
									<div class="datatable-wrapper form-inline">
										<div class="clearfix">
											<div class="pull-left">
												<div class="clearfix">
													<div class="pull-right datatable-button">
														<div class="button-group dropdown">
															<button class="btn btn-default small btn-secondary">Edit <i class="fa fa-caret-down"></i></button>
															<ul class="dropdown-menu" role="menu">
															    <li>
															    	<a ng-click="vm.clearSelection()">Clear Selection</a>
															    </li>															   
															    <li>
															    	<a ng-click="vm.addFares()">Add Rows</a>
															    </li>
															    <li>
															    	<a href="#">Paste</a>
															    </li>
															    <li>
															    	<a href="#">Paste As Cancel</a>
															    </li>
															</ul>
														</div>													
														<button class="btn btn-default small btn-secondary" ngf-select  ngf-change="vm.importFare($file)">Import</button>
														<button class="btn btn-default small btn-secondary" ng-click="vm.exportFares()">Export</button>
														<!-- <button class="btn btn-default small btn-secondary">Publish</button> -->
														<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.agent()">Agents</button>
														<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.ratesheet()">Rate Sheet</button> 
													</div>
												</div>																						
											</div>
										</div>
										<div class="table-responsive">
											<table class="table table-stripped table-bordered datatable">
												<thead>
													<tr role="row">
														<th class="sorting_asc" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1" aria-sort="ascending">No</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Status</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Carrier</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Action</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar No</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar Cd</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Global</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Origin</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Dest</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Fare Cls</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Bkg Cls</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Cabin</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">OW/RT</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Ftnt</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Rtg No</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Rule No</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Curr</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Base Amt</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Target Aif</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel Start</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel End</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Sale Start</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Sale End</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Comment</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel Complete</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel Complete Indicator</th>
														<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Ratesheet Comment</th>
													</tr>
												</thead>
												<tbody ng-repeat="fare in vm.workPackage.fareSheet[vm.selectedTab].fares track by $index" >
													<tr role="row" class="datatable-row" ng-click="vm.rowTableClick($event, $index, 'fares')">
														<td>{{$index+1}}</td>
														<td>
															<span ng-if="vm.isEditable('status')">
																<select class="form-control inside-table" name="status{{$parent.$index}}{{$index}}" ng-model="fare.status" id="field_status" 
																	ng-class="{'must-fill': !editForm.editFormATPCO.status{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"												         		
								           							ng-disabled="!vm.isEditable('status')"
													             	ng-required="vm.isRequired('status')"
													             	ng-options="key as value for (key , value) in vm.status">
																</select>																				
															</span>
															<span class="inside-table" ng-if="!vm.isEditable( 'status')">
									           					{{fare.status}}
									           				</span>
														</td>
														<td>
															<span ng-if="vm.isEditable( 'carrier')">
									           					<input type="text" class="form-control" name="carrier{{$parent.$index}}{{$index}}" id="field_carrier"
										                    		ng-model="fare.carrier"
										                    		ng-disabled="!vm.isEditable('carrier')"
										                    		ng-class="{'must-fill': ditForm.editFormATPCO.carrier{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
														            ng-required="vm.isRequired('carrier')"/>
									           				</span>
									           				<span ng-if="!vm.isEditable( 'carrier')">
									           					{{fare.carrier}}
									           				</span>
														</td>																
														<td>{{fare.action}}</td>
														<td>
															<ui-select ng-model="fare.tariffNumber" name="tarno{{$parent.$index}}{{$index}}" theme="select2" title="Choose a person"  class="form-control"
															 ng-click="$event.stopPropagation()"
															ng-required="vm.isRequired('tarno') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('tarno')"
															ng-class="{'must-fill': fare.tariffNumber == null && fare.action != 'Canceled'}"	
										                    	>
															    <ui-select-match placeholder="TarNo">{{$select.selected.tarNo == null ? $select.selected.value.tarNo : $select.selected.tarNo}}</ui-select-match>
																 <ui-select-choices style="min-width:300px" repeat="value.value as (key, value) in vm.tariffNumber | filter: { value: { tarNo: $select.search }}">
															      <div ng-bind-html="value.value.tarNo | highlight: $select.search"></div>
															      <small>
															        TarNo : {{value.value.tarNo}}
															        TarCd : {{value.value.tarCd}}
															        Global : {{value.value.global}}
															      </small>
															    </ui-select-choices>
															  </ui-select>
														</td>
														<td>
															<ui-select ng-model="fare.tariffNumber" theme="select2" class="form-control"
															 ng-click="$event.stopPropagation()"
															name="tarcd{{$parent.$index}}{{$index}}"
															ng-required="vm.isRequired('tarcd') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('tarcd')"
															
															ng-class="{'must-fill': fare.tariffNumber == null && fare.action != 'Canceled'}"	
										                    	>
															    <ui-select-match placeholder="TarCd">{{$select.selected.tarCd == null ? $select.selected.value.tarCd : $select.selected.tarCd}}</ui-select-match>
																 <ui-select-choices style="min-width:300px" repeat="value.value as (key, value) in vm.tariffNumber | filter: { value: { tarCd: $select.search }}">
															      <div ng-bind-html="value.value.tarCd | highlight: $select.search"></div>
															      <small>
															        TarNo : {{value.value.tarNo}}
															        TarCd : {{value.value.tarCd}}
															        Global : {{value.value.global}}
															      </small>
															    </ui-select-choices>
															  </ui-select>
															<!-- <span ng-if="vm.isFieldEditable( 'tarcd')">
									           					<input type="text" class="form-control" name="tarcd{{$parent.$index}}{{$index}}" id="field_tarcd" 
									           					ng-disabled="!vm.isEditable('tarcd')"
									           					ng-required="vm.isRequired('tarcd') && fare.action != 'Canceled'"  
									           					ng-class="{'must-fill': editForm.editFormATPCO.tarcd{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
										                    	ng-model="fare.tarcd"/>
									           				</span>
									           				<span ng-if="!vm.isFieldEditable( 'tarcd')">
										           				{{fare.tarcd}}
									           				</span> -->
														</td>
														<td>{{fare.tariffNumber.global}}</td>
														<td>
															<ui-select ng-model="fare.origin" theme="select2" class="form-control"
															 ng-click="$event.stopPropagation()"
															name="origin{{$parent.$index}}{{$index}}"
															ng-required="vm.isRequired('origin') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('origin')"
															
															ng-class="{'must-fill': fare.origin == null && fare.action != 'Canceled'}"	
										                    	>
															    <ui-select-match placeholder="Origin">{{$select.selected.value.cityCode}}</ui-select-match>
																 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
															      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
															      <small>
															        City Code : {{value.value.cityCode}}
															        City Name : {{value.value.cityName}}
															        Country Code : {{value.value.countryCode}}
															        Country Name : {{value.value.countryName}}
															        
															      </small>
															    </ui-select-choices>
															  </ui-select>
															  
															<!-- <span ng-if="vm.isFieldEditable( 'origin')">
								                				<input type="text" class="form-control" name="origin{{$parent.$index}}{{$index}}" id="field_origin" 
								                				ng-disabled="!vm.isEditable('origin')"
								                				 ng-click="$event.stopPropagation()"
								                				ng-required="vm.isRequired('origin') && fare.action != 'Canceled'"  
								                				ng-class="{'must-fill': editForm.editFormATPCO.origin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
										                    	ng-model="fare.origin"/>
								                			
								                			</span>
								                			<span ng-if="!vm.isFieldEditable( 'origin')">
								                			{{fare.origin}}
								                			</span> -->
														</td>
														<td>
														<ui-select ng-model="fare.destination" theme="select2" class="form-control"
															 ng-click="$event.stopPropagation()"
															name="destination{{$parent.$index}}{{$index}}"
															ng-required="vm.isRequired('destination') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('destination')"
															
															ng-class="{'must-fill': fare.destination == null && fare.action != 'Canceled'}"	
										                    	>
															    <ui-select-match placeholder="Destination">{{$select.selected.value.cityCode}}</ui-select-match>
																 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
															      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
															      <small>
															        City Code : {{value.value.cityCode}}
															        City Name : {{value.value.cityName}}
															        Country Code : {{value.value.countryCode}}
															        Country Name : {{value.value.countryName}}
															        
															      </small>
															    </ui-select-choices>
															  </ui-select>
															<!-- <span ng-if="vm.isFieldEditable( 'destination')">
								                				<input type="text" class="form-control" name="destination{{$parent.$index}}{{$index}}" id="field_destination" 
								                				ng-disabled="!vm.isEditable('destination')"
								                				 ng-click="$event.stopPropagation()"
								                				ng-required="vm.isRequired('destination') && fare.action != 'Canceled'"  
								                				ng-class="{'must-fill': editForm.editFormATPCO.destination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
									                    		ng-model="fare.destination"/>
								                			
								                			</span>
								                			<span ng-if="!vm.isEditable( 'destination')">
								                			{{fare.destination}}
								                			</span> -->
														</td>
														<td>
															<input type="text" class="form-control" name="farebasis{{$parent.$index}}{{$index}}" id="field_farebasis"
								                				ng-disabled="!vm.isEditable('farebasis')"
								                				 ng-click="$event.stopPropagation()"
								                				ng-required="vm.isRequired('farebasis') && fare.action != 'Canceled'" 
								                				ng-class="{'must-fill': editForm.editFormATPCO.farebasis{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
									                    		ng-model="fare.fareBasis"/>				
														</td>	
														<td>
															<input type="text" class="form-control" name="bookingClass{{$parent.$index}}{{$index}}" id="field_bookingClass"
								                				ng-click="$event.stopPropagation()"
								                				ng-disabled="!vm.isEditable('bookingClass')"
								                				ng-required="vm.isRequired('bookingClass') && fare.action != 'Canceled'" 
								                				ng-class="{'must-fill': editForm.editFormATPCO.bookingClass{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
									                    		ng-model="fare.bookingClass"/>				
														</td>
														<td>
									           				<select class="form-control" 
													             name="cabin{{$parent.$index}}{{$index}}"
													             ng-required="vm.isRequired('cabin')"
													             ng-click="$event.stopPropagation()"
													             ng-class="{'must-fill': !editForm.editFormATPCO.cabin{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
													             ng-model="fare.cabin" id="field_cabin" 
													             ng-disabled="!vm.isEditable('cabin')"
													             ng-options="key as value for (key , value) in vm.cabin"></select>
									                			
									           			</td>
									           			<td>
									           				<select class="form-control" 
													             name="typeOfJourney{{$parent.$index}}{{$index}}"
													             ng-click="$event.stopPropagation()"
													             ng-required="vm.isRequired('typeOfJourney')"
													             ng-class="{'must-fill': !editForm.editFormATPCO.typeOfJourney{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
													             ng-model="fare.typeOfJourney" id="field_typeOfJourney"
													             ng-disabled="!vm.isEditable('typeOfJourney')"
													             ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
									           			</td>
								               			<td>
								               				<input type="text" class="form-control" name="footnote{{$parent.$index}}{{$index}}" id="field_footnote"
									                				ng-click="$event.stopPropagation()"
														            ng-class="{'must-fill': editForm.editFormATPCO.footnote{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-disabled="!vm.isEditable('footnote')"
														            ng-required="vm.isRequired('footnote')"
										                    		ng-model="fare.footnote"/>
								               			</td>
								               			<td>
								               				<span ng-if="vm.isEditable( 'rtgno')">
									                				<input type="text" class="form-control" name="rtgno{{$parent.$index}}{{$index}}" id="field_bookingClass"
									                				ng-click="$event.stopPropagation()"
									                				ng-disabled="!vm.isEditable('rtgno')"
									                				ng-required="vm.isRequired('rtgno')" 
									                				ng-class="{'must-fill': editForm.editFormATPCO.rtgno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.rtgno"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'rtgno')">
									                				{{fare.rtgno}}
									                			</span>
								               			</td>
								               			<td>
								               				<span ng-if="vm.isEditable( 'ruleno')">
									                				<input type="text" class="form-control" name="ruleno{{$parent.$index}}{{$index}}" id="field_bookingClass"
									                				ng-disabled="!vm.isEditable('ruleno')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('ruleno')" 
									                				ng-class="{'must-fill': editForm.editFormATPCO.ruleno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.ruleno"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'ruleno')">
									                				{{fare.ruleno}}
									                			</span>
								               			</td>
								               			<td>
									               			<ui-select ng-model="fare.currency" theme="select2" class="form-control"
																 ng-click="$event.stopPropagation()"
																name="currency{{$parent.$index}}{{$index}}"
																ng-required="vm.isRequired('currency') && fare.action != 'Canceled'"  
																ng-disabled="!vm.isEditable('currency')"
																
																ng-class="{'must-fill': fare.currency == null && fare.action != 'Canceled'}"	
											                    	>
																    <ui-select-match placeholder="Currency">{{$select.selected.value.currencyCode}}</ui-select-match>
																	 <ui-select-choices style="min-width:300px" repeat="value.value.currencyCode as (key, value) in vm.currencies | filter: { value: { currencyCode: $select.search }}">
																      <div ng-bind-html="value.value.currencyCode | highlight: $select.search"></div>
																      <small>
																        Currency Code : {{value.value.currencyCode}}
																        Currency Name : {{value.value.currencyName}}
																        
																      </small>
																    </ui-select-choices>
																  </ui-select>
								               				<!-- <span ng-if="vm.isEditable( 'currency')">
								                				<input type="text" class="form-control" name="currency{{$parent.$index}}{{$index}}" id="field_currency{{$parent.$index}}{{$index}}"
								                				ng-disabled="!vm.isEditable('currency')"
								                				ng-required="vm.isRequired('currency')" 
								                				ng-class="{'must-fill': editForm.editFormATPCO.currency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
													            ng-model="fare.currency"/>
								                			
								                			</span> -->
								                			<span ng-if="!vm.isEditable( 'currency')">
								                				{{fare.currency}}
								                			</span>
								               			</td>
								               			<td>
								               				<span ng-if="vm.isEditable( 'amount')">
									                				<input type="text" class="form-control" name="amount{{$parent.$index}}{{$index}}" id="field_bookingClass"
									                				ng-disabled="!vm.isEditable('amount')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('amount')" 
									                				ng-class="{'must-fill': editForm.editFormATPCO.amount{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.amount"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'amount')">
									                				{{fare.amount}}
									                			</span>
								               			</td>
								               			<!--  
								               			<td>{{fare.recommendedAmount - fare.amount}}</td>
								               			<td>{{(fare.recommendedAmount - fare.amount) / fare.amount * 100 | number : 2}} %</td>
								               		    <td ng-show="vm.showTFC">{{fare.yqyr}}</td>
									               		<td ng-show="vm.showTFC">{{fare.cat12}}</td>
									               		<td ng-show="vm.showTFC">{{fare.totalTax}}</td>   
									               		<td>{{fare.tfc}}</td>   
									               		<td class="input"  >
									               			<span ng-if="vm.isEditable( 'aif')">
									                				<input type="text" class="form-control" name="aif{{$index}}" id="field_bookingClass"
									                				ng-disabled="!fare.action == 'Canceled'"
									                				ng-required="vm.isRequired('aif')" ng-style="editForm.editFormATPCO.aif{{$index}}.$error.required && fare.action != 'Canceled' && vm.errorStyle"
										                    		ng-change="vm.fareAifChange(fare)"
										                    		ng-model="fare.aif"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'aif')">
									               				{{fare.aif}}
									                			</span>
									               		</td>   
									               		
									               		<td></td>
								               			<td></td>
								               			-->
								               			
								               			<td>
									               			<span ng-if="vm.isEditable( 'aif')">
									                				<input type="text" class="form-control" name="aif{{$parent.$index}}{{$index}}" id="field_bookingClass"
									                				ng-disabled="!vm.isEditable('aif')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('aif')" 
									                				ng-class="{'must-fill': editForm.editFormATPCO.aif{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.aif"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'aif')">
									               				{{fare.aif}}
									                			</span>
									               		</td> 
								               			<td>
								               					<span ng-if="vm.isEditable( 'travelStartDate')">
									                				<input type="text" class="form-control" name="travelStartDate{{$parent.$index}}{{$index}}" id="field_travelStartDate"
									                				ng-disabled="!vm.isEditable('travelStartDate')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('travelStartDate')"
									                				ng-class="{'must-fill': editForm.editFormATPCO.travelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.travelStart"
														            datetime-picker="{{dateformat}}"/>
																	
																</span>
									                			<span ng-if="!vm.isEditable( 'travelStartDate')">
									               				{{fare.travelStart}}
									                			</span>
								               			
								               			</td>
								               			<td>
								               				<span ng-if="vm.isEditable( 'travelEndDate')">
									                				<input type="text" class="form-control" name="travelEndDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
									                				ng-disabled="!vm.isEditable('travelEndDate')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('travelEndDate')"
									                				ng-class="{'must-fill': editForm.editFormATPCO.travelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.travelEnd"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'travelEndDate')">
									               				{{fare.travelEnd}}
									                			</span>
								               			</td>
								               			<td>
								               				<span ng-if="vm.isEditable( 'saleStartDate')">
									                				<input type="text" class="form-control" name="saleStartDate{{$parent.$index}}{{$index}}" id="field_saleStartDate"
									                				ng-disabled="!vm.isEditable('saleStartDate')"	
									                				ng-click="$event.stopPropagation()"								                				
									                				ng-required="vm.isRequired('saleStartDate')"
										                    		ng-class="{'must-fill': editForm.editFormATPCO.saleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.saleStart"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'saleStartDate')">
									               				{{fare.saleStart}}
									                			</span>
								               			</td>
								               			<td>
								               					<span ng-if="vm.isEditable( 'saleEndDate')">
									                				<input type="text" class="form-control" name="saleEndDate{{$parent.$index}}{{$index}}" id="field_saleEndDate"
									                				ng-disabled="!vm.isEditable('saleEndDate')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('saleEndDate')"
										                    		ng-class="{'must-fill': editForm.editFormATPCO.saleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.saleEnd"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'saleEndDate')">
									               				{{fare.saleEnd}}
									                			</span>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="comment{{$parent.$index}}{{$index}}" id="field_comment"
										                    		ng-model="fare.comment"/>
								               			</td>
								               			<td>
								               				<span ng-if="vm.isEditable( 'travelComplete')">
								                				<input type="text" class="form-control" name="travelComplete{{$parent.$index}}{{$index}}" id="field_travelComplete"
								                				ng-disabled="!vm.isEditable('travelComplete')"
								                				ng-click="$event.stopPropagation()"
								                				ng-required="vm.isRequired('travelComplete')"
									                    		ng-class="{'must-fill': editForm.editFormATPCO.travelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            														                    		
								                				ng-model="fare.travelComplete"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'travelComplete')">
									               				{{fare.travelComplete}}
									                			</span>
								               			</td>
								               			<td>
								               				<span ng-if="vm.isEditable( 'travelIndicator')">
									                				<select class="form-control" name="travelIndicator{{$parent.$index}}{{$index}}" id="field_travelIndicator"
									                				ng-disabled="!vm.isEditable('travelIndicator')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('travelIndicator')"
										                    		ng-class="{'must-fill': !editForm.editFormATPCO.travelIndicator{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
										                    		
										                    		ng-options="key as value for (key , value) in vm.travelCompleteIndicator"
													             																		            														                    		
									                				ng-model="fare.travelCompleteIndicator"></select>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'travelIndicator')">
									               				{{fare.travelCompleteIndicator}}
									                			</span>
								               			</td>
								               			<td>
								               				<span ng-if="vm.isEditable( 'ratesheetComment')">
									                				<input type="text" class="form-control" name="ratesheetComment{{$parent.$index}}{{$index}}" id="field_ratesheetComment"
									                				ng-disabled="!vm.isEditable('ratesheetComment')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('ratesheetComment')"
										                    		ng-class="{'must-fill': editForm.editFormATPCO.ratesheetComment{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            														                    		
										                    		ng-model="fare.ratesheetComment"/>
									                			
									                			</span>
									                			<span ng-if="!vm.isEditable( 'ratesheetComment')">
									               				{{fare.ratesheetComment}}
									                			</span>
								               			</td>
													</tr>
													<tr class="datatable-action{{$index}}" ng-show="vm.faresActionButton[$index]">
														<td colspan="18" class="">
															<div class="btn btn-app" ng-click="vm.deleteFaresSelected($index)">
																<i class="fa fa-trash"></i>Delete
															</div>
															<div class="btn btn-app" ng-click="vm.moveUpFare($index)">
																<i class="fa fa-level-up"></i>Move Up
															</div>
															<div class="btn btn-app" ng-click="vm.moveDownFare($index)">
																<i class="fa fa-level-down"></i>Move Down
															</div>	
															<div class="btn btn-app">
																<i class="fa fa-stack-exchange"></i>Derived Fares
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							
							</div>
						
							<div class="tab-pane" ng-class="{active:vm.currentAddonTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.addonFareSheet track by $index">
								<div class="pb1 mb1 bbgrey">
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Description</label>
												
												<textarea class="form-control" 
								         		name="addonFaresName{{$index}}"
								         		ng-model="workPackageSheet.addonFaresName" 
								         		style="min-width: 100%; min-height:100%"
								         		ng-class="{'must-fill': editForm.editFormATPCO.addonFaresName{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
								         		ng-required="vm.isRequired('addonFaresName')"  
								         		ng-disabled="!vm.isEditable('addonFaresName')">
						          				</textarea>
											</div>
										</div>
										<div class="pull-left w50 two-column">
											<div class="form-group">
												
											</div>
										</div>
									</div>
								</div>
								
								
								<!-- table details-->
								<div class="table-wrapper">
									<div class="datatable-wrapper form-inline">
										<div class="clearfix">
											<div class="pull-left">
												<div class="clearfix">
													<div class="pull-right datatable-button">
														<div class="button-group dropdown">
															<button class="btn btn-default small btn-secondary">Edit <i class="fa fa-caret-down"></i></button>
															<ul class="dropdown-menu" role="menu">
															    <li>
															    	<a ng-click="vm.clearSelection()">Clear Selection</a>
															    </li>
															    <li>
															    	<a ng-click="vm.addAddon()">Add Rows</a>
															    </li>
															    <li>
															    	<a href="#">Paste</a>
															    </li>
															    <li>
															    	<a href="#">Paste As Cancel</a>
															    </li>
															</ul>
														</div>													
														<button class="btn btn-default small btn-secondary">Import</button>
														<button class="btn btn-default small btn-secondary">Export</button>
														<button class="btn btn-default small btn-secondary">Publish</button>
														<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent">Agents</button>
														<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalRatesheet">Rate Sheet</button>
													</div>
												</div>																						
											</div>
										</div>
										<div class="table-responsive">
											<table class="table table-stripped table-bordered datatable">
												<thead>
													<tr role="row">																	
														<th>No</th>
								                		<th>Status</th>
									                	<th>Carrier</th>		                	
								                		<th>Action</th>
									                	<th>Tar No</th>
									                	<th>Tar Cd</th>
									                	<th>Global</th>
									                	<th>Origin</th>
									                	<th>Dest</th>
									                	<th>Addon Bucket</th>
									                	<th>OW/RT</th>
									                	<th>Ftnt</th>
									                	<th>Zone</th>
									                	<th>Rtg No</th>
									                	<th>Filing Curr</th>
									                	<th>Base Amt</th>
									                	<th>Amt Diff</th>
									                	<th>% Amt Diff</th>
										                <th>Travel Start</th>
									               		<th>Travel End</th>		               		
									               		<th>Sale Start</th>
									               		<th>Sale End</th>	
									               		<th>Comment</th>	               		
									               		<th>Travel Complete</th>	               		
									               		<th>Travel Complete Indicator</th>		
													</tr>
												</thead>
												<tbody>
													<tr role="row" class="datatable-row" ng-repeat="fare in vm.workPackage.addonFareSheet[vm.selectedTab].fares track by $index">
														<td>{{$index+1}}</td>
														<td>
															<select class="form-control inside-table" name="addonFareStatus{{$index}}" ng-model="fare.status" id="field_status" 
																ng-class="{'must-fill': !editForm.editFormATPCO.addonFareStatus{{$index}}.$valid && fare.action != 'Canceled'}"												         		
							           							ng-disabled="!vm.isEditable('addonFareStatus')"
												             	ng-required="vm.isRequired('addonFareStatus')"
												             	ng-options="key as value for (key , value) in vm.status">
															</select>
															<!-- <span ng-if="vm.isFieldEditable( 'addonFareStatus')">
																<select class="form-control inside-table" name="addonFareStatus{{$index}}" ng-model="fare.status" id="field_status" 
																	ng-class="{'must-fill': !editForm.editFormATPCO.addonFareStatus{{$index}}.$valid && fare.action != 'Canceled'}"												         		
								           							ng-disabled="vm.isFieldDisable('addonFareStatus')"
													             	ng-required="vm.checkRequiredField('addonFareStatus')"
													             	ng-options="key as value for (key , value) in vm.status">
																</select>
																<span class="form-control inside-table" ng-if="!vm.isFieldEditable( 'addonFareStatus')">
										           					{{fare.status}}
										           				</span>
															</span> -->
														</td>
														<td>
															<input type="text" class="form-control" name="addonFareCarrier{{$index}}" id="field_carrier"
										                    		ng-model="fare.carrier"
										                    		ng-disabled="!vm.isEditable('addonFareCarrier')"
										                    		ng-class="{'must-fill': ditForm.editFormATPCO.addonFareCarrier{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
														            ng-required="vm.isRequired('addonFareCarrier')"/>
														</td>																
														<td>{{fare.action}}</td>
														<td>
															<ui-select ng-model="fare.tariffNumber" name="addonFareTarno{{$parent.$index}}{{$index}}" theme="select2" title="Tarif Number"  class="form-control"
															 	ng-click="$event.stopPropagation()"
																ng-required="vm.isRequired('addonFareTarno')"  
																ng-disabled="!vm.isEditable('addonFareTarno')"
																ng-class="{'must-fill': editForm.editFormATPCO.addonFareTarno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
									                    	>
														    <ui-select-match placeholder="TarNo">{{$select.selected.tarNo == null ? $select.selected.value.tarNo : $select.selected.tarNo}}</ui-select-match>
															 <ui-select-choices style="min-width:300px" repeat="value.value as (key, value) in vm.tariffNumber | filter: { value: { tarNo: $select.search }}">
														      <div ng-bind-html="value.value.tarNo | highlight: $select.search"></div>
														      <small>
														        TarNo : {{value.value.tarNo}}
														        TarCd : {{value.value.tarCd}}
														        Global : {{value.value.global}}
														      </small>
														    </ui-select-choices>
														  </ui-select>
														</td>
														<td>
															<ui-select ng-model="fare.tariffNumber" theme="select2" class="form-control"
															 ng-click="$event.stopPropagation()"
															name="addonFareTarcd{{$parent.$index}}{{$index}}"
															ng-required="vm.isRequired('addonFareTarcd') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('addonFareTarcd')"
															
															ng-class="{'must-fill': editForm.editFormATPCO.addonFareTarcd{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
										                    	>
															    <ui-select-match placeholder="TarCd">{{$select.selected.tarCd == null ? $select.selected.value.tarCd : $select.selected.tarCd}}</ui-select-match>
																 <ui-select-choices style="min-width:300px" repeat="value.value as (key, value) in vm.tariffNumber | filter: { value: { tarCd: $select.search }}">
															      <div ng-bind-html="value.value.tarCd | highlight: $select.search"></div>
															      <small>
															        TarNo : {{value.value.tarNo}}
															        TarCd : {{value.value.tarCd}}
															        Global : {{value.value.global}}
															      </small>
															    </ui-select-choices>
															  </ui-select>
														</td>
														<td>{{fare.tariffNumber.global}}</td>
														<td>
															<ui-select ng-model="fare.origin" theme="select2" class="form-control"
															 ng-click="$event.stopPropagation()"
															name="addonFareOrigin{{$parent.$index}}{{$index}}"
															ng-required="vm.isRequired('addonFareOrigin') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('addonFareOrigin')"
															
															ng-class="{'must-fill': editForm.editFormATPCO.addonFareOrigin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
										                    	>
															    <ui-select-match placeholder="Origin">{{$select.selected.value.cityCode}}</ui-select-match>
																 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
															      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
															      <small>
															        City Code : {{value.value.cityCode}}
															        City Name : {{value.value.cityName}}
															        Country Code : {{value.value.countryCode}}
															        Country Name : {{value.value.countryName}}
															        
															      </small>
															    </ui-select-choices>
															  </ui-select>
														</td>
														<td>
															<ui-select ng-model="fare.destination" theme="select2"class="form-control"
															 ng-click="$event.stopPropagation()"
															name="addonFareDestination{{$parent.$index}}{{$index}}"
															ng-required="vm.isRequired('addonFareDestination') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('addonFareDestination')"
															
															ng-class="{'must-fill': editForm.editFormATPCO.addonFareDestination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
										                    	>
															    <ui-select-match placeholder="Destination">{{$select.selected.value.cityCode}}</ui-select-match>
																 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
															      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
															      <small>
															        City Code : {{value.value.cityCode}}
															        City Name : {{value.value.cityName}}
															        Country Code : {{value.value.countryCode}}
															        Country Name : {{value.value.countryName}}
															        
															      </small>
															    </ui-select-choices>
															  </ui-select>
														</td>
														<td>
															<input type="text" class="form-control" ng-model="addonFares.bucket" name="addonFareBucket{$parent.$index}}{{$index}}"
										           				ng-disabled="!vm.isEditable('addonFareBucket')"
													            ng-class="{'must-fill': editForm.editFormATPCO.addonFareBucket{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
													            ng-required="vm.isRequired('addonFareBucket')" />
														</td>
									           			<td>
									           				<select class="form-control" 
													             name="addonFareTypeOfJourney{{$parent.$index}}{{$index}}"
													             ng-required="vm.isRequired('addonFareTypeOfJourney')"
													             ng-class="{'must-fill': !editForm.editFormATPCO.addonFareTypeOfJourney{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
													             ng-model="fare.typeOfJourney" id="field_typeOfJourney"
													             ng-disabled="!vm.isEditable('addonFareTypeOfJourney')"
													             ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
									           			</td>
								               			<td>
								               				<input type="text" class="form-control" name="addonFareFootnote{{$parent.$index}}{{$index}}" id="field_footnote"
														            ng-class="{'must-fill': editForm.editFormATPCO.addonFareFootnote{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-disabled="!vm.isEditable('addonFareFootnote')"
														            ng-required="vm.isRequired('addonFareFootnote')"
										                    		ng-model="fare.footnote"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="addonFareZone{{$parent.$index}}{{$index}}" id="field_footnote"
														            ng-class="{'must-fill': editForm.editFormATPCO.addonFareZone{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-disabled="!vm.isEditable('addonFareZone')"
														            ng-required="vm.isRequired('addonFareZone')"
										                    		ng-model="fare.zone"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="addonFareRtgno{{$parent.$index}}{{$index}}" id="field_bookingClass"
									                				ng-disabled="!vm.isEditable('addonFareRtgno')"
									                				ng-required="vm.isRequired('addonFareRtgno')" 
									                				ng-class="{'must-fill': editForm.editFormATPCO.addonFareRtgno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.rtgno"/>
								               			</td>
								               			<td>
								               				<ui-select ng-model="fare.currency" theme="select2" ng-disabled="vm.disabled" class="form-control"
																 ng-click="$event.stopPropagation()"
																name="addonFareCurrency{{$parent.$index}}{{$index}}"
																ng-required="vm.isRequired('addonFareCurrency') && fare.action != 'Canceled'"  
																ng-disabled="!vm.isEditable('addonFareCurrency')"
																
																ng-class="{'must-fill': editForm.editFormATPCO.addonFareCurrency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
											                    	>
																    <ui-select-match placeholder="Currency">{{$select.selected.value.currencyCode}}</ui-select-match>
																	 <ui-select-choices style="min-width:300px" repeat="value.value.currencyCode as (key, value) in vm.currencies | filter: { value: { currencyCode: $select.search }}">
																      <div ng-bind-html="value.value.currencyCode | highlight: $select.search"></div>
																      <small>
																        Currency Code : {{value.value.currencyCode}}
																        Currency Name : {{value.value.currencyName}}
																        
																      </small>
																    </ui-select-choices>
																  </ui-select>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="addonFareAmount{{$parent.$index}}{{$index}}" id="field_bookingClass"
									                				ng-disabled="!vm.isEditable('addonFareAmount')"
									                				ng-required="vm.isRequired('addonFareAmount')" 
									                				ng-class="{'must-fill': editForm.editFormATPCO.addonFareAmount{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.amount"/>
								               			</td>
								               			<td></td>
								               			<td></td>
									               		
								               			<td>
								               				<input type="text" class="form-control" name="addonFareTravelStartDate{{$parent.$index}}{{$index}}" id="field_travelStartDate"
									                				ng-disabled="!vm.isEditable('addonFareTravelStartDate')"
									                				ng-required="vm.isRequired('addonFareTravelStartDate')"
									                				ng-class="{'must-fill': editForm.editFormATPCO.addonFareTravelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.travelStart"
														            datetime-picker="{{dateformat}}"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="addonFareTravelEndDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
									                				ng-disabled="!vm.isEditable('addonFareTravelEndDate')"
									                				ng-required="vm.isRequired('addonFareTravelEndDate')"
									                				ng-class="{'must-fill': editForm.editFormATPCO.addonFareTravelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.travelEnd"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="addonFareSaleStartDate{{$parent.$index}}{{$index}}" id="field_saleStartDate"
									                				ng-disabled="!vm.isEditable('addonFareSaleStartDate')"									                				
									                				ng-required="vm.isRequired('addonFareSaleStartDate')"
										                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareSaleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.saleStart"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="addonFareSaleEndDate{{$parent.$index}}{{$index}}" id="field_saleEndDate"
									                				ng-disabled="!vm.isEditable('addonFareSaleEndDate')"
									                				ng-required="vm.isRequired('addonFareSaleEndDate')"
										                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareSaleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.saleEnd"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="addonFareComment{{$parent.$index}}{{$index}}" id="field_comment"
										                    		ng-model="fare.comment"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="addonFareTravelComplete{{$parent.$index}}{{$index}}" id="field_travelComplete"
								                				ng-disabled="!vm.isEditable('addonFareTravelComplete')"
								                				ng-required="vm.isRequired('addonFareTravelComplete')"
									                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareTravelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            														                    		
								                				ng-model="fare.travelComplete"/>
								               			</td>
								               			<td>
								               				<select class="form-control" name="addonFareTravelIndicator{{$index}}" id="field_travelIndicator"
									                				ng-disabled="!vm.isEditable('addonFareTravelIndicator')"
									                				ng-required="vm.isRequired('addonFareTravelIndicator')"
										                    		ng-class="{'must-fill': !editForm.editFormATPCO.addonFareTravelIndicator{{$index}}.$valid && fare.action != 'Canceled'}"	
										                    		
										                    		ng-options="key as value for (key , value) in vm.travelCompleteIndicator"
													             																		            														                    		
									                				ng-model="fare.travelCompleteIndicator"></select>
								               			</td>
													</tr>
													<tr class="datatable-action">
														<td colspan="18" class="">
															<div class="btn btn-app">
																<i class="fa fa-level-up"></i>Move Up
															</div>
															<div class="btn btn-app">
																<i class="fa fa-level-down"></i>Move Down
															</div>	
															<div class="btn btn-app">
																<i class="fa fa-stack-exchange"></i>Derived Fares
															</div>
														</td>
													</tr>
													<tr class="datatable-action">
														<td colspan="18" class="">																	
															<div class="btn btn-app">
																<i class="fa fa-level-up"></i>Move Up
															</div>
															<div class="btn btn-app">
																<i class="fa fa-level-down"></i>Move Down
															</div>
															<div class="btn btn-app">
																<i class="fa fa-stack-exchange"></i>Derived Fares
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
										<div class="clearfix">
											<div class="pull-left dataTables_info italic">
												* Field can not be empty.
											</div>
										</div>	
									</div>
								</div>
							
							</div>
																		
							<div class="tab-pane" ng-class="{active:vm.currentTabFilingInstruction}" ng-if="vm.workPackage.filingInstruction">
								
								<div class="tab-pane" ng-class="{active:vm.currentTabFilingInstruction}">
									<div class="action-btn-wrapper">
					      				<div class="col-md-12 text-right no-pad">
					      					<button ng-click="vm.addFiling()" class="btn btn-primary">Add</button>
					      				</div>
					      			</div>
					       			<div class="col-md-12">
					       				<div class="text-center no-data" ng-if="!vm.workPackage.filingInstructionData || vm.workPackage.filingInstructionData.length == 0">No Filing Instruction Available</div>
								
					       				<div ng-repeat="filingInstructionData in vm.workPackage.filingInstructionData track by $index" class="form-repeat">
					       					<button ng-click="vm.removeFiling(filingInstructionData)" class="bordered delete"><span class="glyphicon glyphicon-remove"></span></button>
							       			<label class="user">{{filingInstructionData.username}} <span class="vseparator no-mar"></span> {{filingInstructionData.createdTime | date: 'short'}}</label>
						       				<div class="row">
								        		<div class="col-md-6">							      			
									      			<div class="form-group row">
									      				<label class="col-md-4">Comment</label>
									      				<div class="col-md-8 input-group textarea">
									      					<textarea class="col-md-12" ng-model="filingInstructionData.comment"></textarea>
									      				</div>
									      			</div>
								        		</div>							        		
								      		</div>
								     	</div>
					       			</div>
								</div>
							</div>
							
							<div class="tab-pane" ng-class="{active:vm.currentTabAttachment}" ng-if="vm.workPackage.attachment">
								<div class="action-btn-wrapper">
				     				<div class="col-md-12 text-right no-pad">
				     					<button ng-click="vm.addAttachment()" class="btn btn-primary">Add</button>
				     				</div>
				     			</div>
				     			
				     			<div class="col-md-12">
				     				<div class="text-center no-data" ng-if="!vm.workPackage.attachmentData || vm.workPackage.attachmentData.length == 0">No Attachment Available</div>
								
								
					     			<div ng-repeat="attachment in vm.workPackage.attachmentData.slice().reverse() track by $index" class="form-repeat">
				       					<button ng-click="vm.removeAttachment(attachment)" class="bordered delete"><span class="glyphicon glyphicon-remove"></span></button>
						       			<label class="user">{{attachment.username}} <span class="vseparator no-mar"></span> {{attachment.createdTime | date: 'short'}}</label>
						       			<div class="row">
							        		<div class="col-md-6">
								      			<div class="form-group row">
								      				<label class="col-md-4">Comment</label>
								      				<div class="col-md-8 input-group textarea">
								      					<textarea class="col-md-12" ng-model="attachment.comment"></textarea>
								      				</div>
								      			</div>
							        		</div>
							        		<div class="col-md-6">
							        			<div class="form-group file" ngf-drop ngf-change="vm.setFileAttachment($file, attachment)">
										            <label class="control-label">File Attachment</label>
										            <div>
										                <div ng-if="attachment.file" class="help-block clearfix">
										                    <a class="pull-left" ng-click="vm.openFile(attachment.fileContentType, attachment.file)" data-translate="entity.action.open">open</a><br>
										                    <span class="pull-left">{{attachment.fileContentType}}, {{vm.byteSize(attachment.file)}}</span>
										                    <button type="button" ng-click="attachment.file=null;attachment.fileContentType=null;"
										                            class="btn btn-default btn-xs pull-right delete grey">
										                        <span class="glyphicon glyphicon-remove"></span>
										                    </button>
										                </div>
										                <button type="button" ngf-select class="btn btn-default btn-block"
										                        ngf-change="vm.setFile($file, attachment)">
										                    Add file
										                </button>
										            </div>
										            <input type="hidden" class="form-control" name="file" id="field_file"
										                    ng-model="attachment.file"
										                    />
										            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType"
										                    ng-model="attachment.fileContentType" />
										        </div>
							        		</div>
							      		</div>
							     	</div>
							     </div>
							</div>
							
							<div class="tab-pane" ng-class="{active:vm.currentTabFilingDetail}" ng-if="vm.workPackage.filingDetails">
								<div class="tab-content wp">
						      		<div class="row">
						      			<div class="col-md-6">
						      				<div class="form-group row">
							      				<label class="col-md-4">Work Unit</label>
							      				<div class="col-md-8 no-pad radio">
							      					<label class="col-md-6"><input type="radio" ng-model="vm.workPackage.filingDetail.workUnitType" ng-change="vm.loadAll()" value="existing">Use Existing Work Unit</label>
													<label class="col-md-6"><input type="radio" ng-model="vm.workPackage.filingDetail.workUnitType" ng-change="vm.loadAll()" value="new">Use New Work Unit</label>
							      				</div>
							      			</div>
							      			<div class="form-group row">
							      				<label class="col-md-4">Email Notifications</label>
							      			 	<input type="text" class="col-md-8" ng-model="vm.workPackage.filingDetail.email"/>	
							      			</div>
							      			<div class="form-group row">
							      				<label class="col-md-4">Release Instruction</label>
							      			 	<div class="col-md-8 no-pad select">	
													<select class="col-md-12" name="status" ng-model="vm.workPackage.filingDetail.releaseInstruction" id="field_status">
										                <option value="">Select Release Instruction</option>
										                <option value="Release Batches">Release Work Unit / Batch</option>
										                <option value="Create Batches">Do not Release Work Unit / Batch</option>
										            </select>
												</div>
							      			</div>
						      			</div>
						      			<div class="col-md-6">
						      				<div class="form-group row">
							      				<label class="col-md-4">Work Unit ID</label>
							      			 	<input type="text" class="col-md-8" ng-model="vm.workPackage.filingDetail.workUnitId"/>	
							      			</div>
							      			<div class="form-group row">
							      				<label class="col-md-4">Create Date</label>
							      			 	<input type="text" class="col-md-8" ng-model="vm.workPackage.filingDetail.workUnitId"/>	
							      			</div>
							      			<div class="form-group row">
							      				<label class="col-md-4">Organization</label>
							      			 	<input type="text" class="col-md-8" ng-model="vm.workPackage.filingDetail.workUnitId"/>	
							      			</div>
						      			</div>
							 		</div>
							 		<br/>
							 		<div class="row">
									    <div class="col-md-6">
											<p class="no-mar" style="padding: 13px 0;">Tariffs : </p>
											<table class="jh-table table table-striped">
									          <thead>
									              <tr>
									              		<th>No</th>
									              		<th>TarType</th>               		
									              		<th>TarNo</th>               		
									              		<th>TarCd</th>               		
									              		<th>CXR</th>               		
									              		<th>Release Instruction</th>               		
									              </tr>
									          </thead>
									         	<tbody>
									         		<tr ng-if="!vm.tarif || vm.tarif.length == 0">
									           			<td colspan="6" class="empty">
									           				No Tariff Available
									           			</td>
									           		</tr>
									         		<tr ng-class="{'even': fare.id % 2 == 0, 'odd': fare.id % 2 != 0}" ng-click="vm.applyRule(fare.id)" ng-repeat="tarif in vm.tarif track by $index" >
									      				<td>{{$index+1}}</td>
									      				<td>Fare</td>
									      				<td><span ng-if="">008</span></td>
									      				<td>BUAS</td>
									      				<td>GA</td>
									      				<td>{{vm.filingDetails.releaseInstruction}}</td>
									            		</tr>
									         		</tbody>
									      	</table>
								     	</div>
								     	<div class="col-md-6">
								        	<div class="action-btn-wrapper no-pad">
								        		<div class="col-md-6 no-pad">
								        			<p class="no-mar">Batch & GFS Numbers :</p>
								        		</div>
								        		<div class="col-md-6 no-pad text-right">
								        			<button ng-click="vm.addBatch()" class="btn btn-primary">Add</button>
								        		</div>
								        	</div>
								        	
											<table class="jh-table table table-striped">
									            <thead>
									                <tr>
								                		<th>Batch No</th>
								                		<th>Gfs Ref</th>               		
								                		<th>Gfs Date</th>  
								                		<th>Action</th>     		
									                </tr>
									            </thead>
									           	<tbody>
									           		<tr ng-if="!vm.batch || vm.batch.length == 0">
									           			<td colspan="4" class="empty">
									           				No Batch Available
									           			</td>
									           		</tr>
									           		<tr ng-class="{'even': fare.id % 2 == 0, 'odd': fare.id % 2 != 0}" ng-click="vm.applyRule(fare.id)" ng-repeat="batch in vm.batch track by $index">	
														<td>
															<input class="form-control" type="text" ng-model="vm.batch[$index].no"/>
														</td>	
														<td>
															<input class="form-control" type="text" ng-model="vm.batch[$index].gfsref"/>
														</td>
														<td>
														
																
															<input class="form-control" type="text" ng-model="vm.batch[$index].gfsdate"/>
														</td>	
														<td>
															<button ng-click="vm.removeBatch(batch)">X</button>
														</td>
								               		</tr>
								            		</tbody>
									        	</table>
								        	</div>
										</div>
						      	</div>
							</div>										
						</div>
					</div>
				</div>
			</ng-form>
			
			<ng-form name="editFormDiscount" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'ATPCO' && vm.workPackage.type == 'DISCOUNT'">
				<div class="tab-wrapper">
				    <div class="clearfix tab-body">
					     <ul class="clearfix nav-responsive nav nav-tabs">
					          <li ng-if="vm.workPackage.discount" ng-class="{active:vm.currentDiscountTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.discountFareSheet track by $index">
					            <a ng-click="vm.selectDiscountTab($index);">Discount Fares : {{vm.workPackage.discountFareSheet[$index].discountFaresName}}</a>
					          </li>
					          <li ng-if="vm.workPackage.filingInstruction" ng-class="{active:vm.currentTabFilingInstruction}"><a ng-click="vm.selectOtherTab('filingInstruction')">Filing Instruction</a></li>
					          <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
					          <li ng-class="{active:vm.currentTabFilingDetail}"><a ng-click="vm.selectOtherTab('filingDetail')">Filling Details</a></li>
					      </ul>
				      
				      
				    	<div class="tab-content">
				    	
				    		<div class="tab-pane" ng-class="{active:vm.currentDiscountTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.discountFareSheet track by $index">
					    		  <div class="pb1 mb1 bbgrey">
					    		  
						            <div class="clearfix">
						              <div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Description</label>
						                  <input type="text" name="discountFaresName{{$index}}" class="form-control"
						                  ng-class="{'must-fill': editForm.editFormDiscount.discountFaresName{{$index}}.$error.required}"
						                      ng-model="workPackageSheet.discountFaresName" 
						                      ng-required="vm.isRequired('discountFaresName')"  
						                      ng-disabled="!vm.isEditable('discountFaresName')">
						                </div>
						              </div>
						              <div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Approval Reference</label>
						                  <input type="text" name="discountApprovalReference{{$index}}" class="form-control" 
						                  ng-class="{'must-fill': editForm.editFormDiscount.discountApprovalReference{{$index}}.$error.required}"
						                        ng-model="workPackageSheet.discountApprovalReference"
						                  ng-disabled="!vm.isEditable('discountApprovalReference')"
						                  ng-required="vm.isRequired('discountApprovalReference')">
						                  <button ng-click="vm.generateTourCode()">Generate Tour Code</button>
						                </div>
						              </div>
						            </div>
						            
						            <div class="clearfix">
						              <div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Account Code</label>
						                  <input type="text" name="discountAccountCode{{$index}}" class="form-control" 
						                  ng-class="{'must-fill': editForm.editFormDiscount.discountAccountCode{{$index}}.$error.required}"
						                        ng-model="workPackageSheet.accountCode"
						                  ng-disabled="!vm.isEditable('discountAccountCode')"
						                  ng-required="vm.isRequired('discountAccountCode')">
						                </div>
						              </div>
						              <div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Version</label>
						                  <select class="form-control">
						                    <option>Select Version</option>
						                    <option>Current</option>
						                  </select>
						                </div>
						              </div>																						
						            </div>
						            
						            <div class="clearfix">
						              <div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Fare Type</label>
						                  <select class="form-control" name="discountFareType{{$index}}" ng-model="workPackageSheet.discountFareType" 
						                        ng-class="{'must-fill': !editForm.editFormDiscount.discountFareType{{$index}}.$valid}"
						                        ng-options="key as value for (key , value) in vm.fareType"
						                        ng-required="vm.isRequired('discountFareType')"
						                        ng-disabled="!vm.isEditable('discountFareType')"></select>										      				
						                </div>
						              </div>
						              <div class="pull-left w50 two-column">
						              </div>
						            </div>
						          
						          </div>
        					
        						 <!-- table details-->
						          <div class="table-wrapper">
						            <div class="datatable-wrapper form-inline">
						              <div class="clearfix">
						                <div class="pull-left">
						                  <div class="clearfix">
						                    <div class="pull-right datatable-button">
						                      <div class="button-group dropdown">
						                        <button class="btn btn-default small btn-secondary">Edit <i class="fa fa-caret-down"></i></button>
						                        <ul class="dropdown-menu" role="menu">
						                            <li>
						                              <a  ng-click="vm.clearSelection()">Clear Selection</a>
						                            </li>
						                            <li>
						                              <a ng-click="vm.addDiscountFares()">Add Rows</a>
						                            </li>
						                            <li>
						                              <a href="#">Paste</a>
						                            </li>
						                            <li>
						                              <a href="#">Paste As Cancel</a>
						                            </li>
						                        </ul>
						                      </div>													
						                      <button class="btn btn-default small btn-secondary" ngf-select ngf-change="vm.importFareDiscount($file)">Import</button>
						                      <button class="btn btn-default small btn-secondary" ng-click="vm.exportFaresDiscount()">Export</button>
						                      <button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent">Agents</button>
						                    </div>
						                  </div>
						                </div>
						              </div>
						              <div class="table-responsive">
						                <table class="table table-stripped table-bordered datatable">
						                  <thead>
						                    <tr role="row">
						                     		 <th>No</th>
						                              <th>Status</th>
						                              <th>FBR Tariff Code</th>
						                              <th>Loc 1 Type</th>		                	
						                              <th>Loc 1</th>
						                              <th>Loc 2 Type</th>
						                              <th>Loc 2</th>
						                              <th>Base FareCls</th>
						                              <th>Base Rule No</th>
						                              <th>Base Tariff Code</th>
						                              <th>Calc Type</th>
						                              <th>% of Base Fare</th>
						                              <th>Curr</th>
						                              <th>Specified Amount</th>
						                              <th>PAX Type</th>
						                              <th>Fare Type</th>
						                              <th>Tkt Code</th>
						                              <th>Tkt Des</th>
						                              <th>Base Fare OW/RT</th>
						                              <th>Global</th>
						                              <th>Rtg No</th>		               		
						                              <th>Rtg No Tarno</th>
						                              <th>New FareCls</th>	
						                              <th>New OW/RT</th>	 
						                              <th>New BkgCd</th>	 
						                              <th>Travel Start</th>	   
						                              <th>Travel End</th>	   
						                              <th>Sale Start</th>	   
						                              <th>Sale End</th>	   
						                              <th>Comment</th>	  
						                              <th>Travel Complete</th>	  
						                              <th>Travel Complete Indicator</th>	
						                    </tr>
						                  </thead>
						                  <tbody ng-repeat="fare in vm.workPackage.discountFareSheet[vm.selectedDiscountTab].fares track by $index" >
						                    <tr role="row" class="datatable-row" ng-click="vm.rowTableClick($event, $index, 'discount')">
						                      <td>{{$index+1}}</td>
						                      <td>
						                        <select class="form-control inside-table" name="status{{$parent.$index}}{{$index}}" ng-model="fare.status" id="field_status" 
						                            ng-class="{'must-fill': !editForm.editFormDiscount.status{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"												         		
						                                  ng-disabled="!vm.isEditable('discountStatus')"
						                                  ng-click="$event.stopPropagation()"
						                                  ng-required="vm.isRequired('discountStatus')"
						                                  ng-options="key as value for (key , value) in vm.status">
						                          </select>		
						                      </td>
						                      <td>
						                        <ui-select ng-model="fare.tarcd" theme="select2" class="form-control"
						                            ng-click="$event.stopPropagation()"
						                            name="tarcd{{$parent.$index}}{{$index}}"
						                            ng-required="vm.isRequired('discountTariffCode') && fare.action != 'Canceled'"  
						                            ng-disabled="!vm.isEditable('discountTariffCode')"
						                            ng-class="{'must-fill': editForm.editFormDiscount.tarcd{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}">
						                            <ui-select-match placeholder="TarCd">{{$select.selected.tarCd == null ? $select.selected.value.tarCd : $select.selected.tarCd}}</ui-select-match>
						                            <ui-select-choices style="min-width:300px" repeat="value.value as (key, value) in vm.tariffNumber | filter: { value: { tarCd: $select.search }}">
						                                  <div ng-bind-html="value.value.tarCd | highlight: $select.search"></div>
						                                  <small>
						                                    TarNo : {{value.value.tarNo}}
						                                    TarCd : {{value.value.tarCd}}
						                                    Global : {{value.value.global}}
						                                  </small>
						                              </ui-select-choices>
						                          </ui-select>
						                      </td>																
						                      <td>
						                       	 <select class="form-control" 
						                                   name="discountLoc1Type{{$parent.$index}}{{$index}}"
						                                   ng-click="$event.stopPropagation()"
						                                   ng-required="vm.isRequired('discountLoc1Type')"
						                                   ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc1Type{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
						                                   ng-model="fare.loc1Type" id="field_discountLoc1Type"
						                                   ng-disabled="!vm.isEditable('discountLoc1Type')"
						                                   ng-options="key as value for (key , value) in vm.locationType"></select>
						                      </td>
						                      <td>
						                       		<input type="text" class="form-control" name="discountLoc1{{$parent.$index}}{{$index}}" id="field_origin" 
						                                    ng-disabled="!vm.isEditable('discountLoc1')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountLoc1') && fare.action != 'Canceled'"  
						                                    ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc1{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"		
						                                      ng-model="fare.loc1"/>
						                      </td>
						                      <td>
						                         <select class="form-control" 
						                                   name="discountLoc2Type{{$parent.$index}}{{$index}}"
						                                   ng-required="vm.isRequired('discountLoc1Type')"
						                                   ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc2Type{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
						                                   ng-model="fare.loc2Type" id="field_discountLoc2Type"
						                                   ng-disabled="!vm.isEditable('discountLoc2Type')"
						                                   ng-click="$event.stopPropagation()"
						                                   ng-options="key as value for (key , value) in vm.locationType"></select>
						                      </td>
						                      <td>
						                         <input type="text" class="form-control" name="discountLoc2{{$parent.$index}}{{$index}}" id="field_origin" 
						                                    ng-disabled="!vm.isEditable('discountLoc2')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountLoc2') && fare.action != 'Canceled'"  
						                                    ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc2{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"		
						                                      ng-model="fare.loc2"/>
						                      </td>
						                      <td>
						                         <input type="text" class="form-control" name="discountBaseFareBasis{{$parent.$index}}{{$index}}" id="field_origin" 
						                                    ng-disabled="!vm.isEditable('discountBaseFareBasis')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountBaseFareBasis') && fare.action != 'Canceled'"  
						                                    ng-class="{'must-fill': !editForm.editFormDiscount.discountBaseFareBasis{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"		
						                                      ng-model="fare.baseFareBasis"/>
						                      </td>
						                      <td>
						                        <input type="text" class="form-control" name="discountBaseRuleno{{$parent.$index}}{{$index}}" id="field_origin" 
						                                    ng-disabled="!vm.isEditable('discountBaseRuleno')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountBaseRuleno') && fare.action != 'Canceled'"  
						                                    ng-class="{'must-fill': !editForm.editFormDiscount.discountBaseRuleno{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"		
						                                      ng-model="fare.baseRuleNo"/>
						                      </td>
						                      <td>
						                         <input type="text" class="form-control" name="discountBaseTariffCode{{$parent.$index}}{{$index}}" id="field_farebasis"
						                                    ng-disabled="!vm.isEditable('discountBaseTariffCode')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountBaseTariffCode') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountBaseTariffCode{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.tarcd"/>	
						                      </td>	
						                      <td>
						                         <select class="form-control" 
						                                 name="discountCalcType{{$parent.$index}}{{$index}}"
						                                 ng-required="vm.isRequired('discountCalcType')"
						                                 ng-class="{'must-fill': !editForm.editFormDiscount.discountCalcType{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
						                                 ng-model="fare.calcType" id="discountCalcType"
						                                 ng-click="$event.stopPropagation()"
						                                 ng-disabled="!vm.isEditable('discountCalcType')"
						                                 ng-options="key as value for (key , value) in vm.calculationType"></select>
						                      </td>
						                      <td>
						                           <input type="number" class="form-control" name="discountPercentageOfBaseFare{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountPercentageOfBaseFare')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountPercentageOfBaseFare') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountPercentageOfBaseFare{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.percentBaseFare"/>	
						                            </td>
						                            <td>
						                         		<ui-select ng-model="fare.currency" theme="select2" class="form-control"
								                            ng-click="$event.stopPropagation()"
								                            name="discountFareCurrency{{$parent.$index}}{{$index}}"
								                            ng-required="vm.isRequired('discountFareCurrency') && fare.action != 'Canceled'"  
								                            ng-disabled="!vm.isEditable('discountFareCurrency')"
								                            ng-class="{'must-fill': editForm.editFormDiscount.discountFareCurrency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}">
								                                <ui-select-match placeholder="Currency">{{$select.selected.value.currencyCode}}</ui-select-match>
								                              <ui-select-choices style="min-width:300px" repeat="value.value.currencyCode as (key, value) in vm.currencies | filter: { value: { currencyCode: $select.search }}">
								                                  <div ng-bind-html="value.value.currencyCode | highlight: $select.search"></div>
								                                    <small>
								                                      Currency Code : {{value.value.currencyCode}}
								                                      Currency Name : {{value.value.currencyName}}
								                                    </small>
								                                </ui-select-choices>
								                          </ui-select>
						                            </td>
						                              <td>
						                                <input type="number" class="form-control" name="discountSpecifiedAmount{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountSpecifiedAmount')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.checkRequiredField('discountSpecifiedAmount') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountSpecifiedAmount{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.discountSpecifiedAmount"/>	
						                              </td>
						                              <td>
						                                <input type="number" class="form-control" name="discountPaxType{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountPaxType')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountPaxType') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountPaxType{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.passengerType"/>			
						                              </td>
						                              <td>
						                                <select class="form-control" 
						                                   name="discountFareFareType{{$parent.$index}}{{$index}}"
						                                   ng-required="vm.isRequired('discountFareFareType')"
						                                   ng-class="{'must-fill': !editForm.editFormDiscount.discountFareFareType{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
						                                   ng-model="fare.fareType"
						                                   ng-disabled="!vm.isEditable('discountFareFareType')"
						                                   ng-click="$event.stopPropagation()"
						                                   ng-options="key as value for (key , value) in vm.fareType"></select>
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountTicketCode{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountTicketCode')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountTicketCode') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountTicketCode{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.ticketCode"/>				
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountTicketDesignator{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountTicketDesignator')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountTicketDesignator') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountTicketDesignator{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.ticketDesignator"/>	
						                              </td>
						                              <td>
						                                <select class="form-control" 
						                                 name="discountBaseFareOwRt{{$parent.$index}}{{$index}}"
						                                 ng-required="vm.isRequired('discountBaseFareOwRt')"
						                                 ng-class="{'must-fill': !editForm.editFormDiscount.discountBaseFareOwRt{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
						                                 ng-model="fare.typeOfJourney"
						                                 ng-click="$event.stopPropagation()"
						                                 ng-disabled="!vm.isEditable('discountBaseFareOwRt')"
						                                 ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
						                              </td> 
						                              <td>
						                                <input type="text" class="form-control" name="discountGlobal{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountGlobal')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountGlobal') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountGlobal{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.global"/>		
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountRtgno{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountRtgno')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountRtgno') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountRtgno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.rtgno"/>		
						                              </td>
						                              <td>
						                                 <input type="text" class="form-control" name="discountRtgnoTarno{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountRtgnoTarno')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountRtgnoTarno') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountRtgnoTarno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.rtgnoTarno"/>		
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountNewFarebasis{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountNewFarebasis')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountNewFarebasis') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountNewFarebasis{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.newFareBasis"/>	
						                              </td>
						                              <td>
						                                <select class="form-control" 
						                                 name="discountNewBaseFareOwRt{{$parent.$index}}{{$index}}"
						                                 ng-required="vm.isRequired('discountNewBaseFareOwRt')"
						                                 ng-class="{'must-fill': !editForm.editFormDiscount.discountNewBaseFareOwRt{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
						                                 ng-model="fare.newTypeOfJourney"
						                                 ng-click="$event.stopPropagation()"
						                                 ng-disabled="!vm.isEditable('discountNewBaseFareOwRt')"
						                                 ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountNewBookingCode{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountNewBookingCode')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountNewBookingCode') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountNewBookingCode{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.newBookingCode"/>
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountTravelStartDate{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountTravelStartDate')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountTravelStartDate') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountTravelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.discountTravelStartDate"/>	
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountTravelEndDate{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountTravelEndDate')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountTravelEndDate') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountTravelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.travelEnd"/>	
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountSaleStartDate{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountSaleStartDate')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountSaleStartDate') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountSaleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.saleStart"/>				
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountSaleEndDate{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountSaleEndDate')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountSaleEndDate') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountSaleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.saleEnd"/>						
						                              </td>
						                              <td>
						                                 <input type="text" class="form-control" name="discountComment{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountComment')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountComment') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountComment{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.comment"/>	
						                              </td>
						                              <td>
						                                 <input type="text" class="form-control" name="discountTravelComplete{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountTravelComplete')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountTravelComplete') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountTravelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.travelComplete"/>	
						                              </td>
						                              <td>
						                                <input type="text" class="form-control" name="discountTravelCompleteIndicator{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountTravelCompleteIndicator')"
						                                    ng-click="$event.stopPropagation()"
						                                    ng-required="vm.isRequired('discountTravelCompleteIndicator') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountTravelCompleteIndicator{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.travelCompleteIndicator"/>	
						                              </td>
						                    </tr>
						                    <tr class="datatable-action{{$index}}" ng-show="vm.discountFaresActionButton[$index]">
						                      <td colspan="18" class="">
						                        <div class="btn btn-app">
						                          <i class="fa fa-level-up"></i>Move Up
						                        </div>
						                        <div class="btn btn-app">
						                          <i class="fa fa-level-down"></i>Move Down
						                        </div>	
						                        <div class="btn btn-app">
						                          <i class="fa fa-stack-exchange"></i>Derived Fares
						                        </div>
						                      </td>
						                    </tr>
						                  </tbody>
						                </table>
						              </div>
						            </div>
						          </div>
						        						 
        					</div>
        					
        					<div class="tab-pane" ng-class="{active:vm.currentTabFilingInstruction}" ng-if="vm.workPackage.filingInstruction">
					          <div class="text-center no-data">No Filing Instruction Available</div>
					        </div>
					        
					        <div class="tab-pane" ng-class="{active:vm.currentTabAttachment}" ng-if="vm.workPackage.attachment">
					            
					        </div>
					        
					        <div class="tab-pane" ng-class="{active:vm.currentTabFilingDetail}">
					          <div class="text-center no-data">No Filling Detail Available</div>
					        </div>	
        					
				        </div>
			      	</div>
			      </div>
			</ng-form>
		
			<ng-form name="editFormMarket" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.type == 'REGULAR'">
				<div class="tab-wrapper">
					<ul class="clearfix nav-responsive nav nav-tabs">
					    <li ng-if="vm.workPackage.marketFares" ng-class="{active:vm.currentMarketTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.marketFareSheet track by $index"><a ng-click="vm.selectMarketTab($index);">Market Fares : {{vm.workPackage.marketFareSheet[$index].marketFaresName}}</a></li>
					    <li ng-if="vm.workPackage.marketRules" ng-class="{active:vm.currentTabMarketRules}"><a ng-click="vm.selectOtherTab('marketRules')">Market Rules</a></li>
					    <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane" ng-class="{active:vm.currentMarketTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.marketFareSheet track by $index">
							<div class="pb1 mb1 bbgrey">
								<div class="clearfix">
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Description</label>
											<input type="text" name="marketFareDescription{{$parent.$index}}{{$index}}" class="form-control"
											ng-class="{'must-fill': editForm.editFormMarket.marketFareDescription{{$parent.$index}}{{$index}}.$error.required}"
							         		ng-model="workPackageSheet.marketFaresName" 
							         		ng-required="vm.isRequired('marketFareDescription')"  
							         		ng-disabled="!vm.isEditable('marketFareDescription')">
										</div>
									</div>
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Approval Reference</label>
											<input type="text" name="marketApprovalReference{{$parent.$index}}{{$index}}" class="form-control" 
											ng-class="{'must-fill': editForm.editFormMarket.marketApprovalReference{{$parent.$index}}{{$index}}.$error.required}"
								            ng-model="workPackageSheet.approvalReference"
											ng-disabled="!vm.isEditable('marketApprovalReference')"
											ng-required="vm.isRequired('marketApprovalReference')">
											<button ng-click="vm.generateTourCode()">Generate Tour Code</button>
										</div>
									</div>
								</div>											
								<div class="clearfix">
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Fare Type</label>
											
											<select 
						      				class="form-control" 
						      				name="marketFareType{{$parent.$index}}{{$index}}"
						      				ng-model="workPackageSheet.fareType" 
						      				ng-class="{'must-fill': !editForm.editFormMarket.marketFareType{{$parent.$index}}{{$index}}.$valid}"
						      				ng-options="key as value for (key , value) in vm.fareType"
						      				ng-required="vm.isRequired('marketFareType')"
						      				ng-disabled="!vm.isEditable('marketFareType')"></select>										      				
										</div>
									</div>
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Group Fares</label>
											<input class="form-control" type="checkbox" ng-model="workPackageSheet.groupFares"/>																						      				
										</div>
									</div>
								</div>
								<div class="clearfix">
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Version</label>
											<select class="form-control">
												<option>Select Version</option>
												<option>Current</option>
											</select>
										</div>
									</div>
									<div class="pull-left w50 two-column"></div>
								</div>
							</div>																						
						
							<div class="table-wrapper">
								<div class="datatable-wrapper form-inline">
									<div class="clearfix">
										<div class="pull-left">
											<div class="clearfix">
												<div class="pull-right datatable-button">
													<div class="button-group dropdown">
														<button class="btn btn-default small btn-secondary">Edit <i class="fa fa-caret-down"></i></button>
														<ul class="dropdown-menu" role="menu">
														    <li>
														    	<a ng-click="vm.clearSelection()">Clear Selection</a>
														    </li>
														    <li>
														    	<a ng-click="vm.addMarketFares()">Add Rows</a>
														    </li>
														    <li>
														    	<a href="#">Paste</a>
														    </li>
														    <li>
														    	<a href="#">Paste As Cancel</a>
														    </li>
														</ul>
													</div>													
													<button class="btn btn-default small btn-secondary" ngf-select  ngf-change="vm.importFareMarket($file)">Import</button>
													<button class="btn btn-default small btn-secondary">Export</button>
													<button class="btn btn-default small btn-secondary">Publish</button>
													<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent">Agents</button>
													<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.ratesheet()">Rate Sheet</button>
												</div>
											</div>	
										</div>
									</div>
									<div class="table-responsive">
										<table class="table table-stripped table-bordered datatable">
											<thead>
												<tr>
							                		<th>No</th>
							                		<th>Status</th>
								                	<th>Carrier</th>		                	
								                	<th>Origin</th>
								                	<th>Dest</th>
								                	<th>Fare Cls</th>
								                	<th>Bkg Cls</th>
								                	<th>SSN</th>
								                	<th>Cabin</th>
								                	<th>OW/RT</th>
								                	<th>Rule Id</th>
								                	<th>Curr</th>
								                	<th>Base Amt</th>
								                	<!-- <th>Prev Base Amt</th>
								                	<th>Prev Base Amt Diff</th>
								                	<th>% Prev Base Amt Diff</th> -->
									                <th>Travel Start</th>
								               		<th>Travel End</th>		               		
								               		<th>Sale Start</th>
								               		<th>Sale End</th>	
								               		<th>Comment</th>	               		
								               		<th>Travel Complete</th>	               		
								               		<th>Travel Complete Indicator</th>	               		
								               		<th>RateSheet Comment</th>	        		
								                </tr>
											</thead>
											<tbody ng-repeat="fare in vm.workPackage.marketFareSheet[vm.selectedMarketTab].fares track by $index">
												<tr ng-click="vm.rowTableClick($event, $index, 'market')">
													<td>{{$index+1}}</td>
													<td>
														<select class="form-control inside-table" name="marketFareStatus{{$parent.$index}}{{$index}}" ng-model="fare.status" id="field_status" 
															ng-class="{'must-fill': !editForm.editFormMarket.marketFareStatus{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"												         		
						           							ng-disabled="!vm.isEditable('marketFareStatus')"
											             	ng-required="vm.isRequired('marketFareStatus')"
											             	ng-options="key as value for (key , value) in vm.status">
														</select>	
													</td>
													<td>
														<input type="text" class="form-control" name="marketFareCarrier{{$parent.$index}}{{$index}}" id="field_carrier"
									                    		ng-model="fare.carrier"
									                    		ng-disabled="!vm.isEditable('marketFareCarrier')"
									                    		ng-class="{'must-fill': ditForm.editFormMarket.marketFareCarrier{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
													            ng-required="vm.checkRequiredField('marketFareCarrier')"/>
													</td>
													<td>
														<ui-select ng-model="fare.origin" theme="select2" class="form-control"
															 ng-click="$event.stopPropagation()"
															name="marketFareOrigin{{$parent.$index}}{{$index}}"
															ng-required="vm.isRequired('marketFareOrigin') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('marketFareOrigin')"
															
															ng-class="{'must-fill': editForm.editFormMarket.marketFareOrigin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
									                    	>
														    <ui-select-match placeholder="Origin">{{$select.selected.value.cityCode}}</ui-select-match>
															 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
														      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
														      <small>
														        City Code : {{value.value.cityCode}}
														        City Name : {{value.value.cityName}}
														        Country Code : {{value.value.countryCode}}
														        Country Name : {{value.value.countryName}}
														        
														      </small>
														    </ui-select-choices>
														  </ui-select>
													</td>
													<td>
														<ui-select ng-model="fare.destination" theme="select2" class="form-control"
															 ng-click="$event.stopPropagation()"
															name="marketFareDestination{{$parent.$index}}{{$index}}"
															ng-required="vm.isRequired('marketFareDestination') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('marketFareDestination')"
															
															ng-class="{'must-fill': editForm.editFormMarket.marketFareDestination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
										                    	>
														    <ui-select-match placeholder="Destination">{{$select.selected.value.cityCode}}</ui-select-match>
															 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
														      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
														      <small>
														        City Code : {{value.value.cityCode}}
														        City Name : {{value.value.cityName}}
														        Country Code : {{value.value.countryCode}}
														        Country Name : {{value.value.countryName}}
														        
														      </small>
														    </ui-select-choices>
														  </ui-select>
													</td>
													<td>
														<input type="text" class="form-control" name="marketFareFarebasis{{$parent.$index}}{{$index}}" id="field_farebasis"
							                				ng-disabled="!vm.isEditable('marketFareFarebasis')"
							                				 ng-click="$event.stopPropagation()"
							                				ng-required="vm.isRequired('marketFareFarebasis') && fare.action != 'Canceled'" 
							                				ng-class="{'must-fill': editForm.editFormMarket.marketFareFarebasis{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
								                    		ng-model="fare.fareBasis"/>	
													</td>
													<td>
														<input type="text" class="form-control" name="marketFareBookingClass{{$parent.$index}}{{$index}}" id="field_bookingClass"
							                				ng-disabled="!vm.isEditable('marketFareBookingClass')"
							                				ng-required="vm.isRequired('marketFareBookingClass') && fare.action != 'Canceled'" 
							                				ng-class="{'must-fill': editForm.editFormMarket.marketFareBookingClass{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
								                    		ng-model="fare.bookingClass"/>												                			
							                			
													</td>
													<td>
														<select class="form-control" 
												             name="marketFareSsn{{$parent.$index}}{{$index}}"
												             ng-required="vm.isRequired('marketFareSsn')"
												             ng-click="$event.stopPropagation()"
												             ng-class="{'must-fill': !editForm.editFormMarket.marketFareSsn{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
												             ng-model="fare.ssn" id="field_ssn" 
												             ng-disabled="!vm.isEditable('marketFareSsn')"
												             ng-options="key as value for (key , value) in vm.ssn"></select>	
													</td>
													<td>
														<select class="form-control" 
												             name="marketFareCabin{{$parent.$index}}{{$index}}"
												             ng-required="vm.isRequired('marketFareCabin')"
												             ng-click="$event.stopPropagation()"
												             ng-class="{'must-fill': !editForm.editFormMarket.marketFareCabin{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
												             ng-model="fare.cabin" id="field_cabin" 
												             ng-disabled="!vm.isEditable('marketFareCabin')"
												             ng-options="key as value for (key , value) in vm.cabin"></select>	
													</td>
													<td>
														<select class="form-control" 
												             name="marketFareTypeOfJourney{{$parent.$index}}{{$index}}"
												             ng-required="vm.isRequired('marketFareTypeOfJourney')"
												             ng-class="{'must-fill': !editForm.editFormMarket.marketFareTypeOfJourney{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
												             ng-model="fare.typeOfJourney" id="field_typeOfJourney"
												             ng-disabled="!vm.isEditable('marketFareTypeOfJourney')"
												             ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
													</td>
													<td>
														<input type="text" class="form-control" name="marketFareRuleno{{$parent.$index}}{{$index}}" id="field_bookingClass"
							                				ng-disabled="!vm.isEditable('marketFareRuleno')"
							                				ng-required="vm.isRequired('marketFareRuleno')" 
							                				ng-class="{'must-fill': editForm.editFormMarket.marketFareRuleno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
												            ng-model="fare.ruleno"/>
													</td>
													<td>
														<ui-select ng-model="fare.currency" theme="select2" class="form-control"
													 		ng-click="$event.stopPropagation()"
															name="marketFareCurrency{{$parent.$index}}{{$index}}"
															ng-required="vm.isRequired('marketFareCurrency') && fare.action != 'Canceled'"  
															ng-disabled="!vm.isEditable('marketFareCurrency')"																		
															ng-class="{'must-fill': editForm.editFormMarket.marketFareCurrency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	>
													    <ui-select-match placeholder="Currency">{{$select.selected.value.currencyCode}}</ui-select-match>
														 <ui-select-choices style="min-width:300px" repeat="value.value.currencyCode as (key, value) in vm.currencies | filter: { value: { currencyCode: $select.search }}">
													      <div ng-bind-html="value.value.currencyCode | highlight: $select.search"></div>
													      <small>
													        Currency Code : {{value.value.currencyCode}}
													        Currency Name : {{value.value.currencyName}}
													        
													      </small>
													    </ui-select-choices>
													  </ui-select>
													</td>
													<td>
														<input type="text" class="form-control" name="marketFareBaseAmt{{$parent.$index}}{{$index}}" id="field_bookingClass"
							                				ng-disabled="!vm.isEditable('marketFareBaseAmt')"
							                				ng-required="vm.isRequired('marketFareBaseAmt')" 
							                				ng-class="{'must-fill': editForm.editFormMarket.marketFareBaseAmt{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
												            ng-model="fare.amount"/>
													</td>
													
													<td>
							               				<input type="text" class="form-control" name="marketFareTravelStartDate{{$parent.$index}}{{$index}}" id="field_travelStartDate"
								                				ng-disabled="!vm.isEditable('marketFareTravelStartDate')"
								                				ng-click="$event.stopPropagation()"
								                				ng-required="vm.isRequired('marketFareTravelStartDate')"
								                				ng-class="{'must-fill': editForm.editFormMarket.marketFareTravelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
													            ng-model="fare.travelStart"
													            datetime-picker="{{dateformat}}"/>
								               		</td>
								               			<td>
								               					<input type="text" class="form-control" name="marketFareTravelEndDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
									                				ng-disabled="!vm.isEditable('marketFareTravelEndDate')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('marketFareTravelEndDate')"
									                				ng-class="{'must-fill': editForm.editFormMarket.marketFareTravelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.travelEnd"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="marketFareSaleStartDate{{$parent.$index}}{{$index}}" id="field_saleStartDate"
									                				ng-disabled="!vm.isEditable('marketFareSaleStartDate')"	
									                				ng-click="$event.stopPropagation()"								                				
									                				ng-required="vm.isRequired('marketFareSaleStartDate')"
										                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareSaleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.saleStart"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="marketFareSaleEndDate{{$parent.$index}}{{$index}}" id="field_saleEndDate"
									                				ng-disabled="!vm.isEditable('marketFareSaleEndDate')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('marketFareSaleEndDate')"
										                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareSaleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.saleEnd"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="marketFareComment{{$parent.$index}}{{$index}}" id="field_comment"
										                    		ng-model="fare.comment"/>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="marketFareTravelComplete{{$parent.$index}}{{$index}}" id="field_travelComplete"
								                				ng-disabled="!vm.isEditable('marketFareTravelComplete')"
								                				ng-click="$event.stopPropagation()"
								                				ng-required="vm.isRequired('marketFareTravelComplete')"
									                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareTravelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            														                    		
								                				ng-model="fare.travelComplete"/>
								               			</td>
								               			<td>
								               				<select class="form-control" name="marketFareTravelIndicator{{$parent.$index}}{{$index}}" id="field_travelIndicator"
									                				ng-disabled="!vm.isEditable('marketFareTravelIndicator')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('marketFareTravelIndicator')"
										                    		ng-class="{'must-fill': !editForm.editFormMarket.marketFareTravelIndicator{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"											                    		
										                    		ng-options="key as value for (key , value) in vm.travelCompleteIndicator"													             																		            														                    		
									                				ng-model="fare.travelCompleteIndicator"></select>
								               			</td>
								               			<td>
								               				<input type="text" class="form-control" name="marketFareRatesheetComment{{$parent.$index}}{{$index}}" id="field_ratesheetComment"
									                				ng-disabled="!vm.isEditable('marketFareRatesheetComment')"
									                				ng-click="$event.stopPropagation()"
									                				ng-required="vm.isRequired('marketFareRatesheetComment')"
										                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareRatesheetComment{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            														                    		
										                    		ng-model="fare.ratesheetComment"/>
								               			</td>
													
												</tr>
												<tr class="datatable-action{{$index}}" ng-show="vm.marketFaresActionButton[$index]">
													<td colspan="18" class="">
														<div class="btn btn-app">
															<i class="fa fa-level-up"></i>Move Up
														</div>
														<div class="btn btn-app">
															<i class="fa fa-level-down"></i>Move Down
														</div>	
														<div class="btn btn-app">
															<i class="fa fa-stack-exchange"></i>Derived Fares
														</div>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>	
						</div>
						
						<div class="tab-pane" ng-class="{active:vm.currentTabMarketRules}">
							<div class="action-btn-wrapper">
			       				<div class="col-md-12 text-right no-pad">
			       					<button ng-click="vm.addMarketRules()" class="btn btn-primary">Add</button>
			       				</div>
			       			</div>
			       			
			       			<label class="full-ib md-bot-mar text-center empty" ng-if="!vm.workPackage.marketRulesData || vm.workPackage.marketRulesData.length == 0">
		       					No Market Rules Available
		       				</label>
							<div ng-repeat="marketRules in vm.workPackage.marketRulesData track by $index" class="form-repeat">
		       					<button ng-click="vm.removeMarketRules(marketRules)" class="bordered delete"><span class="glyphicon glyphicon-remove"></span></button>
			       				<label class="user">admin <span class="vseparator no-mar"></span> 12JAN18 09:15:16</label>
					        	<div class="row">
					        		<div class="col-md-6">
						      			<div class="form-group row">
						      				<label class="col-md-4" >Status</label>
						      				<div class="col-md-8 no-pad select">
						      					<select class="col-md-12" name="qaStatus" ng-model="marketRules.status" id="field_qaStatus">
									                <option value="">Select Status</option>
									                <option value="PENDING" >Pending</option>
									                <option value="APPROVED">Approve</option>
									                <option value="REJECTED">Reject</option>
									            </select>	
						      				</div>
						      			</div>
						      			<div class="form-group row" ng-init="marketRules.cxr = 'GA'">
						      				<label class="col-md-4" >CXR</label>
								            <input type="text" class="col-md-8" ng-model="marketRules.cxr" disabled/>
						      			</div>
						      			<div class="form-group row">
						      				<label class="col-md-4">Market Rule Id</label>
							             	<input type="text" class="col-md-8" ng-model="marketRules.ruleid"/>
						      			</div>
						      			<div class="form-group row">
						      				<label class="col-md-4">Comment</label>
						      				<div class="col-md-8 input-group textarea">
						      					<textarea class="col-md-12" ng-model="marketRules.comment"></textarea>
						      				</div>
						      			</div>
					        		</div>
					        		<div class="col-md-6">
					        			<div class="form-group row file" ngf-drop ngf-change="vm.setFile($file, marketRules)">
								            <label class="control-label">File Attachment</label>
								            <div>
								                <div ng-if="marketRules.file" class="help-block clearfix">
								                    <a class="pull-left" ng-click="vm.openFile(marketRules.fileContentType, marketRules.file)" data-translate="entity.action.open">open</a><br>
								                    <span class="pull-left">{{marketRules.fileContentType}}, {{vm.byteSize(marketRules.file)}}</span>
								                    <button type="button" ng-click="marketRules.file=null;marketRules.fileContentType=null;"
								                            class="btn btn-default btn-xs pull-right delete grey">
								                        <span class="glyphicon glyphicon-remove"></span>
								                    </button>
								                </div>
								                <div class="action-btn-wrapper no-pad">
								                	<button type="button" ngf-select class="btn btn-primary btn-block"
									                        ngf-change="vm.setFile($file, marketRules)">
									                    Add file
									                </button>
								                </div>
								            </div>
								            <input type="hidden" class="form-control" name="file" id="field_file" ng-model="marketRules.file"/>
								            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType" ng-model="marketRules.fileContentType"/>
								        </div>
					        		</div>
					      		</div>
							</div>
		       			</div>
						
						<div class="tab-pane" ng-class="{active:vm.currentTabAttachment}">
							<div class="action-btn-wrapper">
			     				<div class="col-md-12 text-right no-pad">
			     					<button ng-click="vm.addAttachment()" class="btn btn-primary">Add</button>
			     				</div>
			     			</div>
			     			
							<label class="full-ib md-bot-mar text-center empty" ng-if="!vm.workPackage.attachmentData || vm.workPackage.attachmentData.length == 0">
		       					No Attachment Available
		       				</label>
		       				<div ng-repeat="attachment in vm.workPackage.attachmentData track by $index" class="form-repeat">
		       					<button ng-click="vm.removeAttachment(attachment)" class="bordered delete"><span class="glyphicon glyphicon-remove"></span></button>
				       			<label class="user">admin <span class="vseparator no-mar"></span> 12JAN18 09:15:16</label>
				       			<div class="row">
					        		<div class="col-md-6">
						      			<div class="form-group row">
						      				<label class="col-md-4">Comment</label>
						      				<div class="col-md-8 input-group textarea">
						      					<textarea class="col-md-12" ng-model="attachment.comment"></textarea>
						      				</div>
						      			</div>
					        		</div>
					        		<div class="col-md-6">
					        			<div class="form-group file" ngf-drop ngf-change="vm.setFileAttachment($file, attachment)">
								            <label class="control-label">File Attachment</label>
								            <div>
								                <div ng-if="attachment.file" class="help-block clearfix">
								                    <a class="pull-left" ng-click="vm.openFile(attachment.fileContentType, attachment.file)" data-translate="entity.action.open">open</a><br>
								                    <span class="pull-left">{{attachment.fileContentType}}, {{vm.byteSize(attachment.file)}}</span>
								                    <button type="button" ng-click="attachment.file=null;attachment.fileContentType=null;"
								                            class="btn btn-default btn-xs pull-right delete grey">
								                        <span class="glyphicon glyphicon-remove"></span>
								                    </button>
								                </div>
								                <button type="button" ngf-select class="btn btn-default btn-block"
								                        ngf-change="vm.setFile($file, attachment)">
								                    Add file
								                </button>
								            </div>
								            <input type="hidden" class="form-control" name="file" id="field_file"
								                    ng-model="attachment.file"
								                    />
								            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType"
								                    ng-model="attachment.fileContentType" />
								        </div>
					        		</div>
					      		</div>
					     	</div>
						</div>
					</div>
				</div>
			</ng-form>

			<ng-form name="editFormWaiver" role="form" novalidate ng-if="vm.workPackage.type == 'WAIVER'">
				<div class="tab-wrapper">
					<ul class="clearfix nav-responsive nav nav-tabs">
					    <li ng-if="vm.workPackage.waiverFares" ng-class="{active:vm.currentWaiverTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.waiverFareSheet track by $index"><a ng-click="vm.selectWaiverTab($index);">Waiver Fares : {{vm.workPackage.waiverFareSheet[$index].waiverFaresName}}</a></li>
					    <li ng-if="vm.workPackage.waiverRules" ng-class="{active:vm.currentTabWaiverRules}"><a ng-click="vm.selectOtherTab('waiverRules')">Waiver Rules</a></li>
					    <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane" ng-class="{active:vm.currentWaiverTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.waiverFareSheet track by $index">
							<div class="pb1 mb1 bbgrey">
								<div class="clearfix">
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Description</label>
											<input type="text" name="waiverFareDescription{{$parent.$index}}{{$index}}" class="form-control"
											ng-model="workPackageSheet.waiverFaresName" >
										</div>
									</div>
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Approval Reference</label>
											<input type="text" name="waiverApprovalReference{{$parent.$index}}{{$index}}" class="form-control" 
											 ng-model="workPackageSheet.waiverApprovalReference">
											 <button ng-click="vm.generateTourCode()">Generate Tour Code</button>
										</div>
									</div>
								</div>											
								<div class="clearfix">
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Fare Type</label>
											
											<select 
						      				class="form-control" 
						      				name="waiverFareType{{$parent.$index}}{{$index}}"
						      				ng-model="workPackageSheet.waiverFareType" 
						      				ng-options="key as value for (key , value) in vm.fareType"></select>										      				
										</div>
									</div>
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Version</label>
											<select class="form-control">
												<option>Select Version</option>
												<option>Current</option>
											</select>
										</div>
									</div>
								</div>
								<div class="clearfix">
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Agent Name</label>
											<input type="text" class="form-control" ng-model="workPackageSheet.waiverAgentName"/>
										</div>
									</div>
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>IATA No</label>
											<input type="text" class="form-control"  ng-model="workPackageSheet.waiverIataNo"/>
										</div>
									</div>
								</div>
								<div class="clearfix">
									<div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Approval Date</label>
											<input type="text" class="form-control" ng-model="workPackageSheet.waiverApprovalDate"/>
										</div>
									</div>
								</div>
							</div>																						
						
							<div class="table-wrapper">
								<div class="datatable-wrapper form-inline">
									<div class="clearfix">
										<div class="pull-left">
											<div class="clearfix">
												<div class="pull-right datatable-button">
													<div class="button-group dropdown">
														<button class="btn btn-default small btn-secondary">Edit <i class="fa fa-caret-down"></i></button>
														<ul class="dropdown-menu" role="menu">
														    <li>
														    	<a href="#">Clear Selection</a>
														    </li>
														    <li>
														    	<a href="#">Fill Down</a>
														    </li>
														    <li>
														    	<a href="#">Search/Replace</a>
														    </li>
														    <li>
														    	<a ng-click="vm.addWaiverFares()">Add Rows</a>
														    </li>
														    <li>
														    	<a href="#">Delete Selected Rows</a>
														    </li>
														    <li>
														    	<a href="#">Duplicate Selected Rows</a>
														    </li>
														    <li>
														    	<a href="#">Copy Selected Rows</a>
														    </li>
														    <li>
														    	<a href="#">Paste</a>
														    </li>
														    <li>
														    	<a href="#">Paste As Cancel</a>
														    </li>
														</ul>
													</div>													
													<button class="btn btn-default small btn-secondary">Import</button>
													<button class="btn btn-default small btn-secondary">Export</button>
													<button class="btn btn-default small btn-secondary">Publish</button>
													<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent">Agents</button>
													<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalRatesheet">Rate Sheet</button>
												</div>
											</div>	
										</div>
									</div>
									<div class="table-responsive">
										<table class="table table-stripped table-bordered datatable">
											<thead>
												<tr>
							                		<th>No</th>
							                		<th>Type</th>
								                	<th>Full/Partial</th>		                	
								                	<th>PNR</th>
								                	<th>Tkt From</th>
								                	<th>Tkt To</th>
								                	<th>Ori</th>
								                	<th>Dest</th>
								                	<th>Original Itinerary</th>
								                	<th>New Itinerary</th>
								                	<th>Original Basic Fare</th>
								                	<th>New Basic Fare</th>
								                	<th>Approved Fares</th>
								                	
									                <th>Fare Lost</th>
								               		<th>Calculated PN</th>		               		
								               		<th>Original PN</th>
								               		<th>Approved PN</th>	
								               		<th>Penalty Lost %</th>	               		
								               		<th>Penalty Lost Amount</th>	               		
								               		<th>Currency</th>	               		
								               		<th>Total Pax</th>	        	
								               		<th>Total Lost</th>	 
								               		<th>Approver</th>
								               		<th>Remark</th>	        		        	       		
								                </tr>
											</thead>
											<tbody ng-repeat="fare in vm.workPackage.waiverFareSheet[vm.selectedWaiverTab].fares track by $index">
												<tr ng-click="vm.rowTableClick($event, $index, 'waiver')">
													<td>{{$index+1}}</td>
													<td>
														<select class="form-control" ng-model="fare.waiverType">
															<option>SALES</option>
															<option>FUND</option>
														</select>
													</td>
													<td>
														<select class="form-control" ng-model="fare.waiverFullPartial">
															<option>FULL</option>
															<option>PARTIAL</option>
														</select>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverPnr"/>
													</td>
													<td>
														<input type="text" class="form-control"  ng-model="fare.waiverTktFrom"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverTktTo"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverOri"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverDest"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverOriginalItinerary"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverNewItinerary"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverOriginalBasicFare"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverNewBasicFare"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverApprovedFare"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverFareLost"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverCalculatedPn"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverOriginalPn"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverApprovedPn"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverPenaltyLostPercent"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverPenaltyLostAmount"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverCurrency"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverTotalPax"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverTotalLost"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverApprover"/>
													</td>
													<td>
														<input type="text" class="form-control" ng-model="fare.waiverRemark"/>
													</td>
												</tr>
												<tr class="datatable-action{{$index}}" ng-show="vm.waiverFaresActionButton[$index]">
													<td colspan="18" class="">
														<div class="btn btn-app">
															<i class="fa fa-level-up"></i>Move Up
														</div>
														<div class="btn btn-app">
															<i class="fa fa-level-down"></i>Move Down
														</div>	
														<div class="btn btn-app">
															<i class="fa fa-stack-exchange"></i>Derived Fares
														</div>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>	
						</div>
						
						<div class="tab-pane" ng-class="{active:vm.currentTabWaiverRules}">
							<div class="action-btn-wrapper">
			       				<div class="col-md-12 text-right no-pad">
			       					<button ng-click="vm.addWaiverRules()" class="btn btn-primary">Add</button>
			       				</div>
			       			</div>
			       			
			       			<label class="full-ib md-bot-mar text-center empty" ng-if="!vm.workPackage.waiverRulesData || vm.workPackage.waiverRulesData.length == 0">
		       					No Waiver Rules Available
		       				</label>
							<div ng-repeat="waiverRules in vm.workPackage.waiverRulesData track by $index" class="form-repeat">
		       					<button ng-click="vm.removeWaiverRules(waiverRules)" class="bordered delete"><span class="glyphicon glyphicon-remove"></span></button>
			       				<label class="user">admin <span class="vseparator no-mar"></span> 12JAN18 09:15:16</label>
					        	<div class="row">
					        		<div class="col-md-6">
						      			<div class="form-group row">
						      				<label class="col-md-4" >Status</label>
						      				<div class="col-md-8 no-pad select">
						      					<select class="col-md-12" name="qaStatus" ng-model="waiverRules.status" id="field_qaStatus">
									                <option value="">Select Status</option>
									                <option value="PENDING" >Pending</option>
									                <option value="APPROVED">Approve</option>
									                <option value="REJECTED">Reject</option>
									            </select>	
						      				</div>
						      			</div>
						      			<div class="form-group row" ng-init="waiverRules.cxr = 'GA'">
						      				<label class="col-md-4" >CXR</label>
								            <input type="text" class="col-md-8" ng-model="waiverRules.cxr" disabled/>
						      			</div>
						      			<div class="form-group row">
						      				<label class="col-md-4">Market Rule Id</label>
							             	<input type="text" class="col-md-8" ng-model="waiverRules.ruleid"/>
						      			</div>
						      			<div class="form-group row">
						      				<label class="col-md-4">Comment</label>
						      				<div class="col-md-8 input-group textarea">
						      					<textarea class="col-md-12" ng-model="waiverRules.comment"></textarea>
						      				</div>
						      			</div>
					        		</div>
					        		<div class="col-md-6">
					        			<div class="form-group row file" ngf-drop ngf-change="vm.setFile($file, waiverRules)">
								            <label class="control-label">File Attachment</label>
								            <div>
								                <div ng-if="waiverRules.file" class="help-block clearfix">
								                    <a class="pull-left" ng-click="vm.openFile(waiverRules.fileContentType, waiverRules.file)" data-translate="entity.action.open">open</a><br>
								                    <span class="pull-left">{{waiverRules.fileContentType}}, {{vm.byteSize(waiverRules.file)}}</span>
								                    <button type="button" ng-click="waiverRules.file=null;waiverRules.fileContentType=null;"
								                            class="btn btn-default btn-xs pull-right delete grey">
								                        <span class="glyphicon glyphicon-remove"></span>
								                    </button>
								                </div>
								                <div class="action-btn-wrapper no-pad">
								                	<button type="button" ngf-select class="btn btn-primary btn-block"
									                        ngf-change="vm.setFile($file, waiverRules)">
									                    Add file
									                </button>
								                </div>
								            </div>
								            <input type="hidden" class="form-control" name="file" id="field_file" ng-model="waiverRules.file"/>
								            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType" ng-model="waiverRules.fileContentType"/>
								        </div>
					        		</div>
					      		</div>
							</div>
		       			</div>
						
						<div class="tab-pane" ng-class="{active:vm.currentTabAttachment}">
							<div class="action-btn-wrapper">
			     				<div class="col-md-12 text-right no-pad">
			     					<button ng-click="vm.addAttachment()" class="btn btn-primary">Add</button>
			     				</div>
			     			</div>
			     			
							<label class="full-ib md-bot-mar text-center empty" ng-if="!vm.workPackage.attachmentData || vm.workPackage.attachmentData.length == 0">
		       					No Attachment Available
		       				</label>
		       				<div ng-repeat="attachment in vm.workPackage.attachmentData track by $index" class="form-repeat">
		       					<button ng-click="vm.removeAttachment(attachment)" class="bordered delete"><span class="glyphicon glyphicon-remove"></span></button>
				       			<label class="user">admin <span class="vseparator no-mar"></span> 12JAN18 09:15:16</label>
				       			<div class="row">
					        		<div class="col-md-6">
						      			<div class="form-group row">
						      				<label class="col-md-4">Comment</label>
						      				<div class="col-md-8 input-group textarea">
						      					<textarea class="col-md-12" ng-model="attachment.comment"></textarea>
						      				</div>
						      			</div>
					        		</div>
					        		<div class="col-md-6">
					        			<div class="form-group file" ngf-drop ngf-change="vm.setFileAttachment($file, attachment)">
								            <label class="control-label">File Attachment</label>
								            <div>
								                <div ng-if="attachment.file" class="help-block clearfix">
								                    <a class="pull-left" ng-click="vm.openFile(attachment.fileContentType, attachment.file)" data-translate="entity.action.open">open</a><br>
								                    <span class="pull-left">{{attachment.fileContentType}}, {{vm.byteSize(attachment.file)}}</span>
								                    <button type="button" ng-click="attachment.file=null;attachment.fileContentType=null;"
								                            class="btn btn-default btn-xs pull-right delete grey">
								                        <span class="glyphicon glyphicon-remove"></span>
								                    </button>
								                </div>
								                <button type="button" ngf-select class="btn btn-default btn-block"
								                        ngf-change="vm.setFile($file, attachment)">
								                    Add file
								                </button>
								            </div>
								            <input type="hidden" class="form-control" name="file" id="field_file"
								                    ng-model="attachment.file"
								                    />
								            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType"
								                    ng-model="attachment.fileContentType" />
								        </div>
					        		</div>
					      		</div>
					     	</div>
						</div>
					</div>
				</div>
			</ng-form>


		</div>
	</div>
</form>