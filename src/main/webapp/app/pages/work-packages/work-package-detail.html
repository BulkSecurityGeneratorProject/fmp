<style>
.ui-select-dropdown{
	min-width:30px;
}
.highlighted{
	background-color:rgba(222, 255, 94, .7) !important;
}
</style>

<form name="editForm" role="form" novalidate>	
	<div class="panel panel-detail">
		<div class="panel-body">
			<button class="btn btn-default small btn-back back js-back" data-id="0" ng-click="vm.close()"><i class="fa fa-arrow-left"></i>Close</button>

			<!-- details -->
			<div class="clearfix">
				<div class="pull-left w50 two-column">
					<div class="box-detail">
						<div class="box-header">
							Details
						</div>
						<div class="box-body" 
						ng-class="{'poiv-none' : vm.disabledField(vm.workPackage)||(vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.reviewLevel == 'LSO' && vm.workPackage.status=='DISTRIBUTED') || (vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') || vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)} " >
							<div class="clearfix">
								<div class="pull-left w50 two-column">
									<div class="form-group">
										<label for="field_wpid">WO ID</label>
										<input type="text" name="wpid" id="field_wpid" class="form-control" disabled ng-model="vm.workPackage.wpid"/>
									</div>
									<div class="form-group">
										<label for="field_businessArea">Business Area</label>
										 <select class="form-control" 
										 name="businessArea"
										 ng-class="{'must-fill': !editForm.businessArea.$valid}"							      				
										 ng-model="vm.workPackage.businessArea" 
					       						ng-options="key as value for (key , value) in vm.businessArea"
					       						ng-required="vm.isRequired('businessArea')" 
					       						ng-disabled="!vm.isEditable('businessArea') || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
					       						ng-class="{'must-fill': editForm.businessArea.$error.required}" >
					       						</select>
									</div>
									<div class="form-group">
										<label for="field_priority">Priority</label>	
										<input ng-if="vm.workPackage.targetDistribution == 'ATPCO'" class="form-control" type="text" ng-model="vm.workPackage.priority" disabled/>
										 <select ng-if="vm.workPackage.targetDistribution != 'ATPCO'"  class="form-control" 
										 name="priority"
										 ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
										 ng-class="{'must-fill': !editForm.priority.$valid}"							      				
										 ng-model="vm.workPackage.priority" 
			       						 ng-options="key as value for (key , value) in vm.priority"></select>
									</div>
									<div class="form-group">
										<label for="field_status">Status</label>
										
										<input 
										ng-class="{'must-fill': editForm.status.$error.required}" 
										    name="status"
											ng-required="vm.isRequired('status')" 
                   								autocomplete="off" type="text" name="businessArea" ng-model="vm.workPackage.status" class="form-control" disabled>
									</div>
									<div class="form-group">
										<label for="field_reviewLevel">Review Level</label>
										<input autocomplete="off" ng-required="vm.isRequired('reviewLevel')"  type="text" name="review_level" ng-model="vm.workPackage.reviewLevel" class="form-control" disabled>
									</div>
									<div class="form-group">
										<label for="field_distributionType">Distribution Type</label>
										<input type="text" ng-required="vm.isRequired('reviewLevel')" name="distributionType" class="form-control" disabled ng-model="vm.workPackage.targetDistribution">
									</div>
								</div>
								<div class="pull-left w50 two-column">
									<div class="form-group">
										<label for="field_name">WO Name</label>
										<input type="text" name="name" class="form-control"name="name" id="field_name" 
											ng-class="{'must-fill': editForm.name.$error.required}" 
                    						ng-model="vm.workPackage.name" 
                   							ng-required="vm.isRequired('workpackageName')" 
                    						ng-disabled="!vm.isEditable('workpackageName') || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"/>
									</div>
									<div class="form-group">
										<label for="field_createdBy">Created By</label>
										<input type="text" class="form-control" name="createdBy" id="field_createdBy" ng-disabled="true"
                    						ng-model="vm.workPackage.createdBy"/>
									</div>
									<div class="form-group">
										<label for="field_createdDate">Created Date</label>
										<div class="input-group">
											<input id="field_createdDate" type="text" ng-disabled="true" name="createdDate" class="form-control" datetime-picker="{{dateformat}}" ng-model="vm.workPackage.newCreatedDate" is-open="vm.datePickerOpenStatus.createdDate">
											<span class="input-group-addon disabled">
												<i ng-disabled="true" class="fa fa-calendar"></i>
											</span>
										</div>
									</div>
									<div class="form-group" ng-if="vm.workPackage.targetDistribution != 'MARKET'">
										<label for="field_fillingDate">Filing Date</label>
										<div class="input-group">
											<input type="text" id="field_fillingDate" name="filingDate" class="form-control"
											ng-class="{'must-fill': editForm.filingDate.$error.required}" 
											ng-required="vm.isRequired('filingDate')" 
											enable-time="false"
											datetime-picker="{{dateformat}}" ng-model="vm.workPackage.filingDate" is-open="vm.datePickerOpenStatus.filingDate"  
											ng-disabled="!vm.isEditable('filingDate') || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"/>
											<span ng-click="vm.openCalendar('filingDate')" class="input-group-addon" ng-class="{'poiv-none': !vm.isEditable('filingDate')  || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
												<i class="fa fa-calendar" ng-disabled="!vm.isEditable('filingDate')"></i>
											</span>
										</div>
									</div>
									<div class="form-group">
										<label for="field_expPax">Exp Pax</label>
										<input type="text" name="expPax" class="form-control"name="name" id="field_expPax"
                    						ng-model="vm.workPackage.expPax" ng-disabled="!vm.isEditable('expPax') || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"/>
									</div>
									<div class="form-group">
										<label for="field_expRev">Exp Rev</label>
										<input type="text" name="expPax" class="form-control"name="name" id="field_expRev"
                    						ng-model="vm.workPackage.expRev" ng-disabled="!vm.isEditable('expRev') || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"/>
									</div>
									<div class="form-group" ng-if="vm.workPackage.targetDistribution != 'MARKET'">
										<label for="field_saleDate">Sale Start Date</label>
										<div class="input-group">
											<input id="field_saleDate" type="text" 
												ng-class="{'must-fill': editForm.saleDate.$error.required}" 
                   								ng-required="vm.isRequired('saleDate')" 
                   								name="saleDate" 
                   								ng-disabled="!vm.isEditable('saleDate') || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)" 
                   								datetime-picker="{{dateformat}}" 
                   								enable-time="false"
                   								ng-model="vm.workPackage.saleDate" 
                   								is-open="vm.datePickerOpenStatus.saleDate" class="form-control">
                   								
											<span ng-click="vm.openCalendar('saleDate')" class="input-group-addon" ng-class="{'poiv-none': !vm.isEditable('saleDate') || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
												<i class="fa fa-calendar" ng-disabled="!vm.isEditable('saleDate')"></i>
											</span>
										</div>
									</div>
									<div class="form-group">
										<label for="field_distributionDate">Distribution Date</label>
										<div class="input-group">
											<input id="field_distributionDate" type="text" 
												ng-class="{'must-fill': editForm.distributionDate.$error.required}" 
                   								ng-required="vm.isRequired('distributionDate')" 
                   								name="distributionDate" 
                   								ng-disabled="!vm.isEditable('distributionDate') || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)" 
                   								datetime-picker="{{dateformat}}" 
                   								enable-time="false"
                   								ng-model="vm.workPackage.distributionDate" 
                   								is-open="vm.datePickerOpenStatus.distributionDate" class="form-control">
                   								
											<span ng-click="vm.openCalendar('distributionDate')" class="input-group-addon" ng-class="{'poiv-none': !vm.isEditable('distributionDate') || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
												<i class="fa fa-calendar" ng-disabled="!vm.isEditable('distributionDate')"></i>
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="pull-left w50 two-column">
					<div class="box-detail box-comment">
						<div class="box-header">Comment</div>
						<div class="box-body bbgrey">
							<div class="clearfix tab-body">
								<ul class="clearfix nav-responsive nav nav-tabs">
								    <li ng-class="{active:vm.currentTabComment}"><a ng-click="vm.selectCommentTab('comment')">Comment</a></li>
								    <li ng-class="{active:vm.currentTabInterofficeComment}"><a ng-click="vm.selectCommentTab('interofficeComment')">Inter Office</a></li>
								    <li ng-class="{active:vm.currentTabRatesheetComment}"><a ng-click="vm.selectCommentTab('ratesheetComment')">Rate Sheet Comment</a></li>
								</ul>
								<div class="tab-content">
									<div ng-class="{active:vm.currentTabComment}" class="tab-pane" id="comment">																		
										<div class="form-group" ng-class="{'poiv-none' :vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
											<wysiwyg-edit content="vm.commentString" config="vm.editorConfig"></wysiwyg-edit>
										</div>
										<div class="clearfix">
											<div class="pull-right">
												<button class="btn btn-default small btn-secondary" ng-click="vm.addComment()" ng-disabled="vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Send</button>
											</div>
										</div>										
										
							        	 <div class="box-body">
							        	 	<div class="comment-container">
							        	 		<div class="comment-wrapper">
									    			<div class="comment-list" ng-repeat="comment in vm.workPackage.comment.slice().reverse() track by $index">
												    	<div class="clearfix">
												    		<div class="pull-left comment-detail">{{comment.username}}</div>
												    		<div class="pull-right comment-detail">{{comment.createdTime | date: 'short'}}</div>
												    	</div>
												    	<div class="comment-message" data-ng-bind-html="trustAsHtml(comment.comment)"></div>
												    </div>
									    		</div>
							        	 	</div>
							        	</div>
									</div>

									<div ng-class="{active:vm.currentTabInterofficeComment, 'poiv-none' : (vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') 
											|| (vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.reviewLevel == 'LSO'&& vm.workPackage.status=='DISTRIBUTED')  || vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'}" class="tab-pane" id="inter-office">
										<div class="form-group" ng-class="{'poiv-none' :vm.workPackage.status =='DISCONTINUED' || vm.workPackage.reviewLevel == 'DISTRIBUTION'|| vm.disabledField(vm.workPackage)}">
											<wysiwyg-edit content="vm.ioString" config="vm.editorConfig"></wysiwyg-edit>
										</div> 
										<div class="clearfix">
											<div class="pull-right">
												<button class="btn btn-default small btn-secondary" id="btn-inter-office" ng-click="vm.addInterOffice()" ng-disabled="!vm.isEditable('ioComment') || vm.workPackage.status=='WITHDRAWN' || vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Send</button>
											</div>
										</div>										
										<div class="box-body">
											<div class="comment-container">
												<div class="comment-wrapper">
									    			<div class="comment-list" ng-repeat="comment in vm.workPackage.interofficeComment.slice().reverse() track by $index">
												    	<div class="clearfix">
												    		<div class="pull-left comment-detail">{{comment.username}}</div>
												    		<div class="pull-right comment-detail">{{comment.createdTime | date: 'short'}}</div>
												    	</div>
												    	<div class="comment-message" data-ng-bind-html="trustAsHtml(comment.comment)"></div>
												    </div>
									    		</div>
											</div>
							        	</div>
									</div>
									
									<div ng-class="{active:vm.currentTabRatesheetComment, 'poiv-none' : vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT'}" class="tab-pane" id="rate-sheet-comment">
										<div class="box-body">
											<div class="form-group">
												<label>Rate Sheet Comment</label>
												<textarea class="form-control" rows="3" id="ratesheetComment" ng-model="vm.workPackage.ratesheetComment" name="ratesheetComment"
							                    ng-disabled="!vm.isEditable('ratesheetComment') || vm.workPackage.status=='WITHDRAWN' || vm.disabledField(vm.workPackage)" 
							                    ng-class="{'must-fill': editForm.ratesheetComment.$error.required}"
							                    ng-required="vm.isRequired('ratesheetComment')"></textarea>
											</div>								
										</div>	 
									</div>
								</div>
							
							</div>
						</div>
					</div>
				</div>
			</div>						
			<!-- end of details -->
		</div>
	</div>

	<div class="panel panel-tabs">
		<div class="panel-body">
			<div class="clearfix mb1">
				<div class="pull-right" ng-class="{'poiv-none' : (vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.reviewLevel == 'LSO' 
						&& vm.workPackage.status=='DISTRIBUTED') || vm.disabledField(vm.workPackage)}">
					<button class="btn btn-default small" ng-click="vm.resendApprove()" ng-if="vm.workPackage.reviewLevel == 'DISTRIBUTION' && vm.user.reviewLevels.indexOf('HO') > -1">Generate IN</button>
					<button class="btn btn-default small" ng-click="vm.viewRecipients()" ng-if="vm.workPackage.reviewLevel == 'DISTRIBUTION' && vm.user.reviewLevels.indexOf('HO') > -1">View IN Recipients</button>
					<div class="button-group dropdown custom">
						<button class="btn btn-default small" ng-disabled="(vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.reviewLevel == 'LSO' 
						&& vm.workPackage.status=='DISTRIBUTED')  || vm.workPackage.status=='WITHDRAWN'|| vm.workPackage.status =='DISCONTINUED' ">
						Workflow<i class="fa fa-caret-down" ng-class="{'poiv-none' :(vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.reviewLevel == 'LSO' 
						&& vm.workPackage.status=='DISTRIBUTED')  || vm.workPackage.status=='WITHDRAWN'|| vm.workPackage.status =='DISCONTINUED'}"></i></button>
						<ul class="dropdown-menu custom" role="menu">
						    <li><a ng-click="vm.passUp()" 
					        ng-show="vm.workPackage.reviewLevel != 'HO' && vm.workPackage.reviewLevel != 'DISTRIBUTION' && vm.workPackage.reviewLevel != 'ROUTE_MANAGEMENT'" 
					        ng-class="{'poiv-none' :(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')}">Pass Up</a></li>
					        <li><a ng-click="vm.passDown()" 
					        ng-show="vm.workPackage.reviewLevel != 'LSO'  && vm.workPackage.reviewLevel != 'ROUTE_MANAGEMENT' && vm.workPackage.reviewLevel != 'DISTRIBUTION'"
					        ng-class="{'poiv-none' :(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')}">Pass Down</a></li>
					        <li><a ng-click="vm.passSideway()" 
					        ng-class="{disabled : editForm.$invalid }" 
					        ng-show="vm.workPackage.reviewLevel == 'HO' || vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT'">Pass Sideways</a></li>
					        <li class="divider"></li>
					        <li><a ng-click="vm.approve()" 
					        ng-class="{disabled : editForm.$invalid,'poiv-none' :(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')}" 
					        ng-show="vm.workPackage.reviewLevel == 'HO'">Approve</a></li>
					        <li><a ng-click="vm.referback()" 
					        ng-show="vm.workPackage.reviewLevel == 'DISTRIBUTION'"
					        ng-class="{'poiv-none' :(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')}">Refer Back</a></li>
					        <li><a ng-click="vm.complete()" 
					        ng-show="vm.workPackage.reviewLevel == 'DISTRIBUTION' && vm.workPackage.targetDistribution == 'ATPCO' && vm.workPackage.type == 'DISCOUNT'"
					        ng-class="{'poiv-none' :(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')}">Complete</a></li>
						</ul>
					</div>
					<div class="button-group dropdown custom" ng-class="{'poiv-none' :(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')}">
						<button class="btn btn-default small" ng-disabled="vm.workPackage.status=='WITHDRAWN'|| vm.workPackage.status =='DISCONTINUED'">Action <i class="fa fa-caret-down" ng-class="{'poiv-none' :vm.workPackage.status=='WITHDRAWN'|| vm.workPackage.status =='DISCONTINUED'}"></i></button>
						<ul class="dropdown-menu custom" role="menu">
						    <li>
						    	<a ng-click="vm.save(true)">Save and Validate</a>
						    </li>
						</ul>
					</div>	
					<div class="button-group dropdown custom" ng-class="{'poiv-none' :(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')}">
						<button class="btn btn-default small" ng-disabled="vm.workPackage.status=='WITHDRAWN'|| vm.workPackage.status =='DISCONTINUED'">Sheet <i class="fa fa-caret-down" ng-class="{'poiv-none' :vm.workPackage.status=='WITHDRAWN'|| vm.workPackage.status =='DISCONTINUED'}"></i></button>
						<ul class="dropdown-menu custom" role="menu">
						    <li>
						    	<a ng-click="vm.addSheet()" data-toggle="modal" data-target="#addNewsheet">Add</a>
						    </li>
						    <li>
						    	<a ng-click="vm.removeSheet()" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'">Remove</a>
						    </li>
						    <!-- <li>
						    	<a href="#">Rename</a>
						    </li> -->
						    <li>
						    	<a ng-click="vm.copySheet()">Copy</a>
						    </li>
						    <li>
						    	<a ng-click="vm.pasteSheet()" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'">Paste</a>
						    </li>
						</ul>
					</div>												
					<button class="btn btn-default small" ng-click="vm.save(false)">Save</button>
					<button class="btn btn-default small" ng-click="vm.close()">Close</button>
				</div>
			</div>
			
		
			<ng-form name="editFormATPCO" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'ATPCO' && vm.workPackage.type == 'REGULAR'">
				<div style="border-top : none;">
					<div class="tab-wrapper" id="distribution-ATPCO">
						
						<div class="clearfix tab-body">
							<ul class="clearfix nav-responsive nav nav-tabs">
							    <li ng-if="vm.workPackage.specifiedFares" ng-class="{active:vm.currentTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.fareSheet track by $index"><a ng-click="vm.selectTab($index);">GA Fares : {{vm.workPackage.fareSheet[$index].specifiedFaresName}}</a></li>
							    <li ng-if="vm.workPackage.addon" ng-class="{active:vm.currentAddonTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.addonFareSheet track by $index"><a ng-click="vm.selectAddonTab($index);">Addon Fares : {{vm.workPackage.addonFareSheet[$index].addonFaresName}}</a></li>
							    <li ng-if="vm.workPackage.filingInstruction" ng-class="{active:vm.currentTabFilingInstruction}"><a ng-click="vm.selectOtherTab('filingInstruction')">Filing Instruction</a></li>
							    <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
							    <li ng-if="vm.workPackage.fareSheet.length > 0 || vm.workPackage.addonFareSheet.length > 0" ng-class="{active:vm.currentTabFilingDetail}"><a ng-click="vm.selectOtherTab('filingDetail')">Filling Details</a></li>
							</ul>
							
							<div class="tab-content">
							
								<div class="tab-pane" id="tabAtpco{{$index}}" ng-class="{active:vm.currentTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.fareSheet track by $index">
									<div class="pb1 mb1 bbgrey">
										<div class="clearfix">
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label>Description</label>
													<input type="text" name="description{{$index}}" class="form-control"
													ng-class="{'must-fill': editForm.editFormATPCO.description{{$index}}.$error.required && fare.action != 'Canceled'}"
									         		ng-model="workPackageSheet.specifiedFaresName" 
									         		ng-required="vm.isRequired('description')"  
									         		ng-disabled="!vm.isEditable('description')|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
												</div>
											</div>
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label>Approval Reference</label>
													<input type="text" name="approvalReference{{$index}}" class="form-control" 
													ng-class="{'must-fill': editForm.editFormATPCO.approvalReference{{$index}}.$error.required}"
										            ng-model="workPackageSheet.approvalReference"
													ng-disabled="!vm.isEditable('approvalReference')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
													ng-required="vm.isRequired('approvalReference')">
													<button ng-click="vm.generateTourCode(workPackageSheet)" ng-disabled="!vm.isEditable('approvalReference')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Generate Tour Code</button>
												</div>
											</div>
										</div>
										
										<div class="clearfix">
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label>Fare Type</label>	
												<select class="form-control" name="fareType{{$index}}" ng-model="workPackageSheet.fareType" ng-class="{'must-fill': !editForm.editFormATPCO.fareType{{$index}}.$valid && fare.action != 'Canceled'}"
													ng-required="vm.checkRequiredField('fareType')" ng-disabled="!vm.isEditable('fareType') || vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
													<option ng-repeat="fare in vm.optionFare track by $index" value="{{fare.name}}">
														{{fare.code}} | {{fare.name}}
													</option>
												</select>									      				
												</div>
											</div>
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label>Version</label>
													<select class="form-control" ng-model="workPackageSheet.version" 
													ng-change="vm.changeVersion(workPackageSheet, workPackageSheet.version)" 
													ng-init="vm.changeVersion(workPackageSheet, 'current')">
														<option value='current'>Current</option>
														<option ng-repeat="version in workPackageSheet.fareVersion track by $index" ng-selected="{{version.version == workPackageSheet.version}}" value="{{$index}}">
															{{version.version}} - {{version.username}} - {{version.action}}
														</option>
													</select>
												</div>
											</div>
										</div>
									</div>
									
									<!-- table details-->
									<div class="table-wrapper">
										<div class="datatable-wrapper form-inline">
											<div class="clearfix">
												<div class="pull-left">
													<div class="clearfix">
														<div class="pull-right datatable-button">
															<div class="button-group dropdown custom">
																<button class="btn btn-default small btn-secondary" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Edit<i class="fa fa-caret-down" ng-class="{'poiv-none':(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}"></i></button>
																<ul class="dropdown-menu custom" role="menu">
																    <li>
																    	<a ng-click="vm.clearSelection(workPackageSheet)">Clear Selection</a>
																    </li>	
																    <li>
																    	<a ng-click="vm.fillDown(workPackageSheet)">Fill Down</a>
																    </li>	
																     <li>
															    		<a ng-click="vm.searchReplace(workPackageSheet)">Search/Replace</a>
															   		 </li>
																     <li>
															    		<a ng-click="vm.copySelectedFares(workPackageSheet, 'workorder-fares')">Copy Selected Rows</a>
															   		 </li>
																    <li>
																    	<a ng-click="vm.addFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Add Rows</a>
																    </li>
																    <li>
																    	<a ng-click="vm.duplicateSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Duplicate Selected Rows</a>
																    </li>
																    <li>
																    	<a ng-click="vm.deleteSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Delete Selected Rows</a>
																    </li>
																     														   
																    
																    <li>
																    	<a ng-click="vm.pasteFares(workPackageSheet)">Paste</a>
																    </li>
																    <li>
																    	<a ng-click="vm.pasteFares(workPackageSheet, true)">Paste As Cancel</a>
																    </li>
																    
																    <li>
																    	<a ng-click="vm.updateLatestFare(workPackageSheet)">Update With Latest Fare</a>
																    </li>
																    
																    <li>
																    	<a ng-click="vm.updateActionCodes(workPackageSheet)">Update Action Codes</a>
																    </li>
																    <li>
																   	 <a ng-click="vm.expandCityGroup(workPackageSheet, 'discount')">Expand City Groups</a>
																    </li>
																</ul>
															</div>													
															<button class="btn btn-default small btn-secondary" ngf-select  ngf-change="vm.importFare($file, $index)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') || vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Import</button>
															<button class="btn btn-default small btn-secondary" ng-click="vm.exportFares($index)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Export</button>
															<!-- <button class="btn btn-default small btn-secondary">Publish</button> -->
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.agent()" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') || vm.disabledField(vm.workPackage)">Agents</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.ratesheet()" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN'|| vm.disabledField(vm.workPackage)">Rate Sheet</button> 
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.routemap()" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Route Map</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveUpFare(workPackageSheet)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Move Up</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveDownFare(workPackageSheet)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Move Down</button> 
														</div>
													</div>																						
												</div>
											</div>
											<div class="table-responsive">
												<table class="table table-stripped table-bordered datatable" ng-init="vm.sort(workPackageSheet, '#')">
													<thead>
														<tr role="row">
															<th class="sorting_asc" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1" aria-sort="ascending">No</th>
															<th class="sorting_asc" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1" aria-sort="ascending"># <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, '#')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Status <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'status')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Carrier <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'carrier')"></span>
																<div class="resize-div"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Action <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'action')"></span>
																<div class="resize-div"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar No <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'tariffNumber.tarNo')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar Cd <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'tariffNumber.tarCd')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Global <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'tariffNumber.global')"></span>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Origin <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'origin')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Dest <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'destination')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Fare Cls <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'fareBasis')"></span>
																<div class="resize-div"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Bkg Cls <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'bookingClass')"></span>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Cabin <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'cabin')"></span>
																<div class="resize-div" style="min-width: 120px"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">OW/RT <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'typeOfJourney')"></span>
																<div class="resize-div" style="min-width: 120px"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Ftnt <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'footnote')"></span>
																<div class="resize-div"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Rtg No <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'rtgno')"></span>
																<div class="resize-div"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Rule No <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'ruleno')"></span>
																<div class="resize-div"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Curr <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'currency')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Base Amt <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'amount')"></span>
																<div class="resize-div" style="min-width: 120px"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Amt Diff</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">% Amt Diff</th>															
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Target Aif <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'aif')"></span>
																<div class="resize-div"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel Start <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'travelStart')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel End <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'travelEnd')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Sale Start <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'saleStart')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Sale End <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'saleEnd')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Comment <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'comment')"></span>
																<div class="resize-div" style="min-width: 200px;"></div>
															</th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel Complete <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'travelComplete')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel Complete Indicator <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'travelCompleteIndicator')"></span></th>
															<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Ratesheet Comment <span class="glyphicon glyphicon-sort" ng-click="vm.sort(workPackageSheet, 'ratesheetComment')"></span>
																<div class="resize-div" style="min-width: 200px;"></div>
															</th>
														</tr>
													</thead>
													<tbody>
														<tr ng-click="vm.tbodyClick(workPackageSheet)" ng-repeat="(key, fare) in workPackageSheet.currentFares track by $index" role="row" class="datatable-row" ng-class="{'poiv-none':workPackageSheet.version != 'current', 'pasteAsCancel': fare.action == 'X','approved': fare.status == 'APPROVED', 'rejected': fare.status == 'REJECTED'}" ng-init="
															fare.no == null || fare.no == undefined ? 
															fare.no = $index+1 : fare.no = fare.no">
															<td>{{$index+1}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'no', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['no']}" name="no{{$parent.$index}}{{$index}}" >{{fare.no}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'status', $event)" ng-class="{highlighted:fare.field['status']}">
																<select class="form-control inside-table" name="status{{$parent.$index}}{{$index}}" ng-model="fare.status" id="field_status" 
																	ng-class="{'must-fill': !editForm.editFormATPCO.status{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"												         		
								           							ng-disabled="!vm.isEditable('status')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
													             	ng-required="vm.isRequired('status')"
													             	ng-options="key as value for (key , value) in vm.status">
																</select>	
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'carrier', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['carrier']}">
																<input type="text" class="form-control" name="carrier{{$parent.$index}}{{$index}}" id="field_carrier"
											                    		ng-model="fare.carrier"
											                    		ng-disabled="!vm.isEditable('carrier')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)" 
											                    		ng-class="{'must-fill': editForm.editFormATPCO.carrier{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('carrier')"/>
															</td>																
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'action', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['action']}">{{fare.action}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'tarno', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['tarno']}">
																
																<span class="input-group">
																	<input type="text" class="form-control" name="tarno{{$parent.$index}}{{$index}}" id="field_tarcd"
											                    		ng-model="fare.tariffNumber.tarNo"
											                    		ng-disabled="!vm.isEditable('tarno')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'"  
											                    		style="min-width:60px"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.tarno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('tarno')"
															            ng-focus="tarno[$parent.$index][$index]=true" ng-blur="tarno[$parent.$index][$index]=false; vm.checkTariff(fare, 'tariffNumber', 'tarNo');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectTariff(fare, 'tariffNumber')" ng-class="{'poiv-none': !vm.isEditable('tarno')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'tarcd', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['tarcd']}">
																
																<span class="input-group">
																	<input type="text" class="form-control" name="tarcd{{$parent.$index}}{{$index}}" id="field_tarcd"
											                    		ng-model="fare.tariffNumber.tarCd"
											                    		ng-disabled="!vm.isEditable('tarcd')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'" 
											                    		style="min-width:60px"
											                    		uppercase
											                    		ng-class="{'must-fill': editForm.editFormATPCO.tarcd{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('tarcd')"
															            ng-focus="tarcd[$parent.$index][$index]=true" ng-blur="tarcd[$parent.$index][$index]=false; vm.checkTariff(fare, 'tariffNumber', 'tarCd');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectTariff(fare, 'tariffNumber')" ng-class="{'poiv-none': !vm.isEditable('tarcd')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'global', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['global']}">{{fare.tariffNumber.global}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'origin', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['origin']}">																
																<span class="input-group" tooltip-placement="{{$index > 3 ? 'top' : 'bottom'}}" uib-tooltip-html="vm.getTooltip(fare.origin)">
																	<input type="text" class="form-control" name="origin{{$parent.$index}}{{$index}}" id="field_origin"
											                    		ng-model="fare.origin"
											                    		ng-disabled="!vm.isEditable('origin')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'" 
											                    		style="min-width:60px;"
											                    		uppercase
											                    		ng-class="{'must-fill': editForm.editFormATPCO.origin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('origin')"
															            ng-focus="origin[$parent.$index][$index]=true" ng-blur="origin[$parent.$index][$index]=false; vm.checkCity(fare, 'origin');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'origin')" ng-class="{'poiv-none': !vm.isEditable('origin')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)||fare.action == 'X'}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'destination', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['destination']}">
																<span class="input-group" tooltip-placement="{{$index > 3 ? 'top' : 'bottom'}}" uib-tooltip-html="vm.getTooltip(fare.destination)">
																	<input type="text" class="form-control" name="destination{{$parent.$index}}{{$index}}" id="field_destination"
											                    		ng-model="fare.destination"
											                    		ng-disabled="!vm.isEditable('destination')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'" 
											                    		style="min-width:60px;"
											                    		uppercase
											                    		ng-class="{'must-fill': editForm.editFormATPCO.destination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('destination')"
															            ng-focus="destination[$parent.$index][$index]=true" ng-blur="destination[$parent.$index][$index]=false; vm.checkCity(fare, 'destination');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'destination')" ng-class="{'poiv-none': !vm.isEditable('destination')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'fareBasis', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['fareBasis']}">
																<input type="text" class="form-control" name="fareBasis{{$parent.$index}}{{$index}}" id="field_farebasis"
									                				ng-disabled="!vm.isEditable('farebasis')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'"
									                				ng-required="vm.isRequired('farebasis') && fare.action != 'Canceled'" 
									                				uppercase
									                				ng-pattern="/^[a-zA-Z0-9*]*$/"
									                				ng-class="{'must-fill':editForm.editFormATPCO.fareBasis{{$parent.$index}}{{$index}}.$error.required || 
										                				editForm.editFormATPCO.fareBasis{{$parent.$index}}{{$index}}.$error.maxlength || 
										                				editForm.editFormATPCO.fareBasis{{$parent.$index}}{{$index}}.$error.pattern}"
									                				maxlength="8"
									                				ng-maxlength="8"
									                				ng-model="fare.fareBasis"/>				
															</td>	
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'bookingClass', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['bookingClass']}">
																<input type="text" class="form-control" name="bookingClass{{$parent.$index}}{{$index}}" id="field_bookingClass"
									                				ng-maxlength="2"
									                				maxlength="2"
									                				uppercase
									                				ng-pattern="/^[a-zA-Z]{1,2}$/"
									                				ng-disabled="!vm.isEditable('bookingClass')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'"
									                				ng-required="vm.isRequired('bookingClass')" 
									                				ng-class="{'must-fill':editForm.editFormATPCO.bookingClass{{$parent.$index}}{{$index}}.$error.required || 
										                				editForm.editFormATPCO.bookingClass{{$parent.$index}}{{$index}}.$error.maxlength || 
										                				editForm.editFormATPCO.bookingClass{{$parent.$index}}{{$index}}.$error.pattern}"
										                    		ng-model="fare.bookingClass"/>	
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'cabin', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['cabin']}">
										           				<select class="form-control inside-table" 
														             name="cabin{{$parent.$index}}{{$index}}"
														             ng-required="vm.isRequired('cabin')"
														             ng-class="{'must-fill': !editForm.editFormATPCO.cabin{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
														             ng-model="fare.cabin" id="field_cabin" 
														             ng-disabled="!vm.isEditable('cabin')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)||fare.action == 'X'"
														             ng-options="key as value for (key , value) in vm.cabin"></select>
										                			
										           			</td>
										           			<td ng-click="vm.tdClick(workPackageSheet, fare, 'typeOfJourney', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['typeOfJourney']}">
										           				<select class="form-control inside-table" 
														             name="typeOfJourney{{$parent.$index}}{{$index}}"
														             ng-required="vm.isRequired('typeOfJourney')"
														             ng-class="{'must-fill': !editForm.editFormATPCO.typeOfJourney{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
														             ng-model="fare.typeOfJourney" id="field_typeOfJourney"
														             ng-disabled="!vm.isEditable('typeOfJourney')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'"
														             ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
										           			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'footnote', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['footnote']}">
									               				<input type="text" class="form-control" name="footnote{{$parent.$index}}{{$index}}" id="field_footnote"
										                				ng-maxlength="2"
									                					maxlength="2"
									                					uppercase
									                					ng-pattern="/^[a-zA-Z0-9]{1,2}$/"
									                					ng-keypress="vm.keypress($event, '^[a-zA-Z0-9]{1,2}$')"
										                				ng-class="{'must-fill': editForm.editFormATPCO.footnote{{$parent.$index}}{{$index}}.$error.required ||
										                				editForm.editFormATPCO.footnote{{$parent.$index}}{{$index}}.$error.maxlength || 
										                				editForm.editFormATPCO.footnote{{$parent.$index}}{{$index}}.$error.pattern
										                				}"																			            
															            ng-disabled="!vm.isEditable('footnote')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) ||fare.action == 'X'"
															            ng-required="vm.isRequired('footnote')"
											                    		ng-model="fare.footnote1"/>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'rtgno', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['rtgno']}">
									               				<input type="text" class="form-control" name="rtgno{{$parent.$index}}{{$index}}" id="field_bookingClass"
										                				ng-maxlength="4"
									                					maxlength="4"
									                					ng-pattern="/^[0-9]{1,4}$/"
										                				ng-disabled="!vm.isEditable('rtgno')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'"
										                				ng-required="vm.isRequired('rtgno')" 
										                				ng-keypress="vm.keypress($event, '^[0-9]{1,4}$')"
										                				ng-class="{'must-fill': editForm.editFormATPCO.rtgno{{$parent.$index}}{{$index}}.$error.required ||
										                				editForm.editFormATPCO.rtgno{{$parent.$index}}{{$index}}.$error.maxlength || 
										                			editForm.editFormATPCO.rtgno{{$parent.$index}}{{$index}}.$error.pattern
										                			 && fare.action != 'Canceled'}"																			            
															            ng-model="fare.rtgno"/>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'ruleno', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['ruleno']}">
							               						<input type="text" 
							               						ng-maxlength="4"
							               						uppercase
									                			maxlength="4"
									                			ng-pattern="/^[a-zA-Z0-9]{1,4}$/"
									                			class="form-control" name="ruleno{{$parent.$index}}{{$index}}" id="field_bookingClass"
									                			ng-keypress="vm.keypress($event, '^[a-zA-Z0-9]{1,4}$')"
								                				ng-disabled="!vm.isEditable('ruleno')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)||fare.action == 'X'"
								                				ng-required="vm.isRequired('ruleno')" 
								                				ng-class="{'must-fill': editForm.editFormATPCO.ruleno{{$parent.$index}}{{$index}}.$error.required ||
								                					editForm.editFormATPCO.ruleno{{$parent.$index}}{{$index}}.$error.maxlength || 
										                			editForm.editFormATPCO.ruleno{{$parent.$index}}{{$index}}.$error.pattern
										                		}"																			            
													            ng-model="fare.ruleno"/>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'currency', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['currency']}">
									               			
									               				<span class="input-group">
																	<input type="text" class="form-control" name="currency{{$parent.$index}}{{$index}}" id="field_carrier"
											                    		ng-model="fare.currency"
											                    		ng-disabled="!vm.isEditable('currency')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X' "
											                    		style="min-width:60px"
											                    		uppercase
											                    		ng-class="{'must-fill': editForm.editFormATPCO.currency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('currency')"
															            ng-focus="currency[$parent.$index][$index]=true" ng-blur="currency[$parent.$index][$index]=false; vm.checkCurrency(fare, 'currency');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCurrency(fare, 'currency')" ng-class="{'poiv-none': !vm.isEditable('currency')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)||fare.action == 'X'}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'amount', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['amount']}">
							               						<input type="text" class="form-control" name="amount{{$parent.$index}}{{$index}}" id="field_bookingClass"
								                				ng-disabled="!vm.isEditable('amount')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)||fare.action == 'X'"
								                				ng-required="vm.isRequired('amount', fare)" 
								                				ng-class="{'must-fill': editForm.editFormATPCO.amount{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
													            ng-model="fare.amount"  style="min-width: 80px">									                												                			
									               			</td>
									               			<td>
									               				<input class="form-control" disabled ng-model="fare.amtDiff" style="min-width:100px"/>
									               			</td>
									               			<td>
									               				<input class="form-control" disabled ng-model="fare.amtPercentDiff" style="min-width:100px"/>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'aif', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['aif']}">
										               			<input type="text" class="form-control" name="aif{{$parent.$index}}{{$index}}" id="field_bookingClass"
										                				ng-disabled="!vm.isEditable('aif')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) ||fare.action == 'X'"
										                				ng-required="vm.isRequired('aif', fare)" 
										                				ng-class="{'must-fill': editForm.editFormATPCO.aif{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.aif"/>
										               		</td> 
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelStart', $event);" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['travelStart']}">
									               				<span class="input-group">
																	<input id="field_travelStartDate" 
																		type="text"
																		name="travelStartDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('travelStartDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) ||fare.action == 'X'"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('travelStartDate')"										           
											                    		ng-class="{'must-fill': editForm.editFormATPCO.travelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelStart" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['travelStartDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('travelStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('travelStartDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X' }">
																		<i ng-disabled="true" class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelEnd', $event);" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['travelEnd']}">
									               				<span class="input-group">
																	<input id="field_travelEndDate" 
																		type="text"
																		name="travelEndDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('travelEndDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('travelEndDate')"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.travelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelEnd" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['travelEndDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('travelEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('travelEndDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'}">
																		<i ng-disabled="true" class="fa fa-calendar"></i>
																	</span>
																</span>								                			
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'saleStart', $event);" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['saleStart']}">
									               				<span class="input-group">
																	<input id="field_startDate" 
																		type="text"
																		name="saleStartDate{{$parent.$index}}{{$index}}" id="field_saleStartDate"
										                				ng-disabled="!vm.isEditable('saleStartDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('saleStartDate')"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.saleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.saleStart" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['saleStartDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('saleStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('saleStartDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)||fare.action == 'X'}">
																		<i ng-disabled="true" class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			<td  ng-click="vm.tdClick(workPackageSheet, fare, 'saleEnd', $event);" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['saleEnd']}">
							               						<span class="input-group">
																	<input id="field_endDate" 
																		type="text"
																		name="saleEndDate{{$parent.$index}}{{$index}}" id="field_salesaleEnd"
										                				ng-disabled="!vm.isEditable('saleEndDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)||fare.action == 'X'"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('saleEndDate')"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.saleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.saleEnd" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['saleEndDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('saleEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('saleEndDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X'}">
																		<i ng-disabled="true" class="fa fa-calendar"></i>
																	</span>
																</span>							                			
									               			</td>
									               			<td  ng-click="vm.tdClick(workPackageSheet, fare, 'comment', $event);" ng-class="{'poiv-none': fare.status != 'PENDING' || vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X', highlighted:fare.field['comment']}">
									               				<input type="text" class="form-control" name="comment{{$parent.$index}}{{$index}}" id="field_comment"
											                    		ng-model="fare.comment"/>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelComplete', $event);" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['travelComplete']}">
									               				<span class="input-group">
																	<input id="field_travelComplete" 
																		type="text"
																		name="travelComplete{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('travelComplete')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)||fare.action == 'X'"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('travelComplete')"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.travelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelComplete" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['travelComplete'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('travelComplete'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('travelComplete')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X' }">
																		<i ng-disabled="true" class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelCompleteIndicator', $event);" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['travelCompleteIndicator']}">
							               						<select class="form-control inside-table" name="travelIndicator{{$parent.$index}}{{$index}}" id="field_travelIndicator"
								                				ng-disabled="!vm.isEditable('travelIndicator')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)||fare.action == 'X' "
								                				ng-required="vm.isRequired('travelIndicator')"
									                    		ng-class="{'must-fill': !editForm.editFormATPCO.travelIndicator{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"									                    		
									                    		ng-options="key as value for (key , value) in vm.travelCompleteIndicator"											             																		            														                    		
								                				ng-model="fare.travelCompleteIndicator"></select>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'ratesheetComment', $event);" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['ratesheetComment']}">
								                				<input type="text" class="form-control" name="ratesheetComment{{$parent.$index}}{{$index}}" id="field_ratesheetComment"
								                				ng-disabled="!vm.isEditable('ratesheetComment')|| fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' || vm.disabledField(vm.workPackage) ||fare.action == 'X'"
								                				ng-required="vm.isRequired('ratesheetComment')"
									                    		ng-class="{'must-fill': editForm.editFormATPCO.ratesheetComment{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            														                    		
									                    		ng-model="fare.ratesheetComment"/>
									               			</td>
														</tr>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								
								</div>
								
								<div class="tab-pane" id="tabAtpco{{vm.workPackage.fareSheet.length+$index}}" ng-class="{active:vm.currentAddonTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.addonFareSheet track by $index">
									<div class="pb1 mb1 bbgrey">
										<div class="clearfix">
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label>Description</label>
													
													<textarea class="form-control" 
									         		name="addonFaresName{{$index}}"
									         		ng-model="workPackageSheet.addonFaresName" 
									         		style="min-width: 100%; min-height:100%"
									         		ng-class="{'must-fill': editForm.editFormATPCO.addonFaresName{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
									         		ng-required="vm.isRequired('addonFaresName')"  
									         		ng-disabled="!vm.isEditable('addonFaresName')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">
							          				</textarea>
												</div>
											</div>
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label>Version</label>
													<select class="form-control" ng-model="workPackageSheet.version" ng-change="vm.changeVersion(workPackageSheet, workPackageSheet.version)" ng-init="vm.changeVersion(workPackageSheet, 'current')">
														<option value='current'>Current</option>
														<option ng-repeat="version in workPackageSheet.fareVersion track by $index" value="{{$index}}">
															{{version.version}} - {{version.username}} - {{version.action}}
														</option>
													</select>
												</div>
											</div>	
										</div>
									</div>	
											
									<!-- table details-->
									<div class="table-wrapper">
										<div class="datatable-wrapper form-inline">
											<div class="clearfix">
												<div class="pull-left">
													<div class="clearfix">
														<div class="pull-right datatable-button">
															<div class="button-group dropdown custom">
																<button class="btn btn-default small btn-secondary" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Edit<i class="fa fa-caret-down" ng-class="{'poiv-none':(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}"></i></button>
																<ul class="dropdown-menu custom" role="menu">
																	<li>
																    	<a ng-click="vm.clearSelection(workPackageSheet)">Clear Selection</a>
																    </li>	
																    <li>
																    	<a ng-click="vm.fillDown(workPackageSheet)">Fill Down</a>
																    </li>	
																    <li>
															    		<a ng-click="vm.searchReplace(workPackageSheet)">Search/Replace</a>
															   		</li>
															   		 <li>
															    		<a ng-click="vm.copySelectedFares(workPackageSheet, 'workorder-addon-fares')">Copy Selected Rows</a>
															   		 </li>
																    <li>
																    	<a ng-click="vm.addFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Add Rows</a>
																    </li>
																    <li>
																    	<a ng-click="vm.duplicateSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Duplicate Selected Rows</a>
																    </li>
																    <li>
																    	<a ng-click="vm.deleteSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Delete Selected Rows</a>
																    </li>
																    <li>
																    	<a ng-click="vm.pasteFares(workPackageSheet)">Paste</a>
																    </li>
																    <li>
																    	<a ng-click="vm.pasteFares(workPackageSheet, true)">Paste As Cancel</a>
																    </li>
																    <li>
																    	<a ng-click="vm.updateLatestFare(workPackageSheet)">Update With Latest Fare</a>
																    </li>
																    
																    <li>
																    	<a ng-click="vm.updateActionCodes(workPackageSheet)">Update Action Codes</a>
																    </li>
																    <li>
																   	 <a ng-click="vm.expandCityGroup(workPackageSheet)">Expand City Groups</a>
																    </li>
																</ul>
															</div>													
															<button class="btn btn-default small btn-secondary" ngf-select ngf-change="vm.importFareAddon($file, $index)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Import</button>
															<button class="btn btn-default small btn-secondary" ng-click="vm.exportFaresAddon($index)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Export</button>
															<button class="btn btn-default small btn-secondary" ng-disabled="vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 || vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Publish</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Agents</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.ratesheet()" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Rate Sheet</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveUpFare(workPackageSheet)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Move Up</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveDownFare(workPackageSheet)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Move Down</button> 
														</div>
													</div>																						
												</div>
											</div>
											<div class="table-responsive">
												<table class="table table-stripped table-bordered datatable" jq-slider>
													<thead>
														<tr role="row">																	
															<th>No</th>
									                		<th>Status</th>
										                	<th>Carrier</th>		                	
									                		<th>Action</th>
										                	<th>Tar No</th>
										                	<th>Tar Cd</th>
										                	<th>Global</th>
										                	<th>Origin</th>
										                	<th>Dest</th>
										                	<th>Addon Bucket/Fare Class</th>
										                	<th>OW/RT</th>
										                	<th>Ftnt</th>
										                	<th>Zone</th>
										                	<th>Rtg No</th>
										                	<th>Filing Curr</th>
										                	<th>Base Amt</th>
										                	<th>Amt Diff</th>
										                	<th>% Amt Diff</th>
											                <th>Travel Start</th>
										               		<th>Travel End</th>		               		
										               		<th>Sale Start</th>
										               		<th>Sale End</th>	
										               		<th>Comment</th>	               		
										               		<th>Travel Complete</th>	               		
										               		<th>Travel Complete Indicator</th>		
														</tr>
													</thead>
													<tbody>
														<tr role="row" class="datatable-row" ng-repeat="fare in workPackageSheet.currentFares track by $index" ng-class="{'poiv-none': workPackageSheet.version != 'current', 'approved': fare.status == 'APPROVED', 'rejected': fare.status == 'REJECTED'}">
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'no', $event)" ng-class="{highlighted:fare.field['no']}">{{$index+1}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'status', $event)" ng-class="{highlighted:fare.field['status']}">
																<select class="form-control inside-table" name="addonFareStatus{{$index}}" ng-model="fare.status" id="field_status" 
																	ng-class="{'must-fill': !editForm.editFormATPCO.addonFareStatus{{$index}}.$valid && fare.action != 'Canceled'}"												         		
								           							ng-disabled="!vm.isEditable('addonFareStatus')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"
													             	ng-required="vm.isRequired('addonFareStatus')"
													             	ng-options="key as value for (key , value) in vm.status">
																</select>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'carrier', $event)" ng-class="{highlighted:fare.field['carrier']}">
																<input type="text" class="form-control" name="addonFareCarrier{{$index}}" id="field_carrier"
											                    		ng-model="fare.carrier"
											                    		ng-disabled="!vm.isEditable('addonFareCarrier')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											                    		ng-class="{'must-fill': ditForm.editFormATPCO.addonFareCarrier{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('addonFareCarrier')"/>
															</td>																
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'action', $event)" ng-class="{highlighted:fare.field['action']}">{{fare.action}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'tarno', $event)" ng-class="{highlighted:fare.field['tarno']}">
																<span class="input-group">
																	<input type="text" class="form-control" name="addonFareTarno{{$parent.$index}}{{$index}}" id="field_tarcd"
											                    		ng-model="fare.tariffNumber.tarNo"
											                    		ng-disabled="!vm.isEditable('addonFareTarno') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"
											                    		style="min-width:60px"
											                    		uppercase
											                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareTarno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('addonFareTarno')"
															            ng-focus="tarno[$parent.$index][$index]=true" ng-blur="tarno[$parent.$index][$index]=false; vm.checkTariff(fare, 'tariffNumber', 'tarNo');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectTariffAddOn(fare, 'tariffNumber')" ng-class="{'poiv-none': !vm.isEditable('addonFareTarno') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'tarcd', $event)" ng-class="{highlighted:fare.field['tarcd']}">
																<span class="input-group">
																		<input type="text" class="form-control" name="addonFareTarcd{{$parent.$index}}{{$index}}" id="field_tarcd"
												                    		ng-model="fare.tariffNumber.tarCd"
												                    		ng-disabled="!vm.isEditable('addonFareTarcd') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) "
												                    		style="min-width:60px"
												                    		uppercase
												                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareTarcd{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
																            ng-required="vm.isRequired('addonFareTarcd') && fare.action != 'Canceled'"
																            ng-focus="tarcd[$parent.$index][$index]=true" ng-blur="tarcd[$parent.$index][$index]=false; vm.checkTariff(fare, 'tariffNumber', 'tarCd');"/>
																		<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectTariffAddOn(fare, 'tariffNumber')" ng-class="{'poiv-none': !vm.isEditable('addonFareTarcd') ||fare.status == 'APPROVED' || fare.status == 'REJECTED'}">
																			<i class="fa fa-folder"></i>
																		</span>
																	</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'global', $event)" ng-class="{highlighted:fare.field['global']}">{{fare.tariffNumber.global}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'origin', $event)" ng-class="{highlighted:fare.field['origin']}">
																<span class="input-group">
																		<input type="text" class="form-control" name="addonFareOrigin{{$parent.$index}}{{$index}}" id="field_carrier"
												                    		ng-model="fare.origin"
												                    		uppercase
												                    		ng-disabled="!vm.isEditable('addonFareOrigin') || fare.status =='APPROVED' || fare.status =='REJECTED'"
												                    		style="min-width:60px"
												                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareOrigin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
																            ng-required="vm.isRequired('addonFareOrigin') && fare.action != 'Canceled'"
																            ng-focus="origin[$parent.$index][$index]=true" ng-blur="origin[$parent.$index][$index]=false; vm.checkCity(fare, 'origin');"/>
																		<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'origin')" ng-class="{'poiv-none': !vm.isEditable('addonFareOrigin') || fare.status == 'APPROVED' || fare.status == 'REJECTED'}">
																			<i class="fa fa-folder"></i>
																		</span>
																	</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'destination', $event)" ng-class="{highlighted:fare.field['destination']}">
																<span class="input-group">
																	<input type="text" class="form-control" name="addonFareDestination{{$parent.$index}}{{$index}}" id="field_carrier"
											                    		ng-model="fare.destination"
											                    		uppercase
											                    		ng-disabled="!vm.isEditable('addonFareDestination') || fare.status =='APPROVED' || fare.status =='REJECTED'"
											                    		style="min-width:60px"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareDestination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('addonFareDestination') && fare.action != 'Canceled'"
															            ng-focus="destination[$parent.$index][$index]=true" ng-blur="destination[$parent.$index][$index]=false; vm.checkCity(fare, 'destination');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'destination')" ng-class="{'poiv-none': !vm.isEditable('addonFareDestination') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) }">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'bucket', $event)" ng-class="{highlighted:fare.field['bucket']}">
																<input type="text" class="form-control" ng-model="fare.bucket" name="addonFareBucket{$parent.$index}}{{$index}}"
											           				ng-disabled="!vm.isEditable('addonFareBucket') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											           				ng-maxlength="8"
								                					maxlength="8"
								                					uppercase
								                					ng-pattern="/^[a-zA-Z0-9]{1,8}$/"
								                					ng-keypress="vm.keypress($event, '^[a-zA-Z0-9*]{1,8}$')"									                				
														            ng-class="{'must-fill': editForm.editFormATPCO.addonFareBucket{{$parent.$index}}{{$index}}.$error.required 
														            || editForm.editFormATPCO.addonFareBucket{{$parent.$index}}{{$index}}.$error.pattern 
														            || editForm.editFormATPCO.addonFareBucket{{$parent.$index}}{{$index}}.$error.maxlength && fare.action != 'Canceled'}"	
														            ng-required="vm.isRequired('addonFareBucket')" />
															</td>
										           			<td ng-click="vm.tdClick(workPackageSheet, fare, 'typeOfJourney', $event)" ng-class="{highlighted:fare.field['typeOfJourney']}">
										           				<select class="form-control" 
														             name="addonFareTypeOfJourney{{$parent.$index}}{{$index}}"
														             ng-required="vm.isRequired('addonFareTypeOfJourney')"
														             ng-class="{'must-fill': !editForm.editFormATPCO.addonFareTypeOfJourney{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
														             ng-model="fare.typeOfJourney" id="field_typeOfJourney"
														             ng-disabled="!vm.isEditable('addonFareTypeOfJourney') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"
														             ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
										           			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'footnote', $event)" ng-class="{highlighted:fare.field['footnote']}">
									               				<input type="text" class="form-control" name="addonFareFootnote{{$parent.$index}}{{$index}}" id="field_footnote"
										               					ng-maxlength="2"
									                					maxlength="2"
									                					ng-pattern="/^[a-zA-Z0-9]{1,2}$/"
									                					ng-keypress="vm.keypress($event, '^[a-zA-Z0-9]{1,2}$')"
									                					uppercase
															            ng-class="{'must-fill': editForm.editFormATPCO.addonFareFootnote{{$parent.$index}}{{$index}}.$error.required 
															            || editForm.editFormATPCO.addonFareFootnote{{$parent.$index}}{{$index}}.$error.pattern 
															            || editForm.editFormATPCO.addonFareFootnote{{$parent.$index}}{{$index}}.$error.maxlength  && fare.action != 'Canceled'}"																			            
															            ng-disabled="!vm.isEditable('addonFareFootnote') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
															            ng-required="vm.isRequired('addonFareFootnote')"
											                    		ng-model="fare.footnote1"/>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'zone', $event)" ng-class="{highlighted:fare.field['zone']}">
									               				<input type="text" class="form-control" name="addonFareZone{{$parent.$index}}{{$index}}" id="field_footnote"
															            ng-class="{'must-fill': editForm.editFormATPCO.addonFareZone{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-disabled="!vm.isEditable('addonFareZone') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) "
															            ng-required="vm.isRequired('addonFareZone')"
															            ng-maxlength="3"
									                					maxlength="3"
									                					ng-pattern="/^[0-9]{1,3}$/"
									                					ng-keypress="vm.keypress($event, '^[0-9]{1,3}$')"
											                    		ng-model="fare.zone"/>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'rtgno', $event)" ng-class="{highlighted:fare.field['rtgno']}">
									               				<input type="text" class="form-control" name="addonFareRtgno{{$parent.$index}}{{$index}}" id="field_bookingClass"
										                				ng-disabled="!vm.isEditable('addonFareRtgno') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
										                				ng-required="vm.isRequired('addonFareRtgno')" 
										                				ng-maxlength="4"
									                					maxlength="4"
									                					ng-pattern="/^[0-9]{1,4}$/"
									                					ng-keypress="vm.keypress($event, '^[0-9]{1,4}$')"
										                				ng-class="{'must-fill': editForm.editFormATPCO.addonFareRtgno{{$parent.$index}}{{$index}}.$error.required 
										                				|| editForm.editFormATPCO.addonFareRtgno{{$parent.$index}}{{$index}}.$error.pattern
										                				|| editForm.editFormATPCO.addonFareRtgno{{$parent.$index}}{{$index}}.$error.maxlength && fare.action != 'Canceled'}"																			            
															            ng-model="fare.rtgno"/>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'currency', $event)" ng-class="{highlighted:fare.field['currency']}">
										               			<span class="input-group">
																		<input type="text" class="form-control" name="addonFareCurrency{{$parent.$index}}{{$index}}" id="field_carrier"
												                    		ng-model="fare.currency" uppercase
												                    		ng-disabled="!vm.isEditable('addonFareCurrency') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
												                    		style="min-width:60px"
												                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareCurrency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled' }"											         		
																            ng-required="vm.isRequired('addonFareCurrency') && fare.action != 'Canceled'"
																            ng-focus="currency[$parent.$index][$index]=true" ng-blur="currency[$parent.$index][$index]=false; vm.checkCurrency(fare, 'currency');"/>
																		<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCurrency(fare, 'currency')" ng-class="{'poiv-none': !vm.isEditable('addonFareCurrency') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																			<i class="fa fa-folder"></i>
																		</span>
																	</span>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'amount', $event)" ng-class="{highlighted:fare.field['amount']}">
									               				<input type="text" class="form-control" name="addonFareAmount{{$parent.$index}}{{$index}}" id="field_amount"
										                				ng-disabled="!vm.isEditable('addonFareAmount') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) "
										                				ng-required="vm.isRequired('addonFareAmount')" 
										                				ng-maxlength="9"
									                					maxlength="9"
									                					ng-pattern="/^[0-9]{1,9}$/"
									                					ng-keypress="vm.keypress($event, '^[0-9]{1,9}$')"
										                				ng-class="{'must-fill': editForm.editFormATPCO.addonFareAmount{{$parent.$index}}{{$index}}.$error.required 
										                				|| editForm.editFormATPCO.addonFareAmount{{$parent.$index}}{{$index}}.$error.maxlength
										                				|| editForm.editFormATPCO.addonFareAmount{{$parent.$index}}{{$index}}.$error.pattern && fare.action != 'Canceled'}"																			            
															            ng-model="fare.amount"/>
									               			</td>
									               			<td></td>
									               			<td></td>
										               		
										               		<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelStart', $event)" ng-class="{highlighted:fare.field['travelStart']}" >
									               				<span class="input-group">
																	<input id="field_addonFareTravelStartDate" 
																		type="text"
																		name="addonFareTravelStartDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareTravelStartDate') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) "	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareTravelStartDate')"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareTravelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelStart" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareTravelStartDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareTravelStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareTravelStartDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelEnd', $event)" ng-class="{highlighted:fare.field['travelEnd']}">
									               				<span class="input-group">
																	<input id="field_addonFareTravelEndDate" 
																		type="text"
																		name="addonFareTravelEndDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareTravelEndDate') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareTravelEndDate')"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareTravelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelEnd" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareTravelEndDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareTravelEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareTravelEndDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) }">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'saleStart', $event)" ng-class="{highlighted:fare.field['saleStart']}">
									               				<span class="input-group">
																	<input id="field_addonFareSaleStartDate" 
																		type="text"
																		name="addonFareSaleStartDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareSaleStartDate') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareSaleStartDate')"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareSaleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.saleStart" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareSaleStartDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareSaleStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareSaleStartDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'saleEnd', $event)" ng-class="{highlighted:fare.field['saleEnd']}">
									               				<span class="input-group">
																	<input id="field_addonFareSaleEndDate" 
																		type="text"
																		name="addonFareSaleEndDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareSaleEndDate') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareSaleEndDate')"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareSaleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.saleEnd" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareSaleEndDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareSaleEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareSaleEndDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'comment', $event)" ng-class="{highlighted:fare.field['comment']}">
									               				<input type="text" class="form-control" name="addonFareComment{{$parent.$index}}{{$index}}" id="field_comment"
									               					ng-disabled="fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"
											                    		ng-model="fare.comment"/>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelComplete', $event)" ng-class="{highlighted:fare.field['travelComplete']}">
									               				<span class="input-group">
																	<input id="field_addonFareTravelComplete" 
																		type="text"
																		name="addonFareTravelComplete{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareTravelComplete') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareTravelComplete')"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareTravelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelComplete" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareTravelComplete'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareTravelComplete'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareTravelComplete') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			<td>
									               				<select class="form-control" name="addonFareTravelIndicator{{$index}}" id="field_travelIndicator"
										                				ng-disabled="!vm.isEditable('addonFareTravelIndicator') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"
										                				ng-required="vm.isRequired('addonFareTravelIndicator')"
											                    		ng-class="{'must-fill': !editForm.editFormATPCO.addonFareTravelIndicator{{$index}}.$valid && fare.action != 'Canceled'}"												                    		
											                    		ng-options="key as value for (key , value) in vm.travelCompleteIndicator"														             																		            														                    		
										                				ng-model="fare.travelCompleteIndicator"></select>
									               			</td>
														</tr>
													</tbody>
												</table>
											</div>
											<div class="clearfix">
												<div class="pull-left dataTables_info italic">
													* Field can not be empty.
												</div>
											</div>	
										</div>
									</div>
								
								</div>

								<div class="tab-pane" id="tabAtpco{{vm.workPackage.fareSheet.length+vm.workPackage.addonFareSheet.length}}" ng-class="{active:vm.currentTabFilingInstruction, 'poiv-none': vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}" ng-if="vm.workPackage.filingInstruction">
									
									<div class="box-header"></div>
									<div class="box-body mb1">
										<div class="form-group">
											<label>Comment</label>
											<wysiwyg-edit content="vm.commentStringFillingInstruction" config="vm.editorConfig"></wysiwyg-edit>
										</div>
										<div class="clearfix">
											<div class="pull-right">
												<button class="btn btn-default small btn-secondary" ng-click="vm.deleteCommentFillingInstruction()">Delete Comment</button>
												<button class="btn btn-default small btn-secondary" ng-click="vm.collapseCommentFillingInstruction()">Collapse Deleted Comment</button>
												<button class="btn btn-default small btn-secondary" ng-click="vm.expandCommentFillingInstruction()">Expand Deleted Comment</button>
												<button class="btn btn-default small btn-secondary" ng-click="vm.addCommentFillingInstruction()">Add Comment</button>
											</div>
										</div>		
									</div>
									<div class="box-detail box-comment">
										<div class="box-body">
							        		<div class="comment-container">
							        			<div class="comment-wrapper">
									    			<div ng-click="vm.selectCommentFillingInstruction(filingInstructionData)" ng-class="{'FIclicked': vm.tempFIC.indexOf(filingInstructionData) > -1}" ng-if="!filingInstructionData.isDeleted || !vm.isFilingInstructionCollapse" class="comment-list" ng-repeat="filingInstructionData in  vm.workPackage.filingInstructionData.slice().reverse() track by $index">
												    	<div class="clearfix">
												    		<div class="pull-left comment-detail">{{filingInstructionData.username}}</div>
												    		<div class="pull-right comment-detail">{{filingInstructionData.createdTime | date: 'short'}}</div>
												    	</div>
												    	<label> 
												    		<input type="checkbox" id="comment-message" name="comment-message" ng-model="filingInstructionData.isDeleted" disabled>
															<span data-ng-bind-html="trustAsHtml(filingInstructionData.comment)"></span>
														</label>
													</div>
									    		</div>
							        		</div>					        		
								    	</div>
									</div>							
							    </div>		
								
								<div class="tab-pane" id="tabAtpco{{vm.workPackage.fareSheet.length+vm.workPackage.addonFareSheet.length+1}}" ng-class="{active:vm.currentTabAttachment}" ng-if="vm.workPackage.attachment">
									<div class="action-btn-wrapper">
					     				<div class="col-md-12 text-right no-pad">
					     					<button ng-click="vm.addAttachment()" class="btn btn-primary" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Add</button>
					     				</div>
					     			</div>
									<div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Approval Reference</label>
						                  <input type="text" name="attachmentApprovalReference{{$index}}" class="form-control" 
						                  ng-model="vm.workPackage.attachmentApprovalReference" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
						                  <button ng-click="vm.generateTourCodeAttachment()" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Generate Tour Code</button>
						                </div>
						              </div>
						              
					     			<div class="col-md-12">
					     				<div class="text-center no-data" ng-if="!vm.workPackage.attachmentData || vm.workPackage.attachmentData.length == 0">No Attachment Available</div>							
						     			<div ng-repeat="attachment in vm.workPackage.attachmentData.slice().reverse() track by $index" class="form-repeat">
					       					<button ng-click="vm.removeAttachment(attachment)" class="bordered delete" ng-disabled="vm.workPackage.reviewLevel=='DISTRIBUTION'"><span class="glyphicon glyphicon-remove" ng-class="{'poiv-none': vm.workPackage.reviewLevel=='DISTRIBUTION'}"></span></button>
							       			<label class="user">{{attachment.username}} <span class="vseparator no-mar"></span> {{attachment.createdTime | date: 'short'}}</label>
							       			<div class="row mt1">
								        		<div class="col-md-6">
									      			<div class="form-group">
									      				<label>Comment</label>
									      				<textarea class="form-control" ng-model="attachment.comment" ng-disabled="attachment.isDeleted ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"></textarea>
									      			</div>
								        		</div>
								        		<div class="col-md-6">
								        			<div class="form-group file" ngf-drop ngf-change="vm.setFileAttachment($file, attachment)">
											            <label class="control-label" ng-if="attachment.fileName!=null">{{attachment.fileName}}</label>
											            <label class="control-label" ng-if="attachment.fileName==null">File Attachment</label>
											            <div>
											                <button type="button" class="btn btn-secondary" ng-click="vm.openFile(attachment.fileContentType, attachment.file)" ng-disabled="attachment.fileName==null">
											                    Open
											                </button>
											                <button type="button" ngf-select class="btn btn-secondary"
											                        ngf-change="vm.setFile($file, attachment)" ng-disabled="attachment.isDeleted||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
											                    Add file
											                </button>
										                    <div class="form-group mt1">
																<div class="checkbox-wrapper">
																	<label class="black" for="inOnly">
																		<input type="checkbox" id="inOnly" name="inOnly" ng-model="attachment.inOnly" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
																		Inter Office Notification
																	</label>
																	<label class="black" for="isDeleted">
																		<input type="checkbox" id="isDeleted" name="isDeleted" ng-model="attachment.isDeleted" disabled>
																		Is Deleted
																	</label>
																</div>
															</div>
											            </div>
											            <input type="hidden" class="form-control" name="file" id="field_file"
											                    ng-model="attachment.file"
											                    />
											            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType"
											                    ng-model="attachment.fileContentType" />
											        </div>
								        		</div>
								      		</div>
								     	</div>
								     </div>
								</div>
							
								<div class="tab-pane" id="tabAtpco{{vm.workPackage.fareSheet.length+vm.workPackage.addonFareSheet.length+2}}" ng-class="{active:vm.currentTabFilingDetail}" ng-if="vm.workPackage.fareSheet.length > 0 || vm.workPackage.addonFareSheet.length > 0">
									<div class="tab-content wp">
										<div class="clearfix">
											<div class="pull-left w20 ph5px">
												<div class="form-group">
													<div class="checkbox-wrapper">
														<label class="black">
															<input type="radio" name="radio1" ng-model="vm.workPackage.filingDetail.workUnitType" ng-change="vm.loadAll()" value="existing">
															Use Existing Work Unit
														</label>
													</div>
												</div>
												<div class="form-group">
													<div class="checkbox-wrapper">	
														<label class="black">
															<input type="radio" name="radio1" ng-model="vm.workPackage.filingDetail.workUnitType" ng-change="vm.loadAll()" value="new">
															Use New Work Unit
														</label>
													</div>
												</div>
											</div>
											<div class="pull-left w20 ph5px">
												<div class="form-group">
													<label>Work Unit ID</label>
													<input type="text" name="Work Unit ID" class="form-control" ng-model="vm.workPackage.filingDetail.workUnitId">																
												</div>
												<div class="form-group">
													<label>New Work Unit</label>
													<input type="text" name="New Work Unit" class="form-control" ng-model="vm.workPackage.filingDetail.workUnitId">																
												</div>
											</div>
											<div class="pull-left w20 ph5px">
												<div class="form-group">
													<label>Created Date</label>
													<select class="form-control" disabled="disabled" ng-model="vm.workPackage.filingDetail.workUnitId">
														<option></option>
														<option>Current</option>
													</select>
												</div>
												<div class="form-group">
													<label>Releaser Date (EST)</label>
													<input type="text" name="Releaser Date (EST)" class="form-control" ng-model="vm.workPackage.filingDetail.workUnitId">		
												</div>
											</div>
											<div class="pull-left w20 ph5px">
												<div class="form-group">
													<label>Organization</label>
													<input type="text" name="Organization" class="form-control" disabled="disabled">		
												</div>
												<div class="form-group">
													<div class="checkbox-wrapper">
														<label class="black">
															<input type="checkbox" name="" checked="checked">
															Exclusive Access
														</label>
														<label class="black">
															<input type="checkbox" name="" checked="checked" disabled="disabled">
															Ignore Errors
														</label>
													</div>
												</div>
											</div>
											<div class="pull-left w20 ph5px">
												<div class="button-group dropdown" style="margin-top: 28px;
												margin-left: 10px;">
													<button class="btn btn-secondary small">Action <i class="fa fa-caret-down"></i></button>
													<ul class="dropdown-menu" role="menu">
													    <li>
													    	<a href="#">A</a>
													    </li>
													    <li>
													    	<a href="#">B</a>
													    </li>
													</ul>
												</div>
											</div>
										</div>
										<div class="w60 ph5px">
											<div class="form-group">
												<label>Description</label>
												<input type="text" name="Description" class="form-control">	
											</div>
											<div class="form-group">
												<label>Email Notification</label>
												<input type="text" name="Email Notification" class="form-control" ng-model="vm.workPackage.filingDetail.email">	
											</div>											
										</div>
										<div class="clearfix mb1">
												<div class="pull-left w60 ph5px">
													<div class="form-group">
														<label>Release Instruction</label>
														<select class="form-control" ng-model="vm.workPackage.filingDetail.releaseInstruction" id="field_status">
															<option value="">Select Release Instruction</option>
											                <option value="Release Batches">Release Work Unit / Batch</option>
											                <option value="Create Batches">Do not Release Work Unit / Batch</option>
														</select>
													</div>
												</div>
												<div class="pull-left w40 ph5px">
													<div class="btn-wrapper-action text-right">
														<button class="btn btn-default small btn-secondary" ng-click="vm.addBatch()">Add Batch Number</button>
														<button class="btn btn-default small btn-secondary">Remove Batch Number</button>
													</div>												
												</div>
											</div>
										<div class="clearfix">
												<div class="pull-left w60 ph5px">
													<div class="box-detail">
									      				<div class="box-header">
															Tariffs :
														</div>
									      				<div class="box-body">
									      					<div class="table-wrapper">
																<div class="datatable-wrapper form-inline">
																	<div class="table-responsive">
																		<table class="table table-stripped table-bordered datatable" jq-slider>
																			<thead>
																				<tr role="row">
																					<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar Type</th>
																					<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar No</th>
																					<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar CD</th>
																					<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">CXR</th>
																				</tr>
																			</thead>
																			<tbody>
																				<tr role="row" class="datatable-row">
																					<td>A</td>
																					<td>B</td>
																					<td>C</td>
																					<td>D</td>
																				</tr>
																			</tbody>
																		</table>
																	</div>
																</div>
															</div>
															<!-- end of table wrapper -->
									      				</div>
									      			</div>
												</div>
												<div class="pull-left w40 ph5px">
													<div class="box-detail">
									      				<div class="box-header">
															Batch &amp; GFs Numbers :
														</div>
									      				<div class="box-body">
									      					<div class="table-wrapper">
																<div class="datatable-wrapper form-inline">
																	<div class="table-responsive">
																		<table class="table table-stripped table-bordered datatable" jq-slider>
																			<thead>
																				<tr role="row">
																					<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Batch No</th>
																					<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">GFs Refs</th>
																					<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">GFs Date</th>
																				</tr>
																			</thead>
																			<tbody>
																				<tr role="row" class="datatable-row">
																					<td>A</td>
																					<td>B</td>
																					<td>C</td>
																				</tr>
																			</tbody>
																		</table>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
							      	</div>
								</div>										
							</div>
						</div>
					</div>
				</div>
			</ng-form>
			
			<ng-form name="editFormDiscount" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'ATPCO' && vm.workPackage.type == 'DISCOUNT'">
				<div class="tab-wrapper">
				    <div class="clearfix tab-body">
					     <ul class="clearfix nav-responsive nav nav-tabs">
					          <li ng-if="vm.workPackage.discount" ng-class="{active:vm.currentDiscountTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.discountFareSheet track by $index">
					            <a ng-click="vm.selectDiscountTab($index);">Discount Fares : {{vm.workPackage.discountFareSheet[$index].discountFaresName}}</a>
					          </li>
					          <li ng-if="vm.workPackage.filingInstruction" ng-class="{active:vm.currentTabFilingInstruction}"><a ng-click="vm.selectOtherTab('filingInstruction')">Filing Instruction</a></li>
					          <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
					          <li ng-if="vm.workPackage.discountFareSheet.length > 0"  ng-class="{active:vm.currentTabFilingDetail}"><a ng-click="vm.selectOtherTab('filingDetail')">Filling Details</a></li>
					      </ul>
				      
				      
				    	<div class="tab-content">
				    	
				    		<div class="tab-pane" ng-class="{active:vm.currentDiscountTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.discountFareSheet track by $index">
					    		  <div class="pb1 mb1 bbgrey">
					    		  
						            <div class="clearfix">
						              <div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Description</label>
						                  <input type="text" name="discountFaresName{{$index}}" class="form-control"
						                  ng-class="{'must-fill': editForm.editFormDiscount.discountFaresName{{$index}}.$error.required}"
						                      ng-model="workPackageSheet.discountFaresName" 
						                      ng-required="vm.isRequired('discountFaresName')"  
						                      ng-disabled="!vm.isEditable('discountFaresName') || vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
						                </div>
						              </div>
						              <div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Approval Reference</label>
						                  <input type="text" name="discountApprovalReference{{$index}}" class="form-control" 
						                  ng-class="{'must-fill': editForm.editFormDiscount.discountApprovalReference{{$index}}.$error.required}"
						                        ng-model="workPackageSheet.approvalReference"
						                  ng-disabled="!vm.isEditable('discountApprovalReference') || vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
						                  ng-required="vm.isRequired('discountApprovalReference')">
						                  <button ng-click="vm.generateTourCode(workPackageSheet)" ng-disabled="vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Generate Tour Code</button>
						                </div>
						              </div>
						            </div>
						            
						            <div class="clearfix">
						              <div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Account Code</label>
						                  <input type="text" name="discountAccountCode{{$index}}" class="form-control" 
						                  ng-class="{'must-fill': editForm.editFormDiscount.discountAccountCode{{$index}}.$error.required}"
						                        ng-model="workPackageSheet.accountCode"
						                  ng-disabled="!vm.isEditable('discountAccountCode') || vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED|| vm.disabledField(vm.workPackage)'"
						                  ng-required="vm.isRequired('discountAccountCode')">
						                </div>
						              </div>
						              <div class="pull-left w50 two-column">
										<div class="form-group">
											<label>Version</label>
											<select class="form-control" ng-model="workPackageSheet.version" ng-change="vm.changeVersion(workPackageSheet, workPackageSheet.version)" ng-init="vm.changeVersion(workPackageSheet, 'current')">
												<option value='current'>Current</option>
												<option ng-repeat="version in workPackageSheet.fareVersion track by $index" value="{{$index}}">
													{{version.version}} - {{version.username}} - {{version.action}}
												</option>
											</select>
										</div>
									 </div>																						
						            </div>
						            
						            <div class="clearfix">
						              <div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Fare Type</label>
											<select class="form-control" name="discountFareType{{$index}}" ng-model="workPackageSheet.fareType" ng-class="{'must-fill': !editForm.editFormDiscount.discountFareType{{$index}}.$valid}"
												ng-required="vm.isRequired('discountFareType')" ng-disabled="!vm.isEditable('discountFareType') || vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
												<option ng-repeat="fare in vm.optionFare track by $index" value="{{fare.name}}">
													{{fare.code}} | {{fare.name}}
												</option>
											</select>								      				
						                </div>
						              </div>
						              <div class="pull-left w50 two-column">
						              </div>
						            </div>
						          
						          </div>
        					
        						 <!-- table details-->
						          <div class="table-wrapper">
						            <div class="datatable-wrapper form-inline">
						              <div class="clearfix">
						                <div class="pull-left">
						                  <div class="clearfix">
						                    <div class="pull-right datatable-button">
						                      <div class="button-group dropdown custom">
						                        <button class="btn btn-default small btn-secondary" ng-disabled="vm.workPackage.status=='WITHDRAWN' || vm.workPackage.status=='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Edit<i class="fa fa-caret-down" ng-class="{'poiv-none': (vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') || vm.workPackage.status == 'WITHDRAWN' || vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage) }"></i></button>
						                        <ul class="dropdown-menu custom" role="menu">
						                            <li>
												   		<a ng-click="vm.clearSelection(workPackageSheet)">Clear Selection</a>
												    </li>	
												    <li>
												    	<a ng-click="vm.fillDown(workPackageSheet)">Fill Down</a>
												    </li>	
												    <li>
											    		<a ng-click="vm.searchReplace(workPackageSheet)">Search/Replace</a>
											   		</li>
											   		<li>
											    		<a ng-click="vm.copySelectedFares(workPackageSheet, 'workorder-discount-fares')">Copy Selected Rows</a>
											   		 </li>
												    <li>
												    	<a ng-click="vm.addFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Add Rows</a>
												    </li>
												    <li>
												    	<a ng-click="vm.duplicateSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Duplicate Selected Rows</a>
												    </li>
												    <li>
												    	<a ng-click="vm.deleteSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Delete Selected Rows</a>
												    </li>
												    <li>
												    	<a ng-click="vm.pasteFares(workPackageSheet)">Paste</a>
												    </li>
						                        </ul>
						                      </div>													
						                      <button class="btn btn-default small btn-secondary" ngf-select ngf-change="vm.importFareDiscount($file)" ng-disabled="vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Import</button>
						                      <button class="btn btn-default small btn-secondary" ng-click="vm.exportFaresDiscount()" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Export</button>
						                      <button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.agent()" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Agents</button>
						                      <button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.ratesheetDiscount()" ng-disabled="vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Rate Sheet</button>
						                      <button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveUpFare(workPackageSheet)" ng-disabled="vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Move Up</button>
											  <button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveDownFare(workPackageSheet)" ng-disabled="vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Move Down</button> 
											</div>
						                  </div>
						                </div>
						              </div>
						              <div class="table-responsive">
						                <table class="table table-stripped table-bordered datatable" jq-slider>
						                  <thead>
						                    <tr role="row">
				                     		 <th>No</th>
				                              <th>Status</th>
				                              <th>
				                              	FBR Tariff Code
				                              	<div class="resize-div" style="min-width: 130px"></div>
				                              </th>
				                              <th>
				                              	Loc 1 Type
				                              	<div class="resize-div" style="min-width: 120px"></div>
				                              </th>		                	
				                              <th>Loc 1</th>
				                              <th>
				                              	Loc 2 Type
				                              	<div class="resize-div" style="min-width: 120px"></div>
				                              </th>
				                              <th>Loc 2</th>
				                              <th>Base FareCls</th>
				                              <th>Base Rule No</th>
				                              <th>Base Tariff Code</th>
				                              <th>
				                              	Calc Type
				                              	<div class="resize-div" style="min-width: 120px"></div>
				                              </th>
				                              <th>% of Base Fare</th>
				                              <th>Curr</th>
				                              <th>Specified Amount</th>
				                              <th>PAX Type</th>
				                              <th>
				                              	Fare Type
				                              	<div class="resize-div" style="min-width: 120px"></div>
				                              </th>
				                              <th>
				                              	Tkt Code
				                              	<div class="resize-div"></div>
				                              </th>
				                              <th>
				                              	Tkt Des
				                              	<div class="resize-div"></div>
				                              </th>
				                              <th>
				                              	Base Fare OW/RT
				                              	<div class="resize-div" style="min-width: 120px"></div>
				                              </th>
				                              <th>
				                              	Global
				                              	<div class="resize-div"></div>
				                              </th>
				                              <th>
				                              	Rtg No
				                              	<div class="resize-div"></div>
				                              </th>		               		
				                              <th>Rtg No Tarno</th>
				                              <th>New FareCls</th>	
				                              <th>
				                              	New OW/RT
				                              	<div class="resize-div" style="min-width: 120px"></div>
				                              </th>	 
				                              <th>New BkgCd</th>	 
				                              <th>Travel Start</th>	   
				                              <th>Travel End</th>	   
				                              <th>Sale Start</th>	   
				                              <th>Sale End</th>	   
				                              <th>
				                              	Comment
				                              	<div class="resize-div"></div>
				                              </th>	  
				                              <th>Travel Complete</th>	  
				                              <th>Travel Complete Indicator</th>	
						                    </tr>
						                  </thead>
						                  <tbody>
						                    <tr ng-click="vm.tbodyClick(workPackageSheet)" ng-repeat="fare in workPackageSheet.currentFares track by $index" role="row" class="datatable-row" ng-class="{'poiv-none':workPackageSheet.version != 'current', 'approved': fare.status == 'APPROVED', 'rejected': fare.status == 'REJECTED'}">
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'no', $event)" ng-class="{highlighted:fare.field['no']}">{{$index+1}}</td>
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'status', $event)" ng-class="{highlighted:fare.field['status']}">
						                        <select class="form-control inside-table" name="status{{$parent.$index}}{{$index}}" ng-model="fare.status" id="field_status" 
						                            ng-class="{'must-fill': !editForm.editFormDiscount.status{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"												         		
						                                  ng-disabled="!vm.isEditable('discountStatus') ||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
						                                  ng-required="vm.isRequired('discountStatus')"
						                                  ng-options="key as value for (key , value) in vm.status">
						                          </select>		
						                      </td>
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'tarcd', $event)" ng-class="{highlighted:fare.field['tarcd']}">
						                      <!--  <input type="text" class="form-control" name="discountTariffCode{{$parent.$index}}{{$index}}" id="field_farebasis"
						                                    ng-disabled="!vm.isEditable('discountTariffCode')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
						                                    ng-required="vm.isRequired('discountTariffCode') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountTariffCode{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.tarcd"/> -->
						                        <span class="input-group">
						                        <input type="text" class="form-control" name="discountTariffCode{{$parent.$index}}{{$index}}" id="field_farebasis"
								                    		ng-model="fare.tarcd"
								                    		ng-disabled="!vm.isEditable('discountTariffCode')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								                    		style="min-width:60px"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountTariffCode{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
												            ng-required="vm.isRequired('discountTariffCode') && fare.action != 'Canceled'"
												            ng-focus="tarcd[$parent.$index][$index]=true" ng-blur="tarcd[$parent.$index][$index]=false; vm.checkTariffDiscount(fare, 'tarcd', 'tarcd');"/>
														<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectTariff(fare, 'tarcd')" ng-class="{'poiv-none': !vm.isEditable('discountTariffCode')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-folder"></i>
														</span>      
												</span> 	
						                      </td>																
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'loc1Type', $event)" ng-class="{highlighted:fare.field['loc1Type']}">
						                       	 <select class="form-control inside-table" 
						                                   name="discountLoc1Type{{$parent.$index}}{{$index}}"
						                                   ng-required="vm.isRequired('discountLoc1Type')"
						                                   ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc1Type{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
						                                   ng-model="fare.loc1Type" id="field_discountLoc1Type"
						                                   ng-disabled="!vm.isEditable('discountLoc1Type')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
						                                   ng-options="key as value for (key , value) in vm.locationType"></select>
						                      </td>
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'loc1', $event)" ng-class="{highlighted:fare.field['loc1']}">						                      
						                     		 <span class="input-group">
														<input type="text" class="form-control" 
															name="discountLoc1{{$parent.$index}}{{$index}}" 
								                    		ng-model="fare.loc1"
								                    		ng-disabled="!vm.isEditable('discountLoc1')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								                    		style="min-width:60px"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountLoc1{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
												            ng-required="vm.isRequired('discountLoc1') && fare.action != 'Canceled'"
												            ng-focus="discountLoc1[$parent.$index][$index]=true" 
												            ng-blur="discountLoc1[$parent.$index][$index]=false; vm.checkLoc(fare, 'loc1', fare.loc1Type);"/>
														<span ng-if="fare.loc1Type == 'C' || fare.loc1Type == 'N'" class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCityATPCODiscount(fare, 'loc1')" ng-class="{'poiv-none': !vm.isEditable('discountLoc1')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-folder"></i>
														</span>
														<span ng-if="fare.loc1Type == 'S'" class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectState(fare, 'loc1')" ng-class="{'poiv-none': !vm.isEditable('discountLoc1')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-folder"></i>
														</span>
														<span ng-if="fare.loc1Type == 'G'" class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCityGroup(fare, 'loc1')" ng-class="{'poiv-none': !vm.isEditable('discountLoc1')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-folder"></i>
														</span>
													</span>
						                      </td>
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'loc2Type', $event)" ng-class="{highlighted:fare.field['loc2Type']}">
						                         <select class="form-control inside-table" 
						                                   name="discountLoc2Type{{$parent.$index}}{{$index}}"
						                                   ng-required="vm.isRequired('discountLoc1Type')"
						                                   ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc2Type{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
						                                   ng-model="fare.loc2Type" id="field_discountLoc2Type"
						                                   ng-disabled="!vm.isEditable('discountLoc2Type')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'"
						                                   ng-click="$event.stopPropagation()"
						                                   ng-options="key as value for (key , value) in vm.locationType"></select>
						                      </td>
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'loc2', $event)" ng-class="{highlighted:fare.field['loc2']}">
						                      		<span class="input-group">
														<input type="text" class="form-control" 
															name="discountLoc2{{$parent.$index}}{{$index}}" 
								                    		ng-model="fare.loc2"
								                    		ng-disabled="!vm.isEditable('discountLoc2')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								                    		style="min-width:60px"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountLoc2{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
												            ng-required="vm.isRequired('discountLoc2') && fare.action != 'Canceled'"
												            ng-focus="discountLoc2[$parent.$index][$index]=true" 
												            ng-blur="discountLoc2[$parent.$index][$index]=false; vm.checkLoc(fare, 'loc2', fare.loc2Type);"/>
														<span ng-if="fare.loc2Type == 'C' || fare.loc2Type == 'N'" class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCityATPCODiscount(fare, 'loc2')" ng-class="{'poiv-none': !vm.isEditable('discountLoc2')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-folder"></i>
														</span>
														<span ng-if="fare.loc2Type == 'S'" class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectState(fare, 'loc2')" ng-class="{'poiv-none': !vm.isEditable('discountLoc2')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-folder"></i>
														</span>
														<span ng-if="fare.loc2Type == 'G'" class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCityGroup(fare, 'loc2')" ng-class="{'poiv-none': !vm.isEditable('discountLoc2')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-folder"></i>
														</span>
													</span>
						                      </td>
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'baseFareBasis', $event)" ng-class="{highlighted:fare.field['baseFareBasis']}">
						                         <input type="text" class="form-control" name="discountBaseFareBasis{{$parent.$index}}{{$index}}" id="field_baseFareBasis" 
						                         uppercase
						                         ng-pattern="/^[a-zA-Z0-9*]*$/"
						                         maxlength="8"
									             ng-maxlength="8"
						                                    ng-disabled="!vm.isEditable('discountBaseFareBasis')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
						                                    ng-required="vm.isRequired('discountBaseFareBasis') && fare.action != 'Canceled'"  
						                                    ng-class="{'must-fill':editFormDiscount.discountBaseFareBasis{{$parent.$index}}{{$index}}.$error.required || 
										                				editForm.editFormDiscount.discountBaseFareBasis{{$parent.$index}}{{$index}}.$error.maxlength || 
										                				editForm.editFormDiscount.discountBaseFareBasis{{$parent.$index}}{{$index}}.$error.pattern}"		
						                                      ng-model="fare.baseFareBasis"/>
						                      </td>
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'baseRuleNo', $event)" ng-class="{highlighted:fare.field['baseRuleNo']}">
						                        <input type="text" class="form-control" name="discountBaseRuleno{{$parent.$index}}{{$index}}" id="field_origin" 
						                        ng-maxlength="4"
							               						uppercase
									                			maxlength="4"
									                			ng-pattern="/^[a-zA-Z0-9]{1,4}$/"
						                                    ng-disabled="!vm.isEditable('discountBaseRuleno')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
						                                    ng-required="vm.isRequired('discountBaseRuleno') && fare.action != 'Canceled'"  
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountBaseRuleno{{$parent.$index}}{{$index}}.$error.required ||
								                					editForm.editFormDiscount.discountBaseRuleno{{$parent.$index}}{{$index}}.$error.maxlength || 
										                			editForm.editFormDiscount.discountBaseRuleno{{$parent.$index}}{{$index}}.$error.pattern
										                		}"	
						                                      ng-model="fare.baseRuleNo"/>
						                      </td>
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'baseTarcd', $event)" ng-class="{highlighted:fare.field['baseTarcd']}">
						                         <input type="text" class="form-control" name="discountBaseTariffCode{{$parent.$index}}{{$index}}" id="field_farebasis"
						                                    ng-disabled="!vm.isEditable('discountBaseTariffCode')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
						                                    ng-required="vm.isRequired('discountBaseTariffCode') && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountBaseTariffCode{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.baseTarcd"/>	
						                      </td>	
						                      <td ng-click="vm.tdClick(workPackageSheet, fare, 'calcType', $event)" ng-class="{highlighted:fare.field['calcType']}">
						                         <select class="form-control inside-table" 
						                                 name="discountCalcType{{$parent.$index}}{{$index}}"
						                                 ng-required="vm.isRequired('discountCalcType', fare)"
						                                 ng-class="{'must-fill': !editForm.editFormDiscount.discountCalcType{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
						                                 ng-model="fare.calcType" id="discountCalcType"
						                                 ng-disabled="!vm.isEditable('discountCalcType')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
						                                 ng-options="key as value for (key , value) in vm.calculationType"></select>
						                      </td>
						                      	<td ng-click="vm.tdClick(workPackageSheet, fare, 'percentBaseFare', $event)" ng-class="{highlighted:fare.field['percentBaseFare']}">
						                           <input type="text" class="form-control" name="discountPercentageOfBaseFare{{$parent.$index}}{{$index}}"
						                                    ng-disabled="!vm.isEditable('discountPercentageOfBaseFare', fare)|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
						                                    ng-required="vm.isRequired('discountPercentageOfBaseFare', fare) && fare.action != 'Canceled'" 
						                                    ng-class="{'must-fill': editForm.editFormDiscount.discountPercentageOfBaseFare{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
						                                      ng-model="fare.percentBaseFare"/>	
				                            	</td>
					                          <td ng-click="vm.tdClick(workPackageSheet, fare, 'currency', $event)" ng-class="{highlighted:fare.field['currency']}">
					                          		<span class="input-group">
														<input type="text" class="form-control" name="discountFareCurrency{{$parent.$index}}{{$index}}" id="field_carrier"
								                    		ng-model="fare.currency"
								                    		ng-disabled="!vm.isEditable('discountFareCurrency', fare)|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								                    		style="min-width:120px"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountFareCurrency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         										                    		
												            ng-required="vm.isRequired('discountFareCurrency', fare) && fare.action != 'Canceled'"
												            ng-focus="currency[$parent.$index][$index]=true" ng-blur="currency[$parent.$index][$index]=false; vm.checkCurrency(fare, 'currency');"/>
														<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCurrency(fare, 'currency')" ng-class="{'poiv-none': !vm.isEditable('discountFareCurrency')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-folder"></i>
														</span>
													</span>					                          	
					                            </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'discountSpecifiedAmount', $event)" ng-class="{highlighted:fare.field['discountSpecifiedAmount']}">
				                                <input type="text" class="form-control" name="discountSpecifiedAmount{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountSpecifiedAmount', fare)|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-required="vm.isRequired('discountSpecifiedAmount', fare)" 
				                                    ng-class="{'must-fill': editForm.editFormDiscount.discountSpecifiedAmount{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
				                                      ng-model="fare.discountSpecifiedAmount"/>	
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'passengerType', $event)" ng-class="{highlighted:fare.field['passengerType']}">
				                              		<span class="input-group">
														<input type="text" class="form-control" name="discountPaxType{{$parent.$index}}{{$index}}" id="field_carrier"
								                    		ng-model="fare.passengerType"
								                    		ng-disabled="!vm.isEditable('discountPaxType')|| fare.status =='APPROVED' || fare.status =='REJECTED'"
								                    		style="min-width:60px"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountPaxType{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
												            ng-required="vm.isRequired('discountPaxType') && fare.action != 'Canceled'"
												            ng-focus="passengerType[$parent.$index][$index]=true" ng-blur="passengerType[$parent.$index][$index]=false; vm.checkpassengerType(fare, 'passengerType');"/>
														<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectPax(fare, 'passengerType')" ng-class="{'poiv-none': !vm.isEditable('discountPaxType')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-folder"></i>
														</span>
													</span>	
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'fareType', $event)" ng-class="{highlighted:fare.field['fareType']}">
				                                   <select class="form-control inside-table" name="discountFareFareType{{$parent.$index}}{{$index}}" ng-model="fare.fareType" 
				                                   ng-class="{'must-fill': !editForm.editFormDiscount.discountFareFareType{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"
														ng-required="vm.isRequired('discountFareFareType', fare)" ng-disabled="!vm.isEditable('discountFareFareType', fare)|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
														<option ng-repeat="fare in vm.atpcoFareTypes track by $index" value="{{fare.typeCode}}">
															{{fare.typeCode}}  {{fare.definition}}
														</option>
													</select>
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'ticketCode', $event)" ng-class="{highlighted:fare.field['ticketCode']}">
				                                <input type="text" class="form-control" name="discountTicketCode{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountTicketCode')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-maxlength="10"
				                                    ng-required="vm.isRequired('discountTicketCode') && fare.action != 'Canceled'" 
				                                    ng-class="{'must-fill': (editForm.editFormDiscount.discountTicketCode{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled') || editForm.editFormDiscount.discountTicketCode{{$parent.$index}}{{$index}}.$invalid}"	
				                                      ng-model="fare.ticketCode"/>
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'ticketDesignator', $event)" ng-class="{highlighted:fare.field['ticketDesignator']}">
				                                <input type="text" class="form-control" name="discountTicketDesignator{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountTicketDesignator')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-maxlength="10"
				                                    ng-required="vm.isRequired('discountTicketDesignator') && fare.action != 'Canceled'" 
				                                    ng-class="{'must-fill': (editForm.editFormDiscount.discountTicketDesignator{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled') || editForm.editFormDiscount.discountTicketDesignator{{$parent.$index}}{{$index}}.$invalid}"	
				                                      ng-model="fare.ticketDesignator"/>	
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'typeOfJourney', $event)" ng-class="{highlighted:fare.field['typeOfJourney']}">
				                                <select class="form-control inside-table" 
				                                 name="discountBaseFareOwRt{{$parent.$index}}{{$index}}"
				                                 ng-required="vm.isRequired('discountBaseFareOwRt')"
				                                 ng-class="{'must-fill': !editForm.editFormDiscount.discountBaseFareOwRt{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
				                                 ng-model="fare.typeOfJourney"
				                                 ng-disabled="!vm.isEditable('discountBaseFareOwRt')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                 ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
				                              </td> 
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'global', $event)" ng-class="{highlighted:fare.field['global']}">
				                                <input type="text" class="form-control" name="discountGlobal{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountGlobal')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-required="vm.isRequired('discountGlobal') && fare.action != 'Canceled'" 
				                                    ng-class="{'must-fill': editForm.editFormDiscount.discountGlobal{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
				                                      ng-model="fare.global"/>		
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'rtgno', $event)" ng-class="{highlighted:fare.field['rtgno']}">
				                                <input type="text" class="form-control" name="discountRtgno{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountRtgno')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-required="vm.isRequired('discountRtgno') && fare.action != 'Canceled'" 
				                                    ng-class="{'must-fill': editForm.editFormDiscount.discountRtgno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
				                                      ng-model="fare.rtgno"/>		
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'rtgnoTarno', $event)" ng-class="{highlighted:fare.field['rtgnoTarno']}">
				                                 <input type="text" class="form-control" name="discountRtgnoTarno{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountRtgnoTarno')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-required="vm.isRequired('discountRtgnoTarno') && fare.action != 'Canceled'" 
				                                    ng-class="{'must-fill': editForm.editFormDiscount.discountRtgnoTarno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
				                                      ng-model="fare.rtgnoTarno"/>		
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'newFareBasis', $event)" ng-class="{highlighted:fare.field['newFareBasis']}">
				                                <input type="text" class="form-control" name="discountNewFarebasis{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountNewFarebasis')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-required="vm.isRequired('discountNewFarebasis') && fare.action != 'Canceled'" 
				                                    ng-class="{'must-fill': editForm.editFormDiscount.discountNewFarebasis{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
				                                      ng-model="fare.newFareBasis"/>	
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'newTypeOfJourney', $event)" ng-class="{highlighted:fare.field['newTypeOfJourney']}">
				                                <select class="form-control inside-table" 
				                                 name="discountNewBaseFareOwRt{{$parent.$index}}{{$index}}"
				                                 ng-required="vm.isRequired('discountNewBaseFareOwRt')"
				                                 ng-class="{'must-fill': !editForm.editFormDiscount.discountNewBaseFareOwRt{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
				                                 ng-model="fare.newTypeOfJourney"
				                                 ng-disabled="!vm.isEditable('discountNewBaseFareOwRt')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                 ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'newBookingCode', $event)" ng-class="{highlighted:fare.field['newBookingCode']}">
				                                <input type="text" class="form-control" name="discountNewBookingCode{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountNewBookingCode')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-required="vm.isRequired('discountNewBookingCode') && fare.action != 'Canceled'" 
				                                    ng-class="{'must-fill': editForm.editFormDiscount.discountNewBookingCode{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
				                                      ng-model="fare.newBookingCode"/>
				                              </td>                            
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'travelStart', $event)" ng-class="{highlighted:fare.field['travelStart']}">
						               				<span class="input-group">
														<input id="field_startDate" 
															type="text"
															name="discountTravelStartDate{{$parent.$index}}{{$index}}" id="field_discountTravelStartDate"
							                				ng-disabled="!vm.isEditable('discountTravelStartDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
							                				class="form-control input-date"					                				
							                				ng-required="vm.isRequired('discountTravelStartDate')"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountTravelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
												            ng-model="fare.travelStart" 
												            datetime-picker="{{dateformat}}" 
												            enable-time="false"
												            is-open="vm.datePickerOpenStatus['discountTravelStartDate'+$parent.$index+''+$index]">
														<span ng-click="vm.openCalendar('discountTravelStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('discountTravelStartDate')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-calendar"></i>
														</span>
													</span>
						               		  </td>
											  <td ng-click="vm.tdClick(workPackageSheet, fare, 'travelEnd', $event)" ng-class="{highlighted:fare.field['travelEnd']}">
						               				<span class="input-group">
														<input id="field_startDate" 
															type="text"
															name="discountTravelEndDate{{$parent.$index}}{{$index}}" id="field_discountTravelEndDate"
							                				ng-disabled="!vm.isEditable('discountTravelEndDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
							                				class="form-control input-date"					                				
							                				ng-required="vm.isRequired('discountTravelEndDate')"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountTravelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
												            ng-model="fare.travelEnd" 
												            datetime-picker="{{dateformat}}" 
												            enable-time="false"
												            is-open="vm.datePickerOpenStatus['discountTravelEndDate'+$parent.$index+''+$index]">
														<span ng-click="vm.openCalendar('discountTravelEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('discountTravelEndDate')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-calendar"></i>
														</span>
													</span>
						               		  </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'saleStart', $event)" ng-class="{highlighted:fare.field['saleStart']}">
						               				<span class="input-group">
														<input id="field_startDate" 
															type="text"
															name="discountSaleStartDate{{$parent.$index}}{{$index}}" id="field_discountSaleStartDate"
							                				ng-disabled="!vm.isEditable('discountSaleStartDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
							                				class="form-control input-date"					                				
							                				ng-required="vm.isRequired('discountSaleStartDate')"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountSaleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
												            ng-model="fare.saleStart" 
												            datetime-picker="{{dateformat}}" 
												            enable-time="false"
												            is-open="vm.datePickerOpenStatus['discountSaleStartDate'+$parent.$index+''+$index]">
														<span ng-click="vm.openCalendar('discountSaleStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('discountSaleStartDate')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-calendar"></i>
														</span>
													</span>
						               		  </td>
						               		  <td ng-click="vm.tdClick(workPackageSheet, fare, 'saleEnd', $event)" ng-class="{highlighted:fare.field['saleEnd']}">
						               				<span class="input-group">
														<input id="field_startDate" 
															type="text"
															name="discountSaleEndDate{{$parent.$index}}{{$index}}" id="field_discountSaleEndDate"
							                				ng-disabled="!vm.isEditable('discountSaleEndDate')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
							                				class="form-control input-date"					                				
							                				ng-required="vm.isRequired('discountSaleEndDate')"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountSaleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
												            ng-model="fare.saleEnd" 
												            datetime-picker="{{dateformat}}" 
												            enable-time="false"
												            is-open="vm.datePickerOpenStatus['discountSaleEndDate'+$parent.$index+''+$index]">
														<span ng-click="vm.openCalendar('discountSaleEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('discountSaleEndDate')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-calendar"></i>
														</span>
													</span>
						               		  </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'comment', $event)" ng-class="{highlighted:fare.field['comment']}">
				                                 <input type="text" class="form-control" name="discountComment{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountComment')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-click="$event.stopPropagation()"
				                                    ng-required="vm.isRequired('discountComment') && fare.action != 'Canceled'" 
				                                    ng-class="{'must-fill': editForm.editFormDiscount.discountComment{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
				                                      ng-model="fare.comment"/>	
				                              </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'travelComplete', $event)" ng-class="{highlighted:fare.field['travelComplete']}">
						               				<span class="input-group">
														<input id="field_startDate" 
															type="text"
															name="discountTravelComplete{{$parent.$index}}{{$index}}" id="field_discountTravelComplete"
							                				ng-disabled="!vm.isEditable('discountTravelComplete')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
							                				class="form-control input-date"					                				
							                				ng-required="vm.isRequired('discountTravelComplete')"
								                    		ng-class="{'must-fill': editForm.editFormDiscount.discountTravelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
												            ng-model="fare.travelComplete" 
												            datetime-picker="{{dateformat}}" 
												            enable-time="false"
												            is-open="vm.datePickerOpenStatus['discountTravelComplete'+$parent.$index+''+$index]">
														<span ng-click="vm.openCalendar('discountTravelComplete'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('discountTravelComplete')|| fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
															<i class="fa fa-calendar"></i>
														</span>
													</span>
						               		  </td>
				                              <td ng-click="vm.tdClick(workPackageSheet, fare, 'travelCompleteIndicator', $event)" ng-class="{highlighted:fare.field['travelCompleteIndicator']}">
				                                <input type="text" class="form-control" name="discountTravelCompleteIndicator{{$parent.$index}}{{$index}}"
				                                    ng-disabled="!vm.isEditable('discountTravelCompleteIndicator')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
				                                    ng-required="vm.isRequired('discountTravelCompleteIndicator') && fare.action != 'Canceled'" 
				                                    ng-class="{'must-fill': editForm.editFormDiscount.discountTravelCompleteIndicator{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
				                                      ng-model="fare.travelCompleteIndicator"/>	
				                              </td>
						                    </tr>
						                    <tr class="datatable-action{{$index}}" ng-show="vm.discountFaresActionButton[$index]" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
						                      <td colspan="18" class="">
						                        <div class="btn btn-app" ng-click="vm.deleteDiscountFaresSelected($index)">
													<i class="fa fa-trash"></i>Delete
												</div>
												<div class="btn btn-app" ng-click="vm.moveUpDiscountFare($index)">
													<i class="fa fa-level-up"></i>Move Up
												</div>
												<div class="btn btn-app" ng-click="vm.moveDownFare($index)">
													<i class="fa fa-level-down"></i>Move Down
												</div>	
												<div class="btn btn-app">
													<i class="fa fa-stack-exchange"></i>Derived Fares
												</div>
						                      </td>
						                    </tr>
						                  </tbody>
						                </table>
						              </div>
						            </div>
						          </div>
						        						 
        					</div>
        					
        					<div class="tab-pane" ng-class="{active:vm.currentTabFilingInstruction, 'poiv-none' : vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}" ng-if="vm.workPackage.filingInstruction">
					       		<div class="box-header"></div>
								<div class="box-body mb1">
									<div class="form-group">
										<label>Comment</label>
										<wysiwyg-edit content="vm.commentStringFillingInstruction" config="vm.editorConfig"></wysiwyg-edit>
									</div>
									<div class="clearfix">
										<div class="pull-right">
											<button class="btn btn-default small btn-secondary" ng-click="vm.deleteCommentFillingInstruction()">Delete Comment</button>
												<button class="btn btn-default small btn-secondary" ng-click="vm.collapseCommentFillingInstruction()">Collapse Deleted Comment</button>
												<button class="btn btn-default small btn-secondary" ng-click="vm.expandCommentFillingInstruction()">Expand Deleted Comment</button>
												<button class="btn btn-default small btn-secondary" ng-click="vm.addCommentFillingInstruction()">Add Comment</button>
										</div>
									</div>		
								</div>
								<div class="box-detail box-comment">
									<div class="box-body">
						        		<div class="comment-container">
						        			<div class="comment-wrapper">
								    			<div ng-click="vm.selectCommentFillingInstruction(filingInstructionData)" ng-class="{'FIclicked': vm.tempFIC.indexOf(filingInstructionData) > -1}" class="comment-list" ng-if="!filingInstructionData.isDeleted || !vm.isFilingInstructionCollapse" ng-repeat="filingInstructionData in  vm.workPackage.filingInstructionData.slice().reverse() track by $index">
											    	<div class="clearfix">
											    		<div class="pull-left comment-detail">{{filingInstructionData.username}}</div>
											    		<div class="pull-right comment-detail">{{filingInstructionData.createdTime | date: 'short'}}</div>
											    	</div>
											    	<label> 
											    		<input type="checkbox" id="comment-message" name="comment-message" ng-model="filingInstructionData.isDeleted" disabled>
														<span data-ng-bind-html="trustAsHtml(filingInstructionData.comment)"></span>
													</label>
												</div>
								    		</div>
						        		</div>					        		
							    	</div>
								</div>	
					        </div>
					        
					        <div class="tab-pane" ng-class="{active:vm.currentTabAttachment}" ng-if="vm.workPackage.attachment">
				            	<div class="action-btn-wrapper">
					     				<div class="col-md-12 text-right no-pad">
					     					<button ng-click="vm.addAttachment()" class="btn btn-primary" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Add</button>
					     				</div>
					     			</div>
									<div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Approval Reference</label>
						                  <input type="text" name="attachmentApprovalReference{{$index}}" class="form-control" 
						                  ng-model="vm.workPackage.attachmentApprovalReference" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
						                  <button ng-click="vm.generateTourCodeAttachment()" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Generate Tour Code</button>
						                </div>
						              </div>
						              
					     			<div class="col-md-12">
					     				<div class="text-center no-data" ng-if="!vm.workPackage.attachmentData || vm.workPackage.attachmentData.length == 0">No Attachment Available</div>							
						     			<div ng-repeat="attachment in vm.workPackage.attachmentData.slice().reverse() track by $index" class="form-repeat">
					       					<button ng-click="vm.removeAttachment(attachment)" class="bordered delete" ng-disabled="vm.workPackage.reviewLevel=='DISTRIBUTION'"><span class="glyphicon glyphicon-remove" ng-class="{'poiv-none': vm.workPackage.reviewLevel=='DISTRIBUTION'}"></span></button>
							       			<label class="user">{{attachment.username}} <span class="vseparator no-mar"></span> {{attachment.createdTime | date: 'short'}}</label>
							       			<div class="row mt1">
								        		<div class="col-md-6">
									      			<div class="form-group">
									      				<label>Comment</label>
									      				<textarea class="form-control" ng-model="attachment.comment" ng-disabled="attachment.isDeleted ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"></textarea>
									      			</div>
								        		</div>
								        		<div class="col-md-6">
								        			<div class="form-group file" ngf-drop ngf-change="vm.setFileAttachment($file, attachment)">
											            <label class="control-label" ng-if="attachment.fileName!=null">{{attachment.fileName}}</label>
											            <label class="control-label" ng-if="attachment.fileName==null">File Attachment</label>
											            <div>
											                <button type="button" class="btn btn-secondary" ng-click="vm.openFile(attachment.fileContentType, attachment.file)" ng-disabled="attachment.fileName==null">
											                    Open
											                </button>
											                <button type="button" ngf-select class="btn btn-secondary"
											                        ngf-change="vm.setFile($file, attachment)" ng-disabled="attachment.isDeleted||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
											                    Add file
											                </button>
										                    <div class="form-group mt1">
																<div class="checkbox-wrapper">
																	<label class="black" for="inOnly">
																		<input type="checkbox" id="inOnly" name="inOnly" ng-model="attachment.inOnly" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
																		Inter Office Notification
																	</label>
																	<label class="black" for="isDeleted">
																		<input type="checkbox" id="isDeleted" name="isDeleted" ng-model="attachment.isDeleted" disabled>
																		Is Deleted
																	</label>
																</div>
															</div>
											            </div>
											            <input type="hidden" class="form-control" name="file" id="field_file"
											                    ng-model="attachment.file"
											                    />
											            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType"
											                    ng-model="attachment.fileContentType" />
											        </div>
								        		</div>
								      		</div>
								     	</div>
								     </div>
							</div>
					        
					        <div class="tab-pane" ng-class="{active:vm.currentTabFilingDetail}" ng-if="vm.workPackage.discountFareSheet.length > 0" >
			          	
								<div class="tab-content wp">
								<div class="clearfix">
									<div class="pull-left w20 ph5px">
										<div class="form-group">
											<div class="checkbox-wrapper">
												<label class="black">
													<input type="radio" name="radio1" ng-model="vm.workPackage.filingDetail.workUnitType" ng-change="vm.loadAll()" value="existing">
													Use Existing Work Unit
												</label>
											</div>
										</div>
										<div class="form-group">
											<div class="checkbox-wrapper">	
												<label class="black">
													<input type="radio" name="radio1" ng-model="vm.workPackage.filingDetail.workUnitType" ng-change="vm.loadAll()" value="new">
													Use New Work Unit
												</label>
											</div>
										</div>
									</div>
									<div class="pull-left w20 ph5px">
										<div class="form-group">
											<label>Work Unit ID</label>
											<input type="text" name="Work Unit ID" class="form-control" ng-model="vm.workPackage.filingDetail.workUnitId">																
										</div>
										<div class="form-group">
											<label>New Work Unit</label>
											<input type="text" name="New Work Unit" class="form-control" ng-model="vm.workPackage.filingDetail.workUnitId">																
										</div>
									</div>
									<div class="pull-left w20 ph5px">
										<div class="form-group">
											<label>Created Date</label>
											<select class="form-control" disabled="disabled" ng-model="vm.workPackage.filingDetail.workUnitId">
												<option></option>
												<option>Current</option>
											</select>
										</div>
										<div class="form-group">
											<label>Releaser Date (EST)</label>
											<input type="text" name="Releaser Date (EST)" class="form-control" ng-model="vm.workPackage.filingDetail.workUnitId">		
										</div>
									</div>
									<div class="pull-left w20 ph5px">
										<div class="form-group">
											<label>Organization</label>
											<input type="text" name="Organization" class="form-control" disabled="disabled">		
										</div>
										<div class="form-group">
											<div class="checkbox-wrapper">
												<label class="black">
													<input type="checkbox" name="" checked="checked">
													Exclusive Access
												</label>
												<label class="black">
													<input type="checkbox" name="" checked="checked" disabled="disabled">
													Ignore Errors
												</label>
											</div>
										</div>
									</div>
									<div class="pull-left w20 ph5px">
										<div class="button-group dropdown" style="margin-top: 28px; margin-left: 10px;">
											<button class="btn btn-secondary small">Action <i class="fa fa-caret-down"></i></button>
											<ul class="dropdown-menu" role="menu">
											    <li>
											    	<a href="#">A</a>
											    </li>
											    <li>
											    	<a href="#">B</a>
											    </li>
											</ul>
										</div>
									</div>
								</div>
								<div class="w60 ph5px">
									<div class="form-group">
										<label>Description</label>
										<input type="text" name="Description" class="form-control">	
									</div>
									<div class="form-group">
										<label>Email Notification</label>
										<input type="text" name="Email Notification" class="form-control" ng-model="vm.workPackage.filingDetail.email">	
									</div>											
								</div>
								<div class="clearfix mb1">
										<div class="pull-left w60 ph5px">
											<div class="form-group">
												<label>Release Instruction</label>
												<select class="form-control" ng-model="vm.workPackage.filingDetail.releaseInstruction" id="field_status">
													<option value="">Select Release Instruction</option>
									                <option value="Release Batches">Release Work Unit / Batch</option>
									                <option value="Create Batches">Do not Release Work Unit / Batch</option>
												</select>
											</div>
										</div>
										<div class="pull-left w40 ph5px">
											<div class="btn-wrapper-action text-right">
												<button class="btn btn-default small btn-secondary" ng-click="vm.addBatch()">Add Batch Number</button>
												<button class="btn btn-default small btn-secondary">Remove Batch Number</button>
											</div>												
										</div>
									</div>
								<div class="clearfix">
										<div class="pull-left w60 ph5px">
											<div class="box-detail">
							      				<div class="box-header">
													Tariffs :
												</div>
							      				<div class="box-body">
							      					<div class="table-wrapper">
														<div class="datatable-wrapper form-inline">
															<div class="table-responsive">
																<table class="table table-stripped table-bordered datatable" jq-slider>
																	<thead>
																		<tr role="row">
																			<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar Type</th>
																			<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar No</th>
																			<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar CD</th>
																			<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">CXR</th>
																		</tr>
																	</thead>
																	<tbody>
																		<tr role="row" class="datatable-row">
																			<td>A</td>
																			<td>B</td>
																			<td>C</td>
																			<td>D</td>
																		</tr>
																	</tbody>
																</table>
															</div>
														</div>
													</div>
													<!-- end of table wrapper -->
							      				</div>
							      			</div>
										</div>
										<div class="pull-left w40 ph5px">
											<div class="box-detail">
							      				<div class="box-header">
													Batch &amp; GFs Numbers :
												</div>
							      				<div class="box-body">
							      					<div class="table-wrapper">
														<div class="datatable-wrapper form-inline">
															<div class="table-responsive">
																<table class="table table-stripped table-bordered datatable" jq-slider>
																	<thead>
																		<tr role="row">
																			<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Batch No</th>
																			<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">GFs Refs</th>
																			<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">GFs Date</th>
																		</tr>
																	</thead>
																	<tbody>
																		<tr role="row" class="datatable-row">
																			<td>A</td>
																			<td>B</td>
																			<td>C</td>
																		</tr>
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
					      	</div>

					        </div>	
        					
				        </div>
			      	</div>
			      </div>
			</ng-form>
		
			<ng-form name="editFormMarket" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.type == 'REGULAR'">
				<div class="tab-wrapper">
					<div class="clearfix tab-body">
						
						<ul class="clearfix nav-responsive nav nav-tabs">
						    <li ng-if="vm.workPackage.marketFares" ng-class="{active:vm.currentMarketTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.marketFareSheet track by $index"><a ng-click="vm.selectMarketTab($index);">Market Fares : {{vm.workPackage.marketFareSheet[$index].marketFaresName}}</a></li>
						    <li ng-if="vm.workPackage.marketRules" ng-class="{active:vm.currentTabMarketRules}"><a ng-click="vm.selectOtherTab('marketRules')">Market Rules</a></li>
						    <li ng-if="vm.workPackage.addon" ng-class="{active:vm.currentAddonTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.addonFareSheet track by $index"><a ng-click="vm.selectAddonTab($index);">Addon Fares : {{vm.workPackage.addonFareSheet[$index].addonFaresName}}</a></li>
						    <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
							<li ng-if="vm.workPackage.filingInstruction" ng-class="{active:vm.currentTabFilingInstruction}"><a ng-click="vm.selectOtherTab('filingInstruction')">Filing Instruction</a></li>					          
						</ul>
						<div class="tab-content" >
							<div class="tab-pane" ng-class="{active:vm.currentMarketTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.marketFareSheet track by $index">
								<div class="pb1 mb1 bbgrey" ng-class="{'poiv-none' : vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.reviewLevel == 'LSO' 
						&& vm.workPackage.status=='DISTRIBUTED' }">
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Description</label>
												<input type="text" name="marketFareDescription{{$parent.$index}}{{$index}}" class="form-control"
												ng-class="{'must-fill': editForm.editFormMarket.marketFareDescription{{$parent.$index}}{{$index}}.$error.required}"
								         		ng-model="workPackageSheet.marketFaresName" 
								         		ng-required="vm.isRequired('marketFareDescription')"  
								         		ng-disabled="!vm.isEditable('marketFareDescription')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
											</div>
										</div>
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Approval Reference</label>
												<input type="text" name="marketApprovalReference{{$parent.$index}}{{$index}}" class="form-control" 
												ng-class="{'must-fill': editForm.editFormMarket.marketApprovalReference{{$parent.$index}}{{$index}}.$error.required}"
									            ng-model="workPackageSheet.approvalReference"
												ng-disabled="!vm.isEditable('marketApprovalReference')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
												ng-required="vm.isRequired('marketApprovalReference')">
												<button ng-click="vm.generateTourCode(workPackageSheet)" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Generate Tour Code</button>
											</div>
										</div>
									</div>											
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Fare Type</label>												
							      				<select class="form-control" name="marketFareType{{$parent.$index}}{{$index}}" ng-model="workPackageSheet.fareType" ng-class="{'must-fill': !editForm.editFormMarket.marketFareType{{$parent.$index}}{{$index}}.$valid}"
												ng-required="vm.isRequired('marketFareType')" ng-disabled="!vm.isEditable('marketFareType')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
												<option ng-repeat="fare in vm.optionFare track by $index" value="{{fare.name}}">
													{{fare.code}} | {{fare.name}}
												</option>
												</select>										      				
											</div>
										</div>
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Group Fares</label>
												<input class="form-control" type="checkbox" ng-model="workPackageSheet.groupFares" 
												ng-disabled="!vm.isEditable('marketGroupFares')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
												ng-required="vm.isRequired('marketGroupFares')"/>																						      				
											</div>
										</div>
									</div>
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Version</label>
												<select class="form-control" ng-model="workPackageSheet.version" ng-change="vm.changeVersion(workPackageSheet, workPackageSheet.version)" ng-init="vm.changeVersion(workPackageSheet, 'current')">
													<option value='current'>Current</option>
													<option ng-repeat="version in workPackageSheet.fareVersion track by $index" value="{{$index}}">
														{{version.version}} - {{version.username}} - {{version.action}}
													</option>
												</select>
											</div>
 										</div>	
										<div class="pull-left w50 two-column"></div>
									</div>
								</div>																						
							
								<div class="table-wrapper">
									<div class="datatable-wrapper form-inline">
										<div class="clearfix">
											<div class="pull-left" ng-class="{'poiv-none' : vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.reviewLevel == 'LSO' 
						&& vm.workPackage.status=='DISTRIBUTED' }">
												<div class="clearfix">
													<div class="pull-right datatable-button">
														<div class="button-group dropdown custom">
															<button class="btn btn-default small btn-secondary" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Edit<i class="fa fa-caret-down" ng-class="{'poiv-none':(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}"></i></button>
															<ul class="dropdown-menu custom" role="menu">
															    <li>
															    	<a ng-click="vm.clearSelection(workPackageSheet)">Clear Selection</a>
															    </li>	
															    <li>
															    	<a ng-click="vm.fillDown(workPackageSheet)">Fill Down</a>
															    </li>	
															    <li>
														    		<a ng-click="vm.searchReplace(workPackageSheet)">Search/Replace</a>
														   		</li>
														   		 <li>
														    		<a ng-click="vm.copySelectedFares(workPackageSheet, 'workorder-market-fares')">Copy Selected Rows</a>
														   		 </li>
															    <li>
															    	<a ng-click="vm.addFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Add Rows</a>
															    </li>
															    <li>
															    	<a ng-click="vm.duplicateSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Duplicate Selected Rows</a>
															    </li>
															    <li>
															    	<a ng-click="vm.deleteSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Delete Selected Rows</a>
															    </li>
															    <li>
															    	<a ng-click="vm.pasteFares(workPackageSheet)">Paste</a>
															    </li>
															    <!-- <li>
															    	<a href="#">Paste As Cancel</a>
															    </li> -->
															    <li>
															    	<a ng-click="vm.updateActionCodes(workPackageSheet)">Update Action Codes</a>
															    </li>
															    <li>
															   	 <a ng-click="vm.expandCityGroup(workPackageSheet)">Expand City Groups</a>
															    </li>
															</ul>
														</div>													
														<button class="btn btn-default small btn-secondary" ngf-select  ngf-change="vm.importFareMarket($file, $index)" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Import</button>
														<button class="btn btn-default small btn-secondary" ng-click="vm.exportFaresMarket($index)" ng-disabled=" vm.disabledField(vm.workPackage)">Export</button>
														<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.agent()" ng-disabled="vm.disabledField(vm.workPackage)">Agents</button>
														<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.ratesheet()" ng-disabled="vm.workPackage.status=='WITHDRAWN'|| vm.disabledField(vm.workPackage)">Rate Sheet</button>
														<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveUpFare(workPackageSheet)" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Move Up</button>
														<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveDownFare(workPackageSheet)" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Move Down</button> 
												  </div>
												</div>	
											</div>
										</div>
										<div class="table-responsive">
											<table class="table table-stripped table-bordered datatable" jq-slider>
												<thead>
													<tr>
								                		<th>No</th>
								                		<th>Status</th>
								                		<th>Action</th>
									                	<th>Carrier</th>		                	
									                	<th>Origin</th>
									                	<th>Dest</th>
									                	<th>Fare Cls</th>
									                	<th>Bkg Cls</th>
									                	<th>SSN</th>
									                	<th>Cabin</th>
									                	<th>OW/RT</th>
									                	<th>Rule Id</th>
									                	<th>Curr</th>
									                	<th>Base Amt</th>
									                  	<th>Prev Base Amt</th>
									                	<th>Prev Base Amt Diff</th>
									                	<th>% Prev Base Amt Diff</th>
										                <th>Travel Start</th>
									               		<th>Travel End</th>		               		
									               		<th>Sale Start</th>
									               		<th>Sale End</th>	
									               		<th>Comment</th>	               		
									               		<th>Travel Complete</th>	               		
									               		<th>Travel Complete Indicator</th>	               		
									               		<th>RateSheet Comment</th>	        		
									                </tr>
												</thead>
												<tbody ng-class="{'poiv-none' : vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.reviewLevel == 'LSO'&& vm.workPackage.status=='DISTRIBUTED' }">
													<tr ng-click="vm.tbodyClick(workPackageSheet)" ng-repeat="fare in workPackageSheet.currentFares track by $index" role="row" class="datatable-row" ng-class="{'poiv-none': workPackageSheet.version != 'current', 'approved': fare.status == 'APPROVED', 'rejected': fare.status == 'REJECTED'}">
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'no', $event)" ng-class="{highlighted:fare.field['no']}">{{$index+1}}</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'status', $event)" ng-class="{highlighted:fare.field['status']}">
															<select class="form-control inside-table" name="marketFareStatus{{$parent.$index}}{{$index}}" ng-model="fare.status" id="field_status" 
																ng-class="{'must-fill': !editForm.editFormMarket.marketFareStatus{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"												         		
							           							ng-disabled="!vm.isEditable('marketFareStatus')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
												             	ng-required="vm.isRequired('marketFareStatus')"
												             	ng-options="key as value for (key , value) in vm.status">
															</select>	
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'action', $event)" ng-class="{'poiv-none':fare.status != 'PENDING', highlighted:fare.field['action']}">{{fare.action}}</td>
														
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'carrier', $event)" ng-class="{highlighted:fare.field['carrier']}">
															<input type="text" class="form-control" name="marketFareCarrier{{$parent.$index}}{{$index}}" id="field_carrier"
										                    		ng-model="fare.carrier"
										                    		ng-disabled="!vm.isEditable('marketFareCarrier')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
										                    		ng-class="{'must-fill': ditForm.editFormMarket.marketFareCarrier{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
														            ng-required="vm.checkRequiredField('marketFareCarrier')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'origin', $event)" ng-class="{highlighted:fare.field['origin']}">															
															<span class="input-group">
																	<input type="text" class="form-control" name="marketFareOrigin{{$parent.$index}}{{$index}}" id="field_carrier"
											                    		ng-model="fare.origin"
											                    		ng-disabled="!vm.isEditable('marketFareOrigin') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											                    		style="min-width:60px"
											                    		uppercase
											                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareOrigin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('marketFareOrigin') && fare.action != 'Canceled'"
															            ng-focus="origin[$parent.$index][$index]=true" ng-blur="origin[$parent.$index][$index]=false; vm.checkCity(fare, 'origin');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'origin')" ng-class="{'poiv-none': !vm.isEditable('marketFareOrigin') || fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'destination', $event)" ng-class="{highlighted:fare.field['destination']}">
															<span class="input-group">
																<input type="text" class="form-control" name="marketFareDestination{{$parent.$index}}{{$index}}" id="field_carrier"
										                    		ng-model="fare.destination"
										                    		ng-disabled="!vm.isEditable('marketFareDestination') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
										                    		style="min-width:60px"
										                    		uppercase
										                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareDestination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
														            ng-required="vm.isRequired('marketFareDestination') && fare.action != 'Canceled'"
														            ng-focus="destination[$parent.$index][$index]=true" ng-blur="destination[$parent.$index][$index]=false; vm.checkCity(fare, 'destination');"/>
																<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'destination')" ng-class="{'poiv-none': !vm.isEditable('marketFareDestination') || fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																	<i class="fa fa-folder"></i>
																</span>
															</span>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'fareBasis', $event)" ng-class="{highlighted:fare.field['fareBasis']}">
															<input type="text" class="form-control" name="marketFareFarebasis{{$parent.$index}}{{$index}}" id="field_farebasis"
								                				ng-disabled="!vm.isEditable('marketFareFarebasis') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								                				ng-required="vm.isRequired('marketFareFarebasis') && fare.action != 'Canceled'" 
								                				ng-class="{'must-fill': editForm.editFormMarket.marketFareFarebasis{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
									                    		ng-model="fare.fareBasis"/>	
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'bookingClass', $event)" ng-class="{highlighted:fare.field['bookingClass']}">
															<input type="text" class="form-control" name="marketFareBookingClass{{$parent.$index}}{{$index}}" id="field_bookingClass"
								                				ng-disabled="!vm.isEditable('marketFareBookingClass') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								                				ng-required="vm.isRequired('marketFareBookingClass') && fare.action != 'Canceled'" 
								                				ng-class="{'must-fill': editForm.editFormMarket.marketFareBookingClass{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
									                    		ng-model="fare.bookingClass"/>												                			
								                			
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'ssn', $event)" ng-class="{highlighted:fare.field['ssn']}">
															<select class="form-control" 
													             name="marketFareSsn{{$parent.$index}}{{$index}}"
													             ng-required="vm.isRequired('marketFareSsn')"
													             ng-class="{'must-fill': !editForm.editFormMarket.marketFareSsn{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
													             ng-model="fare.ssn" id="field_ssn" 
													             ng-disabled="!vm.isEditable('marketFareSsn') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
													             ng-options="key as value for (key , value) in vm.ssn"></select>	
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'cabin', $event)" ng-class="{highlighted:fare.field['cabin']}">
															<select class="form-control" 
													             name="marketFareCabin{{$parent.$index}}{{$index}}"
													             ng-required="vm.isRequired('marketFareCabin')"
													             ng-class="{'must-fill': !editForm.editFormMarket.marketFareCabin{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
													             ng-model="fare.cabin" id="field_cabin" 
													             ng-disabled="!vm.isEditable('marketFareCabin') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
													             ng-options="key as value for (key , value) in vm.cabin"></select>	
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'typeOfJourney', $event)" ng-class="{highlighted:fare.field['typeOfJourney']}">
															<select class="form-control" 
													             name="marketFareTypeOfJourney{{$parent.$index}}{{$index}}"
													             ng-required="vm.isRequired('marketFareTypeOfJourney')"
													             ng-class="{'must-fill': !editForm.editFormMarket.marketFareTypeOfJourney{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
													             ng-model="fare.typeOfJourney" id="field_typeOfJourney"
													             ng-disabled="!vm.isEditable('marketFareTypeOfJourney') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
													             ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'ruleno', $event)" ng-class="{highlighted:fare.field['ruleno']}">
															<input type="text" class="form-control" name="marketFareRuleno{{$parent.$index}}{{$index}}" id="field_bookingClass"
								                				ng-disabled="!vm.isEditable('marketFareRuleno') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								                				ng-required="vm.isRequired('marketFareRuleno')" 
								                				ng-class="{'must-fill': editForm.editFormMarket.marketFareRuleno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
													            ng-model="fare.ruleno"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'currency', $event)" ng-class="{highlighted:fare.field['currency']}">
															<span class="input-group">
																<input type="text" class="form-control" name="marketFareCurrency{{$parent.$index}}{{$index}}" id="field_carrier"
										                    		ng-model="fare.currency"
										                    		ng-disabled="!vm.isEditable('marketFareCurrency') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
										                    		style="min-width:60px"
										                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareCurrency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
														            ng-required="vm.isRequired('marketFareCurrency') && fare.action != 'Canceled'"
														            ng-focus="currency[$parent.$index][$index]=true" ng-blur="currency[$parent.$index][$index]=false; vm.checkCurrency(fare, 'currency');"/>
																<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCurrency(fare, 'currency')" ng-class="{'poiv-none': !vm.isEditable('marketFareCurrency') || fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																	<i class="fa fa-folder"></i>
																</span>
															</span>	
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'amount', $event)" ng-class="{highlighted:fare.field['amount']}">
															<input type="text" class="form-control" name="marketFareBaseAmt{{$parent.$index}}{{$index}}" id="field_amount"
								                				ng-disabled="!vm.isEditable('marketFareBaseAmt') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								                				ng-required="vm.isRequired('marketFareBaseAmt')" 
								                				ng-class="{'must-fill': editForm.editFormMarket.marketFareBaseAmt{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
													            ng-model="fare.amount"
													            ng-change="vm.marketPrevBaseAmount(fare)"/>
														</td>
														<td>
															<input type="text" class="form-control"
								                				disabled
								                				ng-model="fare.prevAmount"/>
														</td>
														<td>
															<input type="text" class="form-control"
								                				disabled
								                				ng-model="fare.prevAmountDiff"/>
														</td>
														<td>
															<input type="text" class="form-control"
								                				disabled
								                				ng-model="fare.prevPercentAmountDiff"/>
														</td>														
														<td  ng-click="vm.tdClick(workPackageSheet, fare, 'travelStart', $event)" ng-class="{highlighted:fare.field['travelStart']}">
								               				<span class="input-group">
																<input id="field_marketFareTravelStartDate" 
																	type="text"
																	name="marketFareTravelStartDate{{$parent.$index}}{{$index}}" id="field_marketFareTravelStartDate"
									                				ng-disabled="!vm.isEditable('marketFareTravelStartDate') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
									                				class="form-control input-date"					                				
									                				ng-required="vm.isRequired('marketFareTravelStartDate')"
										                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareTravelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
														            ng-model="fare.travelStart" 
														            datetime-picker="{{dateformat}}" 
														            enable-time="false"
														            is-open="vm.datePickerOpenStatus['marketFareTravelStartDate'+$parent.$index+''+$index]">
																<span ng-click="vm.openCalendar('marketFareTravelStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																	<i ng-disabled="true" class="fa fa-calendar"></i>
																</span>
															</span>
								               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelEnd', $event)" ng-class="{highlighted:fare.field['travelEnd']}">
									               				<span class="input-group">
																	<input id="field_marketFareTravelEndDate" 
																		type="text"
																		name="marketFareTravelEndDate{{$parent.$index}}{{$index}}" id="field_marketFareTravelEndDate"
										                				ng-disabled="!vm.isEditable('marketFareTravelEndDate') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('marketFareTravelEndDate')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareTravelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelEnd" 
															            datetime-picker="{{dateformat}}" 
															           	enable-time="false"															            
															            is-open="vm.datePickerOpenStatus['marketFareTravelEndDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('marketFareTravelEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('marketFareTravelEndDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'saleStart', $event)" ng-class="{highlighted:fare.field['saleStart']}">
									               				<span class="input-group">
																	<input id="field_marketFareSaleStartDate" 
																		type="text"
																		name="marketFareSaleStartDate{{$parent.$index}}{{$index}}" id="field_marketFareSaleStartDate"
										                				ng-disabled="!vm.isEditable('marketFareSaleStartDate') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('marketFareSaleStartDate')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareSaleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.saleStart" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['marketFareSaleStartDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('marketFareSaleStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('marketFareSaleStartDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'saleEnd', $event)" ng-class="{highlighted:fare.field['saleEnd']}">
									               				<span class="input-group">
																	<input id="field_marketFareSaleEndDate" 
																		type="text"
																		name="marketFareSaleEndDate{{$parent.$index}}{{$index}}" id="field_marketFareSaleEndDate"
										                				ng-disabled="!vm.isEditable('marketFareSaleEndDate') || fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('marketFareSaleEndDate')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareSaleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.saleEnd" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['marketFareSaleEndDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('marketFareSaleEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																		<i ng-disabled="true" class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>									               												               			
									               			<td  ng-click="vm.tdClick(workPackageSheet, fare, 'comment', $event)" ng-class="{highlighted:fare.field['comment']}">
									               				<input type="text" class="form-control" name="marketFareComment{{$parent.$index}}{{$index}}" id="field_comment"
											                    		ng-model="fare.comment" ng-disabled="fare.status =='APPROVED' || fare.status =='REJECTED'"/>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelComplete', $event)" ng-class="{highlighted:fare.field['travelComplete']}">
									               				<span class="input-group">
																	<input id="field_marketFareTravelComplete" 
																		type="text"
																		name="marketFareTravelComplete{{$parent.$index}}{{$index}}" id="field_marketFareTravelComplete"
										                				ng-disabled="!vm.isEditable('marketFareTravelComplete')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('marketFareTravelComplete')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareTravelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelComplete" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['marketFareTravelComplete'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('marketFareTravelComplete'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': fare.status == 'APPROVED' || fare.status == 'REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																		<i ng-disabled="true" class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelCompleteIndicator', $event)" ng-class="{highlighted:fare.field['travelCompleteIndicator']}">
									               				<select class="form-control" name="marketFareTravelIndicator{{$parent.$index}}{{$index}}" id="field_travelIndicator"
										                				ng-disabled="!vm.isEditable('marketFareTravelIndicator')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
										                				ng-required="vm.isRequired('marketFareTravelIndicator')"
											                    		ng-class="{'must-fill': !editForm.editFormMarket.marketFareTravelIndicator{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"											                    		
											                    		ng-options="key as value for (key , value) in vm.travelCompleteIndicator"													             																		            														                    		
										                				ng-model="fare.travelCompleteIndicator"></select>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'ratesheetComment', $event)" ng-class="{highlighted:fare.field['ratesheetComment']}">
									               				<input type="text" class="form-control" name="marketFareRatesheetComment{{$parent.$index}}{{$index}}" id="field_ratesheetComment"
										                				ng-disabled="!vm.isEditable('marketFareRatesheetComment')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.disabledField(vm.workPackage)"
										                				ng-required="vm.isRequired('marketFareRatesheetComment')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.marketFareRatesheetComment{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            														                    		
											                    		ng-model="fare.ratesheetComment"/>
									               			</td>
														
													</tr>
													<tr class="datatable-action{{$index}}" ng-show="vm.marketFaresActionButton[$index]" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
														<td colspan="18" class="">
															<div class="btn btn-app">
																<i class="fa fa-level-up"></i>Move Up
															</div>
															<div class="btn btn-app">
																<i class="fa fa-level-down"></i>Move Down
															</div>	
															<div class="btn btn-app">
																<i class="fa fa-stack-exchange"></i>Derived Fares
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>	
							</div>
							
							<div class="tab-pane" ng-class="{active:vm.currentTabMarketRules}">
								<div class="action-btn-wrapper">
				       				<div class="col-md-12 text-right no-pad">
				       					<button ng-click="vm.downloadTemplate()" class="btn btn-primary" >Download Market Rules Template</button>
				     					<button ng-click="vm.addMarketRules()" class="btn btn-primary" ng-disabled="vm.workPackage.status =='DISCONTINUED'">Add</button>
				       				</div>
				       				
				       			</div>
				       			
				       			<label class="full-ib md-bot-mar text-center empty" ng-if="!vm.workPackage.marketRulesData || vm.workPackage.marketRulesData.length == 0">
			       					No Market Rules Available
			       				</label>
								<div ng-repeat="marketRules in vm.workPackage.marketRulesData track by $index" class="form-repeat">
			       					<button ng-click="vm.removeMarketRules(marketRules)" class="bordered delete" ng-disabled="vm.workPackage.status !='NEW' && vm.workPackage.reuseFrom != null ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"><span class="glyphicon glyphicon-remove"></span></button>
				       				<label class="user">{{marketRules.username}} <span class="vseparator no-mar"></span> {{marketRules.createdTime | date:'short'}}</label>
						        	<div class="row mt1">
						        		<div class="col-md-6">
						        			<div class="form-group">
												<label>Market Rule Id</label>
												<input type="text" class="form-control" ng-model="marketRules.ruleid" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"/>
											</div>	
							      			<div class="form-group">
							      				<label>Comment</label>
							      				<textarea class="form-control" ng-model="marketRules.comment" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"></textarea>
							      			</div>
						        		</div>
						        		<div class="col-md-6">
						        			<div class="form-group row file" ngf-drop ngf-change="vm.setFile($file, marketRules)">
									            <label class="control-label">File Attachment</label>
									            <div>
									                <div ng-if="marketRules.file" class="help-block clearfix">
									                    <span>{{marketRules.fileContentType}}, {{vm.byteSize(marketRules.file)}}</span>
									                    <a class="a--open" ng-click="vm.openFile(marketRules.fileContentType, marketRules.file)" data-translate="entity.action.open" ng-disabled="attachment.fileName==null"><i class="fa fa-folder"></i> open</a>
									                </div>
									                <div class="action-btn-wrapper no-pad">
									                	<button type="button" ngf-select class="btn btn-secondary"
										                        ngf-change="vm.setFile($file, marketRules)" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
										                    Add file
										                </button>
										                <button type="button" ng-click="marketRules.file=null;marketRules.fileContentType=null;"
									                            class="btn btn-back delete grey" ng-disabled="vm.workPackage.status !='NEW' && vm.workPackage.reuseFrom != null" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
									                        Remove file
									                    </button>
									                    <div class="form-group mt1">
															<div class="checkbox-wrapper">
																<label class="black" for="inOnly">
																	<input type="checkbox" id="inOnly" name="inOnly" ng-model="attachment.inOnly" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
																	Inter Office Notification
																</label>
															</div>
														</div>
									                </div>
									            </div>
									            <input type="hidden" class="form-control" name="file" id="field_file" ng-model="marketRules.file"/>
									            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType" ng-model="marketRules.fileContentType"/>
									        </div>
						        		</div>
						      		</div>
								</div>
			       			</div>
							
							<div class="tab-pane" ng-class="{active:vm.currentAddonTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.addonFareSheet track by $index">
										<div class="pb1 mb1 bbgrey">
										<div class="clearfix">
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label>Description</label>
													
													<textarea class="form-control" 
									         		name="addonFaresName{{$index}}"
									         		ng-model="workPackageSheet.addonFaresName" 
									         		style="min-width: 100%; min-height:100%"
									         		ng-class="{'must-fill': editForm.editFormMarket.addonFaresName{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
									         		ng-required="vm.isRequired('addonFaresName')"  
									         		ng-disabled="!vm.isEditable('addonFaresName')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">
							          				</textarea>
												</div>
											</div>
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label>Version</label>
													<select class="form-control" ng-model="workPackageSheet.version" ng-change="vm.changeVersion(workPackageSheet, workPackageSheet.version)" ng-init="vm.changeVersion(workPackageSheet, 'current')">
														<option value='current'>Current</option>
														<option ng-repeat="version in workPackageSheet.fareVersion track by $index" value="{{$index}}">
															{{version.version}} - {{version.username}} - {{version.action}}
														</option>
													</select>
												</div>
											</div>	
										</div>
									</div>	
											
									<!-- table details-->
									<div class="table-wrapper">
										<div class="datatable-wrapper form-inline">
											<div class="clearfix">
												<div class="pull-left">
													<div class="clearfix">
														<div class="pull-right datatable-button">
															<div class="button-group dropdown custom">
																<button class="btn btn-default small btn-secondary" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Edit<i class="fa fa-caret-down" ng-class="{'poiv-none':(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}"></i></button>
																<ul class="dropdown-menu custom" role="menu">
																	<li>
																    	<a ng-click="vm.clearSelection(workPackageSheet)">Clear Selection</a>
																    </li>	
																    <li>
																    	<a ng-click="vm.fillDown(workPackageSheet)">Fill Down</a>
																    </li>	
																    <li>
															    		<a ng-click="vm.searchReplace(workPackageSheet)">Search/Replace</a>
															   		</li>
															   		 <li>
															    		<a ng-click="vm.copySelectedFares(workPackageSheet, 'workorder-addon-fares')">Copy Selected Rows</a>
															   		 </li>
																    <li>
																    	<a ng-click="vm.addFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Add Rows</a>
																    </li>
																    <li>
																    	<a ng-click="vm.duplicateSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Duplicate Selected Rows</a>
																    </li>
																    <li>
																    	<a ng-click="vm.deleteSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Delete Selected Rows</a>
																    </li>
																    <li>
																    	<a ng-click="vm.pasteFares(workPackageSheet)">Paste</a>
																    </li>
																    <li>
																    	<a ng-click="vm.pasteFares(workPackageSheet, true)">Paste As Cancel</a>
																    </li>
																    <li>
																    	<a ng-click="vm.updateLatestFare(workPackageSheet)">Update With Latest Fare</a>
																    </li>
																    
																    <li>
																    	<a ng-click="vm.updateActionCodes(workPackageSheet)">Update Action Codes</a>
																    </li>
																    <li>
																   	 <a ng-click="vm.expandCityGroup(workPackageSheet)">Expand City Groups</a>
																    </li>
																</ul>
															</div>													
															<button class="btn btn-default small btn-secondary" ngf-select ngf-change="vm.importFareAddon($file, $index)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Import</button>
															<button class="btn btn-default small btn-secondary" ng-click="vm.exportFaresAddon($index)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Export</button>
															<button class="btn btn-default small btn-secondary" ng-disabled="vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 || vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Publish</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT') ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Agents</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.ratesheet()" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Rate Sheet</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveUpFare(workPackageSheet)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Move Up</button>
															<button class="btn btn-default small btn-secondary" data-toggle="modal" ng-click="vm.moveDownFare(workPackageSheet)" ng-disabled="(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT') > -1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)">Move Down</button> 
														</div>
													</div>																						
												</div>
											</div>
											<div class="table-responsive">
												<table class="table table-stripped table-bordered datatable" jq-slider>
													<thead>
														<tr role="row">																	
															<th>No</th>
									                		<th>Status</th>
										                	<th>Carrier</th>		                	
									                		<th>Action</th>
									                		<th>Tar No</th>
									                		<th>Tar Cd</th>
									                		<th>Global</th>
										                	<th>Origin</th>
										                	<th>Dest</th>
										                	<th>Addon Bucket/Fare Class</th>
										                	<th>OW/RT</th>
										                	<th>Filing Curr</th>
										                	<th>Base Amt</th>
										                	<th>Prev Base Amt</th>
									                		<th>Prev Base Amt Diff</th>
									                		<th>% Prev Base Amt Diff</th>
											                <th>Travel Start</th>
										               		<th>Travel End</th>		               		
										               		<th>Sale Start</th>
										               		<th>Sale End</th>	
										               		<th>Comment</th>	               		
										               		<th>Travel Complete</th>	               		
										               		<th>Travel Complete Indicator</th>		
														</tr>
													</thead>
													<tbody>
														<tr role="row" class="datatable-row" ng-repeat="fare in workPackageSheet.currentFares track by $index" ng-class="{'poiv-none': workPackageSheet.version != 'current', 'approved': fare.status == 'APPROVED', 'rejected': fare.status == 'REJECTED'}">
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'no', $event)" ng-class="{highlighted:fare.field['no']}">{{$index+1}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'status', $event)" ng-class="{highlighted:fare.field['status']}">
																<select class="form-control inside-table" name="addonFareStatus{{$index}}" ng-model="fare.status" id="field_status" 
																	ng-class="{'must-fill': !editForm.editFormMarket.addonFareStatus{{$index}}.$valid && fare.action != 'Canceled'}"												         		
								           							ng-disabled="!vm.isEditable('addonFareStatus')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"
													             	ng-required="vm.isRequired('addonFareStatus')"
													             	ng-options="key as value for (key , value) in vm.status">
																</select>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'carrier', $event)" ng-class="{highlighted:fare.field['carrier']}">
																<input type="text" class="form-control" name="addonFareCarrier{{$index}}" id="field_carrier"
											                    		ng-model="fare.carrier"
											                    		ng-disabled="!vm.isEditable('addonFareCarrier')|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											                    		ng-class="{'must-fill': ditForm.editFormATPCO.addonFareCarrier{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('addonFareCarrier')"/>
															</td>																
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'action', $event)" ng-class="{highlighted:fare.field['action']}">{{fare.action}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'tarno', $event)" ng-class="{highlighted:fare.field['tarno']}">
																<span class="input-group">
																	<input type="text" class="form-control" name="addonFareTarno{{$parent.$index}}{{$index}}" id="field_tarcd"
											                    		ng-model="fare.tariffNumber.tarNo"
											                    		ng-disabled="!vm.isEditable('addonFareTarno')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											                    		style="min-width:60px"
											                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareTarno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('addonFareTarno')"
															            ng-focus="tarno[$parent.$index][$index]=true" ng-blur="tarno[$parent.$index][$index]=false; vm.checkTariff(fare, 'tariffNumber', 'tarNo');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectTariff(fare, 'tariffNumber')" ng-class="{'poiv-none': !vm.isEditable('addonFareTarno')|| fare.status =='APPROVED' || fare.status =='REJECTED'}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'tarcd', $event)" ng-class="{highlighted:fare.field['tarcd']}">
																<span class="input-group">
																		<input type="text" class="form-control" name="addonFareTarcd{{$parent.$index}}{{$index}}" id="field_tarcd"
												                    		ng-model="fare.tariffNumber.tarCd"
												                    		ng-disabled="!vm.isEditable('addonFareTarcd')|| fare.status =='APPROVED' || fare.status =='REJECTED'"
												                    		style="min-width:60px"
												                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareTarcd{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
																            ng-required="vm.isRequired('addonFareTarcd') && fare.action != 'Canceled'"
																            ng-focus="tarcd[$parent.$index][$index]=true" ng-blur="tarcd[$parent.$index][$index]=false; vm.checkTariff(fare, 'tariffNumber', 'tarCd');"/>
																		<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectTariff(fare, 'tariffNumber')" ng-class="{'poiv-none': !vm.isEditable('addonFareTarcd')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																			<i class="fa fa-folder"></i>
																		</span>
																	</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'global', $event)" ng-class="{highlighted:fare.field['global']}">{{fare.tariffNumber.global}}</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'origin', $event)" ng-class="{highlighted:fare.field['origin']}">
																<span class="input-group">
																		<input type="text" class="form-control" name="addonFareOrigin{{$parent.$index}}{{$index}}" id="field_carrier"
												                    		ng-model="fare.origin"
												                    		ng-disabled="!vm.isEditable('addonFareOrigin')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
												                    		style="min-width:60px"
												                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareOrigin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
												                    		uppercase
																            ng-required="vm.isRequired('addonFareOrigin') && fare.action != 'Canceled'"
																            ng-focus="origin[$parent.$index][$index]=true" ng-blur="origin[$parent.$index][$index]=false; vm.checkCity(fare, 'origin');"/>
																		<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'origin')" ng-class="{'poiv-none': !vm.isEditable('addonFareOrigin') || fare.status == 'APPROVED' || fare.status == 'REJECTED'}">
																			<i class="fa fa-folder"></i>
																		</span>
																	</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'destination', $event)" ng-class="{highlighted:fare.field['destination']}">
																<span class="input-group">
																	<input type="text" class="form-control" name="addonFareDestination{{$parent.$index}}{{$index}}" id="field_carrier"
											                    		ng-model="fare.destination"
											                    		ng-disabled="!vm.isEditable('addonFareDestination')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											                    		style="min-width:60px"
											                    		uppercase
											                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareDestination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
															            ng-required="vm.isRequired('addonFareDestination') && fare.action != 'Canceled'"
															            ng-focus="destination[$parent.$index][$index]=true" ng-blur="destination[$parent.$index][$index]=false; vm.checkCity(fare, 'destination');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'destination')" ng-class="{'poiv-none': !vm.isEditable('addonFareDestination') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) }">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
															</td>
															<td ng-click="vm.tdClick(workPackageSheet, fare, 'bucket', $event)" ng-class="{highlighted:fare.field['bucket']}">
																<input type="text" class="form-control" ng-model="fare.bucket" name="addonFareBucket{$parent.$index}}{{$index}}"
											           				ng-disabled="!vm.isEditable('addonFareBucket') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											           				ng-maxlength="8"
								                					maxlength="8"
								                					uppercase
								                					ng-pattern="/^[a-zA-Z0-9]{1,8}$/"
								                					ng-keypress="vm.keypress($event, '^[a-zA-Z0-9*]{1,8}$')"									                				
														            ng-class="{'must-fill': editForm.editFormMarket.addonFareBucket{{$parent.$index}}{{$index}}.$error.required 
														            || editForm.editFormMarket.addonFareBucket{{$parent.$index}}{{$index}}.$error.pattern 
														            || editForm.editFormMarket.addonFareBucket{{$parent.$index}}{{$index}}.$error.maxlength && fare.action != 'Canceled'}"	
														            ng-required="vm.isRequired('addonFareBucket')" />
															</td>
										           			<td ng-click="vm.tdClick(workPackageSheet, fare, 'typeOfJourney', $event)" ng-class="{highlighted:fare.field['typeOfJourney']}">
										           				<select class="form-control" 
														             name="addonFareTypeOfJourney{{$parent.$index}}{{$index}}"
														             ng-required="vm.isRequired('addonFareTypeOfJourney')"
														             ng-class="{'must-fill': !editForm.editFormMarket.addonFareTypeOfJourney{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
														             ng-model="fare.typeOfJourney" id="field_typeOfJourney"
														             ng-disabled="!vm.isEditable('addonFareTypeOfJourney') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"
														             ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
										           			</td>									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'currency', $event)" ng-class="{highlighted:fare.field['currency']}">
										               			<span class="input-group">
																		<input type="text" class="form-control" name="addonFareCurrency{{$parent.$index}}{{$index}}" id="field_carrier"
												                    		ng-model="fare.currency" uppercase
												                    		ng-disabled="!vm.isEditable('addonFareCurrency')|| fare.status =='APPROVED' || fare.status =='REJECTED'||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
												                    		style="min-width:60px"
												                    		ng-class="{'must-fill': editForm.editFormATPCO.addonFareCurrency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
																            ng-required="vm.isRequired('addonFareCurrency') && fare.action != 'Canceled'"
																            ng-focus="currency[$parent.$index][$index]=true" ng-blur="currency[$parent.$index][$index]=false; vm.checkCurrency(fare, 'currency');"/>
																		<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCurrency(fare, 'currency')" ng-class="{'poiv-none': !vm.isEditable('addonFareCurrency') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																			<i class="fa fa-folder"></i>
																		</span>
																	</span>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'amount', $event)" ng-class="{highlighted:fare.field['amount']}">
									               				<input type="text" class="form-control" name="addonFareAmount{{$parent.$index}}{{$index}}" id="field_amount"
										                				ng-disabled="!vm.isEditable('addonFareAmount') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) "
										                				ng-required="vm.isRequired('addonFareAmount')" 
										                				ng-maxlength="9"
									                					maxlength="9"
									                					ng-change="vm.marketPrevBaseAmount(fare)"
									                					ng-pattern="/^[0-9]{1,9}$/"
									                					ng-keypress="vm.keypress($event, '^[0-9]{1,9}$')"
										                				ng-class="{'must-fill': editForm.editFormMarket.addonFareAmount{{$parent.$index}}{{$index}}.$error.required 
										                				|| editForm.editFormMarket.addonFareAmount{{$parent.$index}}{{$index}}.$error.maxlength
										                				|| editForm.editFormMarket.addonFareAmount{{$parent.$index}}{{$index}}.$error.pattern && fare.action != 'Canceled'}"																			            
															            ng-model="fare.amount"/>
									               			</td>
									               			
									               			<td>
															<input type="text" class="form-control"
								                				disabled
								                				ng-model="fare.prevAmount"/>
															</td>
															<td>
																<input type="text" class="form-control"
									                				disabled
									                				ng-model="fare.prevAmountDiff"/>
															</td>
															<td>
																<input type="text" class="form-control"
									                				disabled
									                				ng-model="fare.prevPercentAmountDiff"/>
															</td>			
										               		
										               		<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelStart', $event)" ng-class="{highlighted:fare.field['travelStart']}" >
									               				<span class="input-group">
																	<input id="field_addonFareTravelStartDate" 
																		type="text"
																		name="addonFareTravelStartDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareTravelStartDate') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) "	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareTravelStartDate')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.addonFareTravelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelStart" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareTravelStartDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareTravelStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareTravelStartDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelEnd', $event)" ng-class="{highlighted:fare.field['travelEnd']}">
									               				<span class="input-group">
																	<input id="field_addonFareTravelEndDate" 
																		type="text"
																		name="addonFareTravelEndDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareTravelEndDate') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareTravelEndDate')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.addonFareTravelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelEnd" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareTravelEndDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareTravelEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareTravelEndDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage) }">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'saleStart', $event)" ng-class="{highlighted:fare.field['saleStart']}">
									               				<span class="input-group">
																	<input id="field_addonFareSaleStartDate" 
																		type="text"
																		name="addonFareSaleStartDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareSaleStartDate') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareSaleStartDate')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.addonFareSaleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.saleStart" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareSaleStartDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareSaleStartDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareSaleStartDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'saleEnd', $event)" ng-class="{highlighted:fare.field['saleEnd']}">
									               				<span class="input-group">
																	<input id="field_addonFareSaleEndDate" 
																		type="text"
																		name="addonFareSaleEndDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareSaleEndDate') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareSaleEndDate')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.addonFareSaleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.saleEnd" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareSaleEndDate'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareSaleEndDate'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareSaleEndDate') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'comment', $event)" ng-class="{highlighted:fare.field['comment']}">
									               				<input type="text" class="form-control" name="addonFareComment{{$parent.$index}}{{$index}}" id="field_comment"
									               					ng-disabled="fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"
											                    		ng-model="fare.comment"/>
									               			</td>
									               			
									               			<td ng-click="vm.tdClick(workPackageSheet, fare, 'travelComplete', $event)" ng-class="{highlighted:fare.field['travelComplete']}">
									               				<span class="input-group">
																	<input id="field_addonFareTravelComplete" 
																		type="text"
																		name="addonFareTravelComplete{{$parent.$index}}{{$index}}" id="field_travelEndDate"
										                				ng-disabled="!vm.isEditable('addonFareTravelComplete') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN'  ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"	
										                				class="form-control input-date"					                				
										                				ng-required="vm.isRequired('addonFareTravelComplete')"
											                    		ng-class="{'must-fill': editForm.editFormMarket.addonFareTravelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.travelComplete" 
															            datetime-picker="{{dateformat}}" 
															            enable-time="false"
															            is-open="vm.datePickerOpenStatus['addonFareTravelComplete'+$parent.$index+''+$index]">
																	<span ng-click="vm.openCalendar('addonFareTravelComplete'+$parent.$index+''+$index)" class="input-group-addon disabled" ng-class="{'poiv-none': !vm.isEditable('addonFareTravelComplete') || fare.status == 'APPROVED' || fare.status == 'REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-calendar"></i>
																	</span>
																</span>
									               			</td>
									               			<td>
									               				<select class="form-control" name="addonFareTravelIndicator{{$index}}" id="field_travelIndicator"
										                				ng-disabled="!vm.isEditable('addonFareTravelIndicator') || fare.status =='APPROVED' || fare.status =='REJECTED'|| vm.workPackage.status=='WITHDRAWN' ||vm.workPackage.status =='DISCONTINUED' || vm.disabledField(vm.workPackage)"
										                				ng-required="vm.isRequired('addonFareTravelIndicator')"
											                    		ng-class="{'must-fill': !editForm.editFormMarket.addonFareTravelIndicator{{$index}}.$valid && fare.action != 'Canceled'}"												                    		
											                    		ng-options="key as value for (key , value) in vm.travelCompleteIndicator"														             																		            														                    		
										                				ng-model="fare.travelCompleteIndicator"></select>
									               			</td>
														</tr>
													</tbody>
												</table>
											</div>
											<div class="clearfix">
												<div class="pull-left dataTables_info italic">
													* Field can not be empty.
												</div>
											</div>	
										</div>
									</div>
																											
							</div>
							
							<div class="tab-pane" ng-class="{active:vm.currentTabAttachment}" ng-if="vm.workPackage.attachment">
									<div class="action-btn-wrapper">
					     				<div class="col-md-12 text-right no-pad">
					     					<button ng-click="vm.addAttachment()" class="btn btn-primary" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Add</button>
					     				</div>
					     			</div>
									<div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Approval Reference</label>
						                  <input type="text" name="attachmentApprovalReference{{$index}}" class="form-control" 
						                  ng-model="vm.workPackage.attachmentApprovalReference" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
						                  <button ng-click="vm.generateTourCodeAttachment()" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Generate Tour Code</button>
						                </div>
						              </div>
						              
					     			<div class="col-md-12">
					     				<div class="text-center no-data" ng-if="!vm.workPackage.attachmentData || vm.workPackage.attachmentData.length == 0">No Attachment Available</div>							
						     			<div ng-repeat="attachment in vm.workPackage.attachmentData.slice().reverse() track by $index" class="form-repeat">
					       					<button ng-click="vm.removeAttachment(attachment)" class="bordered delete" ng-disabled="vm.workPackage.reviewLevel=='DISTRIBUTION'"><span class="glyphicon glyphicon-remove" ng-class="{'poiv-none': vm.workPackage.reviewLevel=='DISTRIBUTION'}"></span></button>
							       			<label class="user">{{attachment.username}} <span class="vseparator no-mar"></span> {{attachment.createdTime | date: 'short'}}</label>
							       			<div class="row mt1">
								        		<div class="col-md-6">
									      			<div class="form-group">
									      				<label>Comment</label>
									      				<textarea class="form-control" ng-model="attachment.comment" ng-disabled="attachment.isDeleted ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"></textarea>
									      			</div>
								        		</div>
								        		<div class="col-md-6">
								        			<div class="form-group file" ngf-drop ngf-change="vm.setFileAttachment($file, attachment)">
											            <label class="control-label" ng-if="attachment.fileName!=null">{{attachment.fileName}}</label>
											            <label class="control-label" ng-if="attachment.fileName==null">File Attachment</label>
											            <div>
											                <button type="button" class="btn btn-secondary" ng-click="vm.openFile(attachment.fileContentType, attachment.file)" ng-disabled="attachment.fileName==null">
											                    Open
											                </button>
											                <button type="button" ngf-select class="btn btn-secondary"
											                        ngf-change="vm.setFile($file, attachment)" ng-disabled="attachment.isDeleted||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
											                    Add file
											                </button>
										                    <div class="form-group mt1">
																<div class="checkbox-wrapper">
																	<label class="black" for="inOnly">
																		<input type="checkbox" id="inOnly" name="inOnly" ng-model="attachment.inOnly" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
																		Inter Office Notification
																	</label>
																	<label class="black" for="isDeleted">
																		<input type="checkbox" id="isDeleted" name="isDeleted" ng-model="attachment.isDeleted" disabled>
																		Is Deleted
																	</label>
																</div>
															</div>
											            </div>
											            <input type="hidden" class="form-control" name="file" id="field_file"
											                    ng-model="attachment.file"
											                    />
											            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType"
											                    ng-model="attachment.fileContentType" />
											        </div>
								        		</div>
								      		</div>
								     	</div>
								     </div>
							</div>
													
							<div class="tab-pane" ng-class="{active:vm.currentTabFilingInstruction, 'poiv-none' : vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}" ng-if="vm.workPackage.filingInstruction">									
								<div class="box-header"></div>
								<div class="box-body mb1">
									<div class="form-group">
										<label>Comment</label>
									`	<wysiwyg-edit content="vm.commentStringFillingInstruction" config="vm.editorConfig"></wysiwyg-edit>
									</div>
									<div class="clearfix">
										<div class="pull-right">
											<button class="btn btn-default small btn-secondary" ng-click="vm.deleteCommentFillingInstruction()">Delete Comment</button>
											<button class="btn btn-default small btn-secondary" ng-click="vm.collapseCommentFillingInstruction()">Collapse Deleted Comment</button>
											<button class="btn btn-default small btn-secondary" ng-click="vm.expandCommentFillingInstruction()">Expand Deleted Comment</button>
											<button class="btn btn-default small btn-secondary" ng-click="vm.addCommentFillingInstruction()">Add Comment</button>
										</div>
									</div>		
								</div>
								<div class="box-detail box-comment">
									<div class="box-body">
						        		<div class="comment-container">
						        			<div class="comment-wrapper">
								    			<div ng-click="vm.selectCommentFillingInstruction(filingInstructionData)" ng-class="{'FIclicked': vm.tempFIC.indexOf(filingInstructionData) > -1}" ng-if="!filingInstructionData.isDeleted || !vm.isFilingInstructionCollapse" class="comment-list" ng-repeat="filingInstructionData in  vm.workPackage.filingInstructionData.slice().reverse() track by $index">
											    	<div class="clearfix">
											    		<div class="pull-left comment-detail">{{filingInstructionData.username}}</div>
											    		<div class="pull-right comment-detail">{{filingInstructionData.createdTime | date: 'short'}}</div>
											    	</div>
											    	<label> 
											    		<input type="checkbox" id="comment-message" name="comment-message" ng-model="filingInstructionData.isDeleted" disabled>
														<span data-ng-bind-html="trustAsHtml(filingInstructionData.comment)"></span>
													</label>
												</div>
								    		</div>
						        		</div>					        		
							    	</div>
								</div>	
							</div>
							
						</div>
						
					</div>
				</div>
			</ng-form>

			<ng-form name="editFormWaiver" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'MARKET' && vm.workPackage.type == 'WAIVER'">
				<div class="tab-wrapper">
					<div class="clearfix tab-body">
						<ul class="clearfix nav-responsive nav nav-tabs">
						    <li ng-if="vm.workPackage.waiverFares" ng-class="{active:vm.currentWaiverTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.waiverFareSheet track by $index"><a ng-click="vm.selectWaiverTab($index);">Waiver Fares : {{vm.workPackage.waiverFareSheet[$index].waiverFaresName}}</a></li>
						    <li ng-if="vm.workPackage.waiverRules" ng-class="{active:vm.currentTabWaiverRules}"><a ng-click="vm.selectOtherTab('waiverRules')">Waiver Rules</a></li>
						    <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
						</ul>
						<div class="tab-content">
							<div class="tab-pane" ng-class="{active:vm.currentWaiverTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.waiverFareSheet track by $index">
								<div class="pb1 mb1 bbgrey">
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Description</label>
												<input type="text" name="waiverFareDescription{{$parent.$index}}{{$index}}" class="form-control"
												ng-model="workPackageSheet.waiverFaresName" 
												ng-class="{'must-fill': !editForm.editFormWaiver.waiverFareDescription{{$parent.$index}}{{$index}}.$valid}"												         		
			           							ng-disabled="!vm.isEditable('waiverFareDescription')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								             	ng-required="vm.isRequired('waiverFareDescription')">
											</div>
										</div>
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Approval Reference</label>
												<input type="text" name="waiverApprovalReference{{$parent.$index}}{{$index}}" class="form-control" 
												 ng-model="workPackageSheet.approvalReference"
												 ng-class="{'must-fill': !editForm.editFormWaiver.waiverApprovalReference{{$parent.$index}}{{$index}}.$valid}"												         		
			           							ng-disabled="!vm.isEditable('waiverApprovalReference')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								             	ng-required="vm.isRequired('waiverApprovalReference')">
												 <button ng-click="vm.generateTourCode(workPackageSheet)" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Generate Tour Code</button>
											</div>
										</div>
									</div>											
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Fare Type</label>												
							      				<select class="form-control" name="waiverFareType{{$parent.$index}}{{$index}}" ng-model="workPackageSheet.waiverFareType" ng-class="{'must-fill': !editForm.editFormWaiver.waiverFareType{{$parent.$index}}{{$index}}.$valid}"
												ng-required="vm.isRequired('waiverFareType')" ng-disabled="!vm.isEditable('waiverFareType')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
												<option ng-repeat="fare in vm.optionFare track by $index" value="{{fare.name}}">
													{{fare.code}} | {{fare.name}}
												</option>
												</select>									      				
											</div>
										</div>
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Version</label>
												<select class="form-control" ng-model="workPackageSheet.version" ng-change="vm.changeVersion(workPackageSheet, workPackageSheet.version)" ng-init="vm.changeVersion(workPackageSheet, 'current')">
													<option value='current'>Current</option>
													<option ng-repeat="version in workPackageSheet.fareVersion track by $index" value="{{$index}}">
														{{version.version}} - {{version.username}} - {{version.action}}
													</option>
												</select>
											</div>
										 </div>	
									</div>
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Agent Name</label>
												<input name="waiverAgentName{{$parent.$index}}{{$index}}" type="text" class="form-control" ng-model="workPackageSheet.waiverAgentName"
												ng-class="{'must-fill': !editForm.editFormWaiver.waiverAgentName{{$parent.$index}}{{$index}}.$valid}"												         		
			           							ng-disabled="!vm.isEditable('waiverAgentName')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								             	ng-required="vm.isRequired('waiverAgentName')"/>
											</div>
										</div>
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>IATA No</label>
												<input name="waiverIataNo{{$parent.$index}}{{$index}}" type="text" class="form-control"  ng-model="workPackageSheet.waiverIataNo"
												ng-class="{'must-fill': !editForm.editFormWaiver.waiverIataNo{{$parent.$index}}{{$index}}.$valid}"												         		
			           							ng-disabled="!vm.isEditable('waiverIataNo')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								             	ng-required="vm.isRequired('waiverIataNo')"/>
											</div>
										</div>
									</div>
									<div class="clearfix">
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>Approval Date</label>
												<input name="waiverApprovalDate{{$parent.$index}}{{$index}}" type="text" class="form-control" ng-model="workPackageSheet.waiverApprovalDate"
												ng-class="{'must-fill': !editForm.editFormWaiver.waiverApprovalDate{{$parent.$index}}{{$index}}.$valid}"												         		
			           							ng-disabled="!vm.isEditable('waiverApprovalDate')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								             	ng-required="vm.isRequired('waiverApprovalDate')"/>
											</div>
										</div>
										<div class="pull-left w50 two-column">
											<div class="form-group">
												<label>IOC Number</label>
												<input name="waiverIocNumber{{$parent.$index}}{{$index}}" type="text" class="form-control" ng-model="workPackageSheet.waiverIocNumber"
												ng-class="{'must-fill': !editForm.editFormWaiver.waiverIocNumber{{$parent.$index}}{{$index}}.$valid}"												         		
			           							ng-disabled="!vm.isEditable('waiverIocNumber')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
								             	ng-required="vm.isRequired('waiverIocNumber')"/>
											</div>
										</div>
									</div>
								</div>																						
							
								<div class="table-wrapper">
									<div class="datatable-wrapper form-inline">
										<div class="clearfix">
											<div class="pull-left">
												<div class="clearfix">
													<div class="pull-right datatable-button">
														<div class="button-group dropdown custom">
															<button class="btn btn-default small btn-secondary" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Edit<i class="fa fa-caret-down" ng-class="{'poiv-none':(vm.user.reviewLevels.indexOf('ROUTE_MANAGEMENT')>-1 && vm.workPackage.reviewLevel == 'ROUTE_MANAGEMENT')|| vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}"></i></button>
															<ul class="dropdown-menu custom" role="menu">
															    <li>
															    	<a ng-click="vm.clearSelection(workPackageSheet)">Clear Selection</a>
															    </li>	
															    <li>
															    	<a ng-click="vm.fillDown(workPackageSheet)">Fill Down</a>
															    </li>	
															    <li>
															    	<a ng-click="vm.searchReplace(workPackageSheet)">Search/Replace</a>
															    </li>
															    <li>
														    		<a ng-click="vm.copySelectedFares(workPackageSheet, 'workorder-waiver-fares')">Copy Selected Rows</a>
														   		 </li>
															    <li>
															    	<a ng-click="vm.addFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Add Rows</a>
															    </li>
															    <li>
															    	<a ng-click="vm.duplicateSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Duplicate Selected Rows</a>
															    </li>
															    <li>
															    	<a ng-click="vm.deleteSelectedFares(workPackageSheet)" ng-disabled="vm.workPackage.reviewLevel == 'DISTRIBUTION'" ng-class="{'poiv-none':vm.workPackage.reviewLevel == 'DISTRIBUTION'}">Delete Selected Rows</a>
															    </li>
															    <li>
															    	<a ng-click="vm.pasteFares(workPackageSheet)">Paste</a>
															    </li>
															    <li>
															    	<a href="#">Paste As Cancel</a>
															    </li>
															    <li>
																   	 <a ng-click="vm.expandCityGroup(workPackageSheet)">Expand City Groups</a>
																    </li>
															</ul>
														</div>		
														
														<button class="btn btn-default small btn-secondary" ngf-select  ngf-change="vm.importFareWaiver($file, $index)" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Import</button>
														<button class="btn btn-default small btn-secondary" ng-click="vm.exportFaresWaiver($index)" ng-disabled="vm.workPackage.status=='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Export</button>	
														<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent" ng-disabled="vm.workPackage.status=='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Agents</button>
														<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalRatesheet" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Rate Sheet</button>
													</div>
												</div>	
											</div>
										</div>
										<div class="table-responsive">
											<table class="table table-stripped table-bordered datatable">
												<thead>
													<tr>
								                		<th>No</th>
								                		<th>Type</th>
									                	<th>Full/Partial</th>		                	
									                	<th>PNR</th>
									                	<th>Tkt From</th>
									                	<th>Tkt To</th>
									                	<th>Ori</th>
									                	<th>Dest</th>
									                	<th>Original Itinerary</th>
									                	<th>New Itinerary</th>
									                	<th>Original Basic Fare</th>
									                	<th>New Basic Fare</th>
									                	<th>Approved Fares</th>
										                <th>Fare Lost</th>
									               		<th>Calculated PN</th>		               		
									               		<th>Original PN</th>
									               		<th>Approved PN</th>	
									               		<th>Penalty Lost %</th>	               		
									               		<th>Penalty Lost Amount</th>	               		
									               		<th>Currency</th>	               		
									               		<th>Total Pax</th>	        	
									               		<th>Total Lost</th>	 
									               		<th>Approver</th>
									               		<th>Remark</th>	        		        	       		
									                </tr>
												</thead>
												<tbody>
													<tr ng-click="vm.tbodyClick(workPackageSheet)" ng-repeat="fare in workPackageSheet.currentFares track by $index" role="row" class="datatable-row" ng-class="{'poiv-none':workPackageSheet.version != 'current', 'approved': fare.status == 'APPROVED', 'rejected': fare.status == 'REJECTED'}">
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'no', $event)" ng-class="{highlighted:fare.field['no']}">{{$index+1}}</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverType', $event)" ng-class="{highlighted:fare.field['waiverType']}">
															<select class="form-control" ng-model="fare.waiverType" name="waiverType{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverType{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverType')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverType')">
																<option>SALES</option>
																<option>FUND</option>
															</select>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverFullPartial', $event)" ng-class="{highlighted:fare.field['waiverFullPartial']}">
															<select class="form-control" ng-model="fare.waiverFullPartial"  name="waiverFullPartial{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverFullPartial{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverFullPartial')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverFullPartial')">
																<option>FULL</option>
																<option>PARTIAL</option>
															</select>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverPnr', $event)" ng-class="{highlighted:fare.field['waiverPnr']}">
															<input type="text" class="form-control" ng-model="fare.waiverPnr" name="waiverPnr{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverPnr{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverPnr')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverPnr')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverTktFrom', $event)" ng-class="{highlighted:fare.field['waiverTktFrom']}">
															<input type="text" class="form-control"  ng-model="fare.waiverTktFrom" name="waiverTktFrom{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverTktFrom{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverTktFrom')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverTktFrom')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverTktTo', $event)" ng-class="{highlighted:fare.field['waiverTktTo']}">
															<input type="text" class="form-control" ng-model="fare.waiverTktTo" name="waiverTktTo{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverTktTo{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverTktTo')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverTktTo')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverOri', $event)" ng-class="{highlighted:fare.field['waiverOri']}">										             	
											             	<span class="input-group">
																	<input type="text" class="form-control" name="waiverOri{{$parent.$index}}{{$index}}" id="field_carrier"
											                    		ng-model="fare.waiverOri"
											                    		ng-disabled="!vm.isEditable('waiverOri')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											                    		name="waiverOri{{$parent.$index}}{{$index}}"
											                    		style="min-width:60px"
											                    		ng-class="{'must-fill': !editForm.editFormWaiver.waiverOri{{$parent.$index}}{{$index}}.$valid}"												         		
															            ng-required="vm.isRequired('waiverOri')"
															            ng-focus="origin[$parent.$index][$index]=true" ng-blur="origin[$parent.$index][$index]=false; vm.checkCity(fare, 'waiverOri');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'waiverOri')" ng-class="{'poiv-none': !vm.isEditable('waiverOri')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverDest', $event)" ng-class="{highlighted:fare.field['waiverDest']}">
											             	<span class="input-group">
																	<input type="text" class="form-control" name="waiverDest{{$parent.$index}}{{$index}}" id="field_carrier"
											                    		ng-model="fare.waiverDest"
											                    		name="waiverDest{{$parent.$index}}{{$index}}"
											                    		ng-disabled="!vm.isEditable('waiverDest')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											                    		style="min-width:60px"
											                    		ng-class="{'must-fill': !editForm.editFormWaiver.waiverDest{{$parent.$index}}{{$index}}.$valid}"												         		
															            ng-required="vm.isRequired('waiverDest')"
															            ng-focus="destination[$parent.$index][$index]=true" ng-blur="destination[$parent.$index][$index]=false; vm.checkCity(fare, 'waiverDest');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCity(fare, 'waiverDest')" ng-class="{'poiv-none': !vm.isEditable('waiverDest')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverOriginalItinerary', $event)" ng-class="{highlighted:fare.field['waiverOriginalItinerary']}">
															<input type="text" class="form-control" ng-model="fare.waiverOriginalItinerary" name="waiverOriginalItinerary{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverOriginalItinerary{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverOriginalItinerary')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverOriginalItinerary')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverNewItinerary', $event)" ng-class="{highlighted:fare.field['waiverNewItinerary']}">
															<input type="text" class="form-control" ng-model="fare.waiverNewItinerary" name="waiverNewItinerary{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverNewItinerary{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverNewItinerary')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverNewItinerary')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverOriginalBasicFare', $event)" ng-class="{highlighted:fare.field['waiverOriginalBasicFare']}">
															<input type="text" class="form-control" ng-model="fare.waiverOriginalBasicFare" name="waiverOriginalBasicFare{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverOriginalBasicFare{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverOriginalBasicFare')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverOriginalBasicFare')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverNewBasicFare', $event)" ng-class="{highlighted:fare.field['waiverNewBasicFare']}">
															<input type="text" class="form-control" ng-model="fare.waiverNewBasicFare" name="waiverNewBasicFare{{$parent.$index}}{{$index}}"
															ng-change="vm.calculateFareLost(fare)"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverNewBasicFare{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverNewBasicFare')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverNewBasicFare')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverApprovedFare', $event)" ng-class="{highlighted:fare.field['waiverApprovedFare']}">
															<input type="text" class="form-control" ng-model="fare.waiverApprovedFare" name="waiverApprovedFare{{$parent.$index}}{{$index}}"
															ng-change="vm.calculateFareLost(fare)"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverApprovedFare{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverApprovedFare')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverApprovedFare')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverFareLost', $event)" ng-class="{highlighted:fare.field['waiverFareLost']}">
															<input type="text" class="form-control" ng-model="fare.waiverFareLost" name="waiverFareLost{{$parent.$index}}{{$index}}"
															ng-change="vm.calculateTotalLost(fare)"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverFareLost{{$parent.$index}}{{$index}}.$valid}"
											             	ng-required="vm.isRequired('waiverFareLost')" disabled/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverCalculatedPn', $event)" ng-class="{highlighted:fare.field['waiverCalculatedPn']}">
															<!-- <input type="text" class="form-control" ng-model="fare.waiverCalculatedPn" name="waiverCalculatedPn{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverCalculatedPn{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverCalculatedPn')||vm.workPackage.status=='WITHDRAWN'"
											             	ng-required="vm.isRequired('waiverCalculatedPn')" /> -->
											             	<select class="form-control" name="waiverCalculatedPn{{$parent.$index}}{{$index}}" ng-model="fare.waiverCalculatedPn" ng-class="{'must-fill': !editForm.editFormWaiver.waiverCalculatedPn{{$parent.$index}}{{$index}}.$valid}"
															ng-disabled="!vm.isEditable('waiverCalculatedPn')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverCalculatedPn')" >
																<option value="amount">Amount</option>
																<option value="percent">Percent</option>
												</select>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverOriginalPn', $event)" ng-class="{highlighted:fare.field['waiverOriginalPn']}">
															<input type="text" class="form-control" ng-model="fare.waiverOriginalPn" name="waiverOriginalPn{{$parent.$index}}{{$index}}"
															ng-change="vm.calculatePenaltyLost(fare)"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverOriginalPn{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverOriginalPn')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverOriginalPn')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverApprovedPn', $event)" ng-class="{highlighted:fare.field['waiverApprovedPn']}">
															<input type="text" class="form-control" ng-model="fare.waiverApprovedPn" name="waiverApprovedPn{{$parent.$index}}{{$index}}"
															ng-change="vm.calculatePenaltyLost(fare)"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverApprovedPn{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverApprovedPn')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverApprovedPn')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverPenaltyLostPercent', $event)" ng-class="{highlighted:fare.field['waiverPenaltyLostPercent']}">
															<input type="text" class="form-control" ng-model="fare.waiverPenaltyLostPercent" name="waiverPenaltyLostPercent{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverPenaltyLostPercent{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverPenaltyLostPercent')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverPenaltyLostPercent')" disabled/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverPenaltyLostAmount', $event)" ng-class="{highlighted:fare.field['waiverPenaltyLostAmount']}">
															<input type="text" class="form-control" ng-model="fare.waiverPenaltyLostAmount" name="waiverPenaltyLostAmount{{$parent.$index}}{{$index}}"
															ng-change="vm.calculateTotalLost(fare)"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverPenaltyLostAmount{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverPenaltyLostAmount')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverPenaltyLostAmount')" disabled/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverCurrency', $event)" ng-class="{highlighted:fare.field['waiverCurrency']}">
															<span class="input-group">
																	<input type="text" class="form-control" name="waiverCurrency{{$parent.$index}}{{$index}}" id="field_carrier"
											                    		ng-model="fare.waiverCurrency"
											                    		ng-disabled="!vm.isEditable('waiverCurrency')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											                    		style="min-width:60px"
											                    		ng-class="{'must-fill': !editForm.editFormWaiver.waiverCurrency{{$parent.$index}}{{$index}}.$valid}"												         		
															            ng-required="vm.isRequired('waiverCurrency')"
															            ng-focus="currency[$parent.$index][$index]=true" ng-blur="currency[$parent.$index][$index]=false; vm.checkCurrency(fare, 'currency');"/>
																	<span class="input-group-addon disabled" ng-click="$event.stopPropagation(); vm.selectCurrency(fare, 'waiverCurrency')" ng-class="{'poiv-none': !vm.isEditable('waiverCurrency')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)}">
																		<i class="fa fa-folder"></i>
																	</span>
																</span>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverTotalPax', $event)" ng-class="{highlighted:fare.field['waiverTotalPax']}">
															<input type="text" class="form-control" ng-model="fare.waiverTotalPax" name="waiverTotalPax{{$parent.$index}}{{$index}}"
															ng-change="vm.calculateTotalLost(fare)"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverTotalPax{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverTotalPax')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverTotalPax')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverTotalLost', $event)" ng-class="{highlighted:fare.field['waiverTotalLost']}">
															<input type="text" class="form-control" ng-model="fare.waiverTotalLost" name="waiverTotalLost{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverTotalLost{{$parent.$index}}{{$index}}.$valid}"											         		
						           							
											             	ng-required="vm.isRequired('waiverTotalLost')" disabled/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverApprover', $event)" ng-class="{highlighted:fare.field['waiverApprover']}">
															<input type="text" class="form-control" ng-model="fare.waiverApprover" name="waiverApprover{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverApprover{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverApprover')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverApprover')"/>
														</td>
														<td ng-click="vm.tdClick(workPackageSheet, fare, 'waiverRemark', $event)" ng-class="{highlighted:fare.field['waiverRemark']}">
															<input type="text" class="form-control" ng-model="fare.waiverRemark" name="waiverRemark{{$parent.$index}}{{$index}}"
															ng-class="{'must-fill': !editForm.editFormWaiver.waiverRemark{{$parent.$index}}{{$index}}.$valid}"												         		
						           							ng-disabled="!vm.isEditable('waiverRemark')||vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"
											             	ng-required="vm.isRequired('waiverRemark')"/>
														</td>
													</tr>
													<tr class="datatable-action{{$index}}" ng-show="vm.waiverFaresActionButton[$index]" ng-disabled="vm.workPackage.status=='WITHDRAWN'||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
														<td colspan="18" class="">
															<div class="btn btn-app">
																<i class="fa fa-level-up"></i>Move Up
															</div>
															<div class="btn btn-app">
																<i class="fa fa-level-down"></i>Move Down
															</div>	
															<div class="btn btn-app">
																<i class="fa fa-stack-exchange"></i>Derived Fares
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>	
							</div>
							
							<div class="tab-pane" ng-class="{active:vm.currentTabWaiverRules}">
								<div class="action-btn-wrapper">
				       				<div class="col-md-12 text-right no-pad">
				       					<button ng-click="vm.addWaiverRules()" class="btn btn-primary">Add</button>
				       				</div>
				       			</div>
				       			
				       			<label class="full-ib md-bot-mar text-center empty" ng-if="!vm.workPackage.waiverRulesData || vm.workPackage.waiverRulesData.length == 0">
			       					No Waiver Rules Available
			       				</label>
								<div ng-repeat="waiverRules in vm.workPackage.waiverRulesData track by $index" class="form-repeat">
			       					<button ng-click="vm.removeWaiverRules(waiverRules)" class="bordered delete" ng-disabled="vm.workPackage.status !='NEW' && vm.workPackage.reuseFrom != null"><span class="glyphicon glyphicon-remove"></span></button>
				       				<label class="user">admin <span class="vseparator no-mar"></span> 12JAN18 09:15:16</label>
						        	<div class="row">
						        		<div class="col-md-6">
							      			<div class="form-group row">
							      				<label class="col-md-4" >Status</label>
							      				<div class="col-md-8 no-pad select">
							      					<select class="col-md-12" name="qaStatus" ng-model="waiverRules.status" id="field_qaStatus">
										                <option value="">Select Status</option>
										                <option value="PENDING" >Pending</option>
										                <option value="APPROVED">Approve</option>
										                <option value="REJECTED">Reject</option>
										            </select>	
							      				</div>
							      			</div>
							      			<div class="form-group row" ng-init="waiverRules.cxr = 'GA'">
							      				<label class="col-md-4" >CXR</label>
									            <input type="text" class="col-md-8" ng-model="waiverRules.cxr" disabled/>
							      			</div>
							      			<div class="form-group row">
							      				<label class="col-md-4">Market Rule Id</label>
								             	<input type="text" class="col-md-8" ng-model="waiverRules.ruleid"/>
							      			</div>
							      			<div class="form-group">
							      				<label>Comment</label>
							      				<textarea class="form-control" ng-model="waiverRules.comment"></textarea>
							      			</div>
						        		</div>
						        		<div class="col-md-6">
						        			<div class="form-group row file" ngf-drop ngf-change="vm.setFile($file, waiverRules)">
									            <label class="control-label">File Attachment</label>
									            <div>
									                <div ng-if="waiverRules.file" class="help-block clearfix">
									                    <span>{{waiverRules.fileContentType}}, {{vm.byteSize(waiverRules.file)}}</span>
									                    <a class="a--open" ng-click="vm.openFile(waiverRules.fileContentType, waiverRules.file)" data-translate="entity.action.open" ng-disabled="attachment.fileName==null"><i class="fa fa-folder"></i> open</a>
									                </div>
									                <div class="action-btn-wrapper no-pad">
									                	<button type="button" ngf-select class="btn btn-primary btn-block"
										                        ngf-change="vm.setFile($file, waiverRules)">
										                    Add file
										                </button>
										                <button type="button" ng-click="waiverRules.file=null;waiverRules.fileContentType=null;"
									                            class="btn btn-default delete grey" ng-disabled="vm.workPackage.status !='NEW' && vm.workPackage.reuseFrom != null">
									                        Remove file
									                    </button>
									                    <label class="black" for="inOnly">									                    
															Inter Office Notification
															<input type="checkbox" id="inOnly" name="inOnly" ng-model="attachment.inOnly">
														</label>
									                </div>
									            </div>
									            <input type="hidden" class="form-control" name="file" id="field_file" ng-model="waiverRules.file"/>
									            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType" ng-model="waiverRules.fileContentType"/>
									        </div>
						        		</div>
						      		</div>
								</div>
							</div>																						
						
							<div class="tab-pane" ng-class="{active:vm.currentTabAttachment}">
									<div class="action-btn-wrapper">
					     				<div class="col-md-12 text-right no-pad">
					     					<button ng-click="vm.addAttachment()" class="btn btn-primary" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Add</button>
					     				</div>
					     			</div>
									<div class="pull-left w50 two-column">
						                <div class="form-group">
						                  <label>Approval Reference</label>
						                  <input type="text" name="attachmentApprovalReference{{$index}}" class="form-control" 
						                  ng-model="vm.workPackage.attachmentApprovalReference" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
						                  <button ng-click="vm.generateTourCodeAttachment()" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">Generate Tour Code</button>
						                </div>
						              </div>
						              
					     			<div class="col-md-12">
					     				<div class="text-center no-data" ng-if="!vm.workPackage.attachmentData || vm.workPackage.attachmentData.length == 0">No Attachment Available</div>							
						     			<div ng-repeat="attachment in vm.workPackage.attachmentData.slice().reverse() track by $index" class="form-repeat">
					       					<button ng-click="vm.removeAttachment(attachment)" class="bordered delete" ng-disabled="vm.workPackage.reviewLevel=='DISTRIBUTION'"><span class="glyphicon glyphicon-remove" ng-class="{'poiv-none': vm.workPackage.reviewLevel=='DISTRIBUTION'}"></span></button>
							       			<label class="user">{{attachment.username}} <span class="vseparator no-mar"></span> {{attachment.createdTime | date: 'short'}}</label>
							       			<div class="row mt1">
								        		<div class="col-md-6">
									      			<div class="form-group">
									      				<label>Comment</label>
									      				<textarea class="form-control" ng-model="attachment.comment" ng-disabled="attachment.isDeleted ||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)"></textarea>
									      			</div>
								        		</div>
								        		<div class="col-md-6">
								        			<div class="form-group file" ngf-drop ngf-change="vm.setFileAttachment($file, attachment)">
											            <label class="control-label" ng-if="attachment.fileName!=null">{{attachment.fileName}}</label>
											            <label class="control-label" ng-if="attachment.fileName==null">File Attachment</label>
											            <div>
											                <button type="button" class="btn btn-secondary" ng-click="vm.openFile(attachment.fileContentType, attachment.file)" ng-disabled="attachment.fileName==null">
											                    Open
											                </button>
											                <button type="button" ngf-select class="btn btn-secondary"
											                        ngf-change="vm.setFile($file, attachment)" ng-disabled="attachment.isDeleted||vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
											                    Add file
											                </button>
										                    <div class="form-group mt1">
																<div class="checkbox-wrapper">
																	<label class="black" for="inOnly">
																		<input type="checkbox" id="inOnly" name="inOnly" ng-model="attachment.inOnly" ng-disabled="vm.workPackage.status =='DISCONTINUED'|| vm.disabledField(vm.workPackage)">
																		Inter Office Notification
																	</label>
																	<label class="black" for="isDeleted">
																		<input type="checkbox" id="isDeleted" name="isDeleted" ng-model="attachment.isDeleted" disabled>
																		Is Deleted
																	</label>
																</div>
															</div>
											            </div>
											            <input type="hidden" class="form-control" name="file" id="field_file"
											                    ng-model="attachment.file"
											                    />
											            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType"
											                    ng-model="attachment.fileContentType" />
											        </div>
								        		</div>
								      		</div>
								     	</div>
								     </div>
								
							</div>
						</div>
					</div>
				</div>
			</ng-form>

		</div>
	</div>
	<div class="panel panel-tabs">
		<div class="panel-body">
		
			<div class="tab-wrapper tab-validation">
				<div class="clearfix tab-body">
					<ul class="clearfix nav-responsive nav nav-tabs">
					    <li class="active"><a >Validations</a></li>
					    <li><a >Release Errors</a></li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane active" id="validation">
							<ul class="tree">
								<li>
							    	<input type="checkbox" checked="checked" id="c1" />
							    	<label class="tree_label main-label" for="c1">There is {{vm.workPackage.validation.errorsCount}} error(s) and {{vm.workPackage.validation.warningsCount}} warning(s)</label>
								    <ul ng-repeat="workPackageTab in vm.workPackage.validation.tab track by $index">
								    	<li>
								        	<input type="checkbox" checked="checked" id="c2" />
								        	<label for="c2" class="tree_label second-label">{{workPackageTab.name}}</label>
									        <ul>
									          	<li ng-if="workPackageTab.warning.length > 0">
									          		<input type="checkbox" checked="checked" id="c3" />
								        			<label for="c3" class="tree_label warning-label">Warnings</label>
								        			<ul>
								        			    <li ng-repeat="warning in workPackageTab.warning track by $index">
								        			    	<span ng-click="vm.selectErrorField(workPackageTab.type, workPackageTab.index, warning.index, warning.field)" class="tree_label tree-detail">{{warning.message}}</span>
								        			    </li>
								        			</ul>
									          	</li>
									          	<li ng-if="workPackageTab.error.length > 0">
									          		<input type="checkbox" checked="checked" id="c5" />
								        			<label for="c5" class="tree_label error-label">Errors</label>
								        			<ul>
								        			    <li ng-repeat="error in workPackageTab.error track by $index">
								        			    	<span ng-click="vm.selectErrorField(workPackageTab.type, workPackageTab.index, error.index, error.field)" class="tree_label tree-detail">{{error.message}}</span>
								        			    </li>
								        			</ul>
									          	</li>
									        </ul>
								      	</li>
								      	<!-- <li>
								        	<input type="checkbox" checked="checked" id="c4" />
								        	<label for="c4" class="tree_label second-label">Attachments</label>
									        <ul>
									          	<li>
									          		<input type="checkbox" checked="checked" id="c5" />
								        			<label for="c5" class="tree_label error-label">Errors</label>
								        			<ul>
								        			    <li><span class="tree_label tree-detail">Error 1</span></li>
								        			    <li><span class="tree_label tree-detail">Error 2</span></li>
								        			</ul>
									          	</li>
									        </ul>
								      	</li> -->
								    </ul>
							  	</li>
							  										  
							</ul>
						</div>
						<div class="tab-pane" id="release-errors">
							
						</div>
					</div>
				</div>							
			</div>
		</div>
	</div>
</form>